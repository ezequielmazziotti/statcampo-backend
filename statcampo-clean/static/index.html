<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>StatCampo — Análisis de fútbol</title>
<link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,wght@0,300;0,400;0,600;1,300;1,400&family=Geist:wght@300;400;500;600&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<style>
:root{--bg:#faf9f7;--bg2:#f3f1ed;--white:#fff;--accent:#c4601a;--accent-light:#f5ede6;--green-dark:#2a3d2e;--green-mid:#4a6350;--text:#1a1a18;--text-mid:#5a5a54;--text-light:#9a9a90;--border:#e2ddd6;--border-dark:#ccc8be;--success:#16a34a;--success-light:#dcfce7;--warn:#d97706;--warn-light:#fef9c3;--danger:#dc2626;--danger-light:#fee2e2;--blue:#3b82f6;--blue-light:#eff6ff;--purple:#8b5cf6;--purple-light:#f5f3ff}
*{margin:0;padding:0;box-sizing:border-box}html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:'Geist',sans-serif;font-weight:300;overflow-x:hidden}
nav{position:fixed;top:0;left:0;right:0;z-index:1000;padding:0 48px;height:64px;display:flex;align-items:center;justify-content:space-between;background:rgba(250,249,247,.96);backdrop-filter:blur(16px);border-bottom:1px solid var(--border)}
.logo{font-family:'Fraunces',serif;font-size:1.25rem;font-weight:600;color:var(--text);cursor:pointer;letter-spacing:-.01em;user-select:none}
.logo span{color:var(--accent)}
.nav-links{display:flex;gap:4px;list-style:none}
.nav-links li a{color:var(--text-mid);font-size:.88rem;cursor:pointer;padding:6px 14px;border-radius:6px;display:block;transition:all .15s;user-select:none}
.nav-links li a:hover{background:var(--bg2);color:var(--text)}
.nav-links li a.active{color:var(--accent);background:var(--accent-light)}
.nav-right{display:flex;align-items:center;gap:10px}
.btn-ghost-nav{background:none;border:1px solid var(--border-dark);color:var(--text-mid);padding:8px 16px;font-family:'Geist',sans-serif;font-size:.85rem;cursor:pointer;border-radius:6px}
.btn-fill-nav{background:var(--accent);border:none;color:#fff;padding:8px 18px;font-family:'Geist',sans-serif;font-size:.85rem;font-weight:500;cursor:pointer;border-radius:6px}
.mobile-nav{display:none;position:fixed;bottom:0;left:0;right:0;z-index:1000;background:rgba(250,249,247,.97);backdrop-filter:blur(16px);border-top:1px solid var(--border);padding:6px 0 max(6px,env(safe-area-inset-bottom))}
.mobile-nav-items{display:flex;justify-content:space-around}
.mobile-nav-btn{display:flex;flex-direction:column;align-items:center;gap:2px;padding:6px 8px;cursor:pointer;border:none;background:none;font-family:'Geist',sans-serif;border-radius:8px;min-width:50px}
.mobile-nav-btn .mn-icon{font-size:1.2rem}
.mobile-nav-btn .mn-label{font-size:.55rem;color:var(--text-light)}
.mobile-nav-btn.active .mn-label{color:var(--accent);font-weight:500}
.sc-page{display:none}.sc-page.active{display:block}
.sc-page-padded{padding-top:64px}
.toast{position:fixed;bottom:80px;right:16px;background:var(--green-dark);color:#f5f1eb;padding:12px 18px;border-radius:8px;font-size:.85rem;display:flex;align-items:center;gap:8px;transform:translateY(60px);opacity:0;transition:all .3s;z-index:9999;box-shadow:0 8px 24px rgba(0,0,0,.2);pointer-events:none}
.toast.show{transform:translateY(0);opacity:1}
@keyframes spin{to{transform:rotate(360deg)}}
@media(max-width:768px){nav{padding:0 16px}.nav-links,.nav-right{display:none}.mobile-nav{display:block}.sc-page-padded{padding-bottom:80px}}
</style>
<style>/* LANDING */

  :root {
    --bg: #faf9f7;
    --bg2: #f3f1ed;
    --bg3: #ede9e3;
    --white: #ffffff;
    --accent: #c4601a;
    --accent-light: #f5ede6;
    --accent-mid: #e8a07a;
    --green-dark: #2a3d2e;
    --green-mid: #4a6350;
    --text: #1a1a18;
    --text-mid: #5a5a54;
    --text-light: #9a9a90;
    --border: #e2ddd6;
    --border-dark: #ccc8be;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Geist', sans-serif;
    font-weight: 300;
    overflow-x: hidden;
  }

  /* NAV */
  nav {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 100;
    padding: 0 48px;
    height: 64px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: rgba(250,249,247,0.92);
    backdrop-filter: blur(16px);
    border-bottom: 1px solid var(--border);
  }

  .logo {
    font-family: 'Fraunces', serif;
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text);
    letter-spacing: -0.01em;
  }
  .logo span { color: var(--accent); }

  .nav-links {
    display: flex;
    gap: 32px;
    list-style: none;
  }
  .nav-links a {
    color: var(--text-mid);
    text-decoration: none;
    font-size: 0.88rem;
    font-weight: 400;
    transition: color 0.2s;
  }
  .nav-links a:hover { color: var(--text); }

  .nav-right {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .btn-ghost {
    background: none;
    border: 1px solid var(--border-dark);
    color: var(--text-mid);
    padding: 8px 18px;
    font-family: 'Geist', sans-serif;
    font-size: 0.85rem;
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.2s;
  }
  .btn-ghost:hover { border-color: var(--text-mid); color: var(--text); }

  .btn-fill {
    background: var(--accent);
    border: none;
    color: #fff;
    padding: 8px 20px;
    font-family: 'Geist', sans-serif;
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.2s;
  }
  .btn-fill:hover { background: #b05516; }

  /* HERO */
  .hero {
    padding: 140px 48px 100px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 60px;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
  }

  .hero-eyebrow {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: var(--accent-light);
    color: var(--accent);
    padding: 5px 12px;
    border-radius: 20px;
    font-size: 0.78rem;
    font-weight: 500;
    margin-bottom: 24px;
    opacity: 0;
    animation: fadeUp 0.7s ease 0.1s forwards;
  }

  .hero-title {
    font-family: 'Fraunces', serif;
    font-size: clamp(2.8rem, 4.5vw, 4rem);
    font-weight: 400;
    line-height: 1.1;
    letter-spacing: -0.02em;
    margin-bottom: 20px;
    opacity: 0;
    animation: fadeUp 0.7s ease 0.2s forwards;
  }

  .hero-title em {
    font-style: italic;
    color: var(--accent);
  }

  .hero-desc {
    font-size: 1rem;
    color: var(--text-mid);
    line-height: 1.7;
    margin-bottom: 36px;
    max-width: 440px;
    opacity: 0;
    animation: fadeUp 0.7s ease 0.3s forwards;
  }

  .hero-actions {
    display: flex;
    gap: 12px;
    align-items: center;
    opacity: 0;
    animation: fadeUp 0.7s ease 0.4s forwards;
  }

  .btn-primary {
    background: var(--accent);
    color: #fff;
    border: none;
    padding: 13px 28px;
    font-family: 'Geist', sans-serif;
    font-size: 0.92rem;
    font-weight: 500;
    cursor: pointer;
    border-radius: 8px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .btn-primary:hover {
    background: #b05516;
    transform: translateY(-1px);
    box-shadow: 0 4px 16px rgba(196,96,26,0.3);
  }

  .btn-secondary {
    background: none;
    color: var(--text-mid);
    border: none;
    padding: 13px 20px;
    font-family: 'Geist', sans-serif;
    font-size: 0.92rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
    transition: color 0.2s;
  }
  .btn-secondary:hover { color: var(--text); }

  .hero-social-proof {
    margin-top: 40px;
    display: flex;
    align-items: center;
    gap: 12px;
    opacity: 0;
    animation: fadeUp 0.7s ease 0.5s forwards;
  }

  .avatars {
    display: flex;
  }
  .avatar {
    width: 30px; height: 30px;
    border-radius: 50%;
    border: 2px solid var(--bg);
    margin-left: -8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem;
    font-weight: 500;
    color: white;
  }
  .avatar:first-child { margin-left: 0; }

  .social-text {
    font-size: 0.82rem;
    color: var(--text-light);
  }
  .social-text strong { color: var(--text-mid); font-weight: 500; }

  /* HERO CARD */
  .hero-visual {
    opacity: 0;
    animation: fadeUp 0.7s ease 0.3s forwards;
  }

  .dashboard-card {
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 8px 40px rgba(0,0,0,0.07), 0 2px 8px rgba(0,0,0,0.04);
  }

  .card-header {
    padding: 16px 20px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: var(--bg);
  }

  .card-header-left {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .card-tag {
    background: var(--accent-light);
    color: var(--accent);
    padding: 3px 10px;
    border-radius: 20px;
    font-size: 0.72rem;
    font-weight: 500;
  }

  .card-league {
    font-size: 0.82rem;
    color: var(--text-mid);
    font-weight: 400;
  }

  .card-live {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 0.75rem;
    color: #16a34a;
    font-weight: 500;
  }

  .live-dot {
    width: 7px; height: 7px;
    background: #16a34a;
    border-radius: 50%;
    animation: blink 1.4s ease infinite;
  }

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }

  .card-body { padding: 20px; }

  .player-row {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 10px 0;
    border-bottom: 1px solid var(--bg2);
  }
  .player-row:last-child { border-bottom: none; }

  .player-avatar {
    width: 36px; height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.8rem;
    font-weight: 600;
    color: white;
    flex-shrink: 0;
  }

  .player-info { flex: 1; }
  .player-name { font-size: 0.88rem; font-weight: 500; color: var(--text); }
  .player-pos { font-size: 0.75rem; color: var(--text-light); margin-top: 1px; }

  .player-stats {
    display: flex;
    gap: 16px;
    align-items: center;
  }

  .stat-pill {
    text-align: right;
  }
  .stat-val { font-size: 0.9rem; font-weight: 500; color: var(--text); }
  .stat-label { font-size: 0.68rem; color: var(--text-light); }

  .xg-bar-wrap {
    width: 80px;
  }
  .xg-bar-track {
    height: 4px;
    background: var(--bg2);
    border-radius: 2px;
    overflow: hidden;
  }
  .xg-bar-fill {
    height: 100%;
    border-radius: 2px;
    background: var(--accent);
    transition: width 1s ease;
  }
  .xg-val {
    font-size: 0.68rem;
    color: var(--text-light);
    margin-top: 4px;
  }

  /* TICKER */
  .ticker {
    background: var(--bg3);
    border-top: 1px solid var(--border);
    border-bottom: 1px solid var(--border);
    padding: 12px 0;
    overflow: hidden;
  }

  .ticker-track {
    display: flex;
    gap: 48px;
    animation: ticker 28s linear infinite;
    white-space: nowrap;
  }

  .ticker-item {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    font-size: 0.82rem;
    color: var(--text-mid);
    flex-shrink: 0;
  }

  .ticker-teams { color: var(--text); font-weight: 500; }
  .ticker-score { color: var(--accent); font-weight: 600; }
  .ticker-xg { color: var(--text-light); font-size: 0.75rem; }
  .ticker-dot { color: var(--border-dark); }

  @keyframes ticker {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }

  /* LOGOS */
  .logos {
    padding: 48px;
    text-align: center;
    border-bottom: 1px solid var(--border);
  }

  .logos-label {
    font-size: 0.78rem;
    color: var(--text-light);
    margin-bottom: 24px;
    text-transform: uppercase;
    letter-spacing: 0.08em;
  }

  .logos-row {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 40px;
    flex-wrap: wrap;
  }

  .league-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
    opacity: 0.45;
    transition: opacity 0.2s;
    cursor: default;
  }
  .league-item:hover { opacity: 0.9; }

  .league-flag { font-size: 1.6rem; }
  .league-nm { font-size: 0.72rem; color: var(--text-light); font-weight: 400; }

  /* FEATURES */
  .features {
    padding: 100px 48px;
    max-width: 1200px;
    margin: 0 auto;
  }

  .features-header {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 48px;
    align-items: end;
    margin-bottom: 64px;
  }

  .features-title {
    font-family: 'Fraunces', serif;
    font-size: clamp(2rem, 3.5vw, 2.8rem);
    font-weight: 400;
    line-height: 1.15;
    letter-spacing: -0.02em;
  }

  .features-title em {
    font-style: italic;
    color: var(--accent);
  }

  .features-desc {
    font-size: 0.95rem;
    color: var(--text-mid);
    line-height: 1.7;
  }

  .features-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 20px;
  }

  .feat-card {
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 32px 28px;
    transition: box-shadow 0.25s, transform 0.25s;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.5s ease, transform 0.5s ease, box-shadow 0.25s, border-color 0.25s;
  }

  .feat-card.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .feat-card:hover {
    box-shadow: 0 8px 32px rgba(0,0,0,0.08);
    border-color: var(--accent-mid);
    transform: translateY(-3px);
  }

  .feat-icon {
    width: 44px; height: 44px;
    background: var(--accent-light);
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    margin-bottom: 20px;
  }

  .feat-title {
    font-size: 1rem;
    font-weight: 500;
    margin-bottom: 10px;
    color: var(--text);
  }

  .feat-desc {
    font-size: 0.86rem;
    color: var(--text-mid);
    line-height: 1.65;
  }

  /* DASHBOARD SECTION */
  .dash-section {
    background: var(--green-dark);
    padding: 100px 48px;
    position: relative;
    overflow: hidden;
  }

  .dash-section::before {
    content: '';
    position: absolute;
    top: -200px; right: -200px;
    width: 500px; height: 500px;
    background: radial-gradient(circle, rgba(196,96,26,0.15) 0%, transparent 70%);
    pointer-events: none;
  }

  .dash-inner {
    max-width: 1200px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr 1.4fr;
    gap: 72px;
    align-items: center;
  }

  .dash-label {
    font-size: 0.75rem;
    color: var(--accent-mid);
    text-transform: uppercase;
    letter-spacing: 0.1em;
    margin-bottom: 16px;
  }

  .dash-title {
    font-family: 'Fraunces', serif;
    font-size: clamp(2rem, 3vw, 2.6rem);
    font-weight: 400;
    line-height: 1.15;
    letter-spacing: -0.02em;
    color: #f5f1eb;
    margin-bottom: 20px;
  }

  .dash-title em { font-style: italic; color: var(--accent-mid); }

  .dash-desc {
    font-size: 0.95rem;
    color: rgba(245,241,235,0.55);
    line-height: 1.7;
    margin-bottom: 32px;
  }

  .dash-features {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .dash-feat {
    display: flex;
    align-items: flex-start;
    gap: 12px;
  }

  .dash-feat-dot {
    width: 6px; height: 6px;
    background: var(--accent);
    border-radius: 50%;
    margin-top: 7px;
    flex-shrink: 0;
  }

  .dash-feat-text {
    font-size: 0.88rem;
    color: rgba(245,241,235,0.6);
    line-height: 1.5;
  }

  .dash-feat-text strong {
    color: #f5f1eb;
    font-weight: 500;
  }

  /* Mock dashboard */
  .mock-dash {
    background: #1a2a1e;
    border: 1px solid rgba(255,255,255,0.08);
    border-radius: 14px;
    overflow: hidden;
    box-shadow: 0 24px 60px rgba(0,0,0,0.4);
  }

  .mock-topbar {
    background: rgba(255,255,255,0.04);
    border-bottom: 1px solid rgba(255,255,255,0.06);
    padding: 12px 18px;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .mock-dot { width: 9px; height: 9px; border-radius: 50%; }

  .mock-url {
    margin-left: 8px;
    font-size: 0.7rem;
    color: rgba(255,255,255,0.2);
    background: rgba(255,255,255,0.04);
    padding: 3px 10px;
    border-radius: 4px;
  }

  .mock-body {
    padding: 18px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
  }

  .mock-card {
    background: rgba(255,255,255,0.04);
    border: 1px solid rgba(255,255,255,0.06);
    border-radius: 8px;
    padding: 16px;
  }

  .mock-card-full { grid-column: 1 / 3; }

  .mock-card-label {
    font-size: 0.65rem;
    color: rgba(255,255,255,0.3);
    text-transform: uppercase;
    letter-spacing: 0.08em;
    margin-bottom: 8px;
  }

  .mock-card-val {
    font-family: 'Fraunces', serif;
    font-size: 2rem;
    font-weight: 400;
    color: #f5f1eb;
    line-height: 1;
  }

  .mock-card-sub {
    font-size: 0.7rem;
    color: #c4601a;
    margin-top: 4px;
  }

  .mock-bars {
    display: flex;
    align-items: flex-end;
    gap: 6px;
    height: 80px;
    margin-top: 8px;
  }

  .mock-bar {
    flex: 1;
    border-radius: 3px 3px 0 0;
    min-height: 10%;
  }

  .mock-player-list { display: flex; flex-direction: column; gap: 8px; margin-top: 8px; }

  .mock-player {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .mock-p-dot {
    width: 26px; height: 26px;
    border-radius: 50%;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.65rem;
    font-weight: 600;
    color: white;
  }

  .mock-p-info { flex: 1; }
  .mock-p-name { font-size: 0.75rem; color: rgba(255,255,255,0.7); }
  .mock-p-stat { font-size: 0.65rem; color: rgba(255,255,255,0.3); }

  .mock-p-xg { font-size: 0.78rem; color: #c4601a; font-weight: 500; }

  /* CTA */
  .cta {
    padding: 100px 48px;
    max-width: 680px;
    margin: 0 auto;
    text-align: center;
  }

  .cta-eyebrow {
    display: inline-block;
    background: var(--accent-light);
    color: var(--accent);
    padding: 5px 14px;
    border-radius: 20px;
    font-size: 0.78rem;
    font-weight: 500;
    margin-bottom: 20px;
  }

  .cta-title {
    font-family: 'Fraunces', serif;
    font-size: clamp(2.2rem, 4vw, 3rem);
    font-weight: 400;
    line-height: 1.15;
    letter-spacing: -0.02em;
    margin-bottom: 16px;
  }

  .cta-title em { font-style: italic; color: var(--accent); }

  .cta-desc {
    font-size: 0.95rem;
    color: var(--text-mid);
    line-height: 1.7;
    margin-bottom: 36px;
  }

  .cta-form {
    display: flex;
    gap: 0;
    max-width: 400px;
    margin: 0 auto 16px;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 16px rgba(0,0,0,0.08);
    border: 1px solid var(--border);
  }

  .cta-input {
    flex: 1;
    background: var(--white);
    border: none;
    padding: 13px 18px;
    color: var(--text);
    font-family: 'Geist', sans-serif;
    font-size: 0.9rem;
    outline: none;
  }
  .cta-input::placeholder { color: var(--text-light); }

  .cta-btn {
    background: var(--accent);
    color: #fff;
    border: none;
    padding: 13px 22px;
    font-family: 'Geist', sans-serif;
    font-size: 0.88rem;
    font-weight: 500;
    cursor: pointer;
    white-space: nowrap;
    transition: background 0.2s;
  }
  .cta-btn:hover { background: #b05516; }

  .cta-note {
    font-size: 0.78rem;
    color: var(--text-light);
  }

  /* FOOTER */
  footer {
    background: var(--bg3);
    border-top: 1px solid var(--border);
    padding: 40px 48px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .footer-logo {
    font-family: 'Fraunces', serif;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text);
  }
  .footer-logo span { color: var(--accent); }

  .footer-links {
    display: flex;
    gap: 24px;
  }
  .footer-links a {
    font-size: 0.82rem;
    color: var(--text-light);
    text-decoration: none;
    transition: color 0.2s;
  }
  .footer-links a:hover { color: var(--text); }

  .footer-copy {
    font-size: 0.78rem;
    color: var(--text-light);
  }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @media (max-width: 900px) {
    nav { padding: 0 24px; }
    .nav-links { display: none; }
    .hero { grid-template-columns: 1fr; padding: 100px 24px 60px; gap: 40px; }
    .features { padding: 70px 24px; }
    .features-header { grid-template-columns: 1fr; }
    .features-grid { grid-template-columns: 1fr 1fr; }
    .dash-section { padding: 70px 24px; }
    .dash-inner { grid-template-columns: 1fr; gap: 40px; }
    .cta { padding: 70px 24px; }
    footer { padding: 32px 24px; flex-direction: column; gap: 20px; text-align: center; }
    .logos { padding: 40px 24px; }
  }

  @media (max-width: 600px) {
    .features-grid { grid-template-columns: 1fr; }
    .mock-body { grid-template-columns: 1fr; }
    .mock-card-full { grid-column: 1; }
  }

</style>
<style>/* LIGA */

  :root {
    --bg: #faf9f7;
    --bg2: #f3f1ed;
    --bg3: #ede9e3;
    --white: #ffffff;
    --accent: #c4601a;
    --accent-light: #f5ede6;
    --accent-mid: #e8a07a;
    --green-dark: #2a3d2e;
    --green-mid: #4a6350;
    --text: #1a1a18;
    --text-mid: #5a5a54;
    --text-light: #9a9a90;
    --border: #e2ddd6;
    --border-dark: #ccc8be;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Geist', sans-serif;
    font-weight: 300;
  }

  /* NAV */
  nav {
    position: fixed;
    top: 0; left: 0; right: 0;
    z-index: 100;
    padding: 0 48px;
    height: 64px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: rgba(250,249,247,0.95);
    backdrop-filter: blur(16px);
    border-bottom: 1px solid var(--border);
  }

  .logo {
    font-family: 'Fraunces', serif;
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text);
    text-decoration: none;
  }
  .logo span { color: var(--accent); }

  .nav-links {
    display: flex;
    gap: 32px;
    list-style: none;
  }
  .nav-links a {
    color: var(--text-mid);
    text-decoration: none;
    font-size: 0.88rem;
    font-weight: 400;
    transition: color 0.2s;
    padding-bottom: 4px;
  }
  .nav-links a:hover { color: var(--text); }
  .nav-links a.active {
    color: var(--accent);
    border-bottom: 2px solid var(--accent);
  }

  .nav-right {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .btn-fill {
    background: var(--accent);
    border: none;
    color: #fff;
    padding: 8px 20px;
    font-family: 'Geist', sans-serif;
    font-size: 0.85rem;
    font-weight: 500;
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.2s;
  }
  .btn-fill:hover { background: #b05516; }

  /* LAYOUT */
  .page {
    padding-top: 64px;
    min-height: 100vh;
  }

  /* LEAGUE HEADER */
  .league-header {
    background: var(--green-dark);
    padding: 40px 48px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .league-header-left {
    display: flex;
    align-items: center;
    gap: 20px;
  }

  .league-flag-big {
    font-size: 3rem;
    line-height: 1;
  }

  .league-info h1 {
    font-family: 'Fraunces', serif;
    font-size: 1.8rem;
    font-weight: 400;
    color: #f5f1eb;
    letter-spacing: -0.02em;
  }

  .league-info p {
    font-size: 0.85rem;
    color: rgba(245,241,235,0.5);
    margin-top: 4px;
  }

  .league-selectors {
    display: flex;
    gap: 10px;
  }

  .league-btn {
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.12);
    color: rgba(245,241,235,0.7);
    padding: 8px 16px;
    font-family: 'Geist', sans-serif;
    font-size: 0.82rem;
    cursor: pointer;
    border-radius: 6px;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .league-btn:hover, .league-btn.active {
    background: rgba(196,96,26,0.3);
    border-color: var(--accent);
    color: #f5f1eb;
  }

  /* MAIN CONTENT */
  .content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 40px 48px;
    display: grid;
    grid-template-columns: 1fr 340px;
    gap: 28px;
  }

  .content-left { display: flex; flex-direction: column; gap: 28px; }
  .content-right { display: flex; flex-direction: column; gap: 28px; }

  /* CARDS */
  .card {
    background: var(--white);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
  }

  .card-head {
    padding: 16px 20px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
    background: var(--bg);
  }

  .card-head h2 {
    font-size: 0.92rem;
    font-weight: 500;
    color: var(--text);
  }

  .card-head-right {
    font-size: 0.78rem;
    color: var(--accent);
    cursor: pointer;
    font-weight: 400;
  }

  /* STANDINGS TABLE */
  .standings-table {
    width: 100%;
    border-collapse: collapse;
  }

  .standings-table th {
    padding: 10px 16px;
    text-align: left;
    font-size: 0.68rem;
    font-weight: 500;
    color: var(--text-light);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    background: var(--bg2);
    border-bottom: 1px solid var(--border);
  }

  .standings-table th.center { text-align: center; }

  .standings-table td {
    padding: 11px 16px;
    font-size: 0.87rem;
    border-bottom: 1px solid var(--bg2);
    color: var(--text);
  }

  .standings-table td.center { text-align: center; color: var(--text-mid); }

  .standings-table tr:last-child td { border-bottom: none; }

  .standings-table tr:hover td { background: var(--bg); }

  .pos-num {
    font-size: 0.78rem;
    color: var(--text-light);
    font-weight: 400;
    width: 28px;
  }

  .pos-indicator {
    width: 3px;
    height: 20px;
    border-radius: 2px;
    display: inline-block;
    margin-right: 8px;
    vertical-align: middle;
  }

  .team-cell {
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .team-badge {
    width: 26px; height: 26px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.65rem;
    font-weight: 700;
    color: white;
    flex-shrink: 0;
  }

  .team-name { font-weight: 400; }
  .team-name.bold { font-weight: 500; }

  .pts { font-weight: 600 !important; color: var(--text) !important; }

  .form-dots {
    display: flex;
    gap: 3px;
    align-items: center;
  }

  .form-dot {
    width: 8px; height: 8px;
    border-radius: 50%;
  }

  /* RESULTS */
  .results-list { padding: 8px 0; }

  .result-item {
    padding: 14px 20px;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    gap: 12px;
    border-bottom: 1px solid var(--bg2);
    transition: background 0.15s;
  }
  .result-item:last-child { border-bottom: none; }
  .result-item:hover { background: var(--bg); }

  .result-team {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.88rem;
    font-weight: 400;
  }

  .result-team.away { justify-content: flex-end; flex-direction: row-reverse; }

  .result-badge {
    width: 22px; height: 22px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.55rem;
    font-weight: 700;
    color: white;
    flex-shrink: 0;
  }

  .result-score {
    text-align: center;
    background: var(--bg2);
    border-radius: 6px;
    padding: 4px 12px;
    min-width: 64px;
  }

  .score-main {
    font-family: 'Fraunces', serif;
    font-size: 1.1rem;
    font-weight: 600;
    color: var(--text);
    letter-spacing: 0.05em;
  }

  .score-xg {
    font-size: 0.62rem;
    color: var(--text-light);
    margin-top: 1px;
  }

  .result-winner { font-weight: 500; }

  /* UPCOMING */
  .upcoming-list { padding: 8px 0; }

  .upcoming-item {
    padding: 14px 20px;
    display: grid;
    grid-template-columns: 1fr auto 1fr;
    align-items: center;
    gap: 12px;
    border-bottom: 1px solid var(--bg2);
    transition: background 0.15s;
  }
  .upcoming-item:last-child { border-bottom: none; }
  .upcoming-item:hover { background: var(--bg); }

  .upcoming-date {
    text-align: center;
  }

  .upcoming-day {
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--accent);
  }

  .upcoming-time {
    font-size: 0.7rem;
    color: var(--text-light);
    margin-top: 2px;
  }

  /* SCORERS */
  .scorers-list { padding: 8px 0; }

  .scorer-item {
    padding: 12px 20px;
    display: flex;
    align-items: center;
    gap: 12px;
    border-bottom: 1px solid var(--bg2);
    transition: background 0.15s;
  }
  .scorer-item:last-child { border-bottom: none; }
  .scorer-item:hover { background: var(--bg); }

  .scorer-rank {
    font-size: 0.8rem;
    color: var(--text-light);
    width: 20px;
    text-align: center;
    flex-shrink: 0;
  }

  .scorer-rank.top { color: var(--accent); font-weight: 600; }

  .scorer-avatar {
    width: 34px; height: 34px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.7rem;
    font-weight: 600;
    color: white;
    flex-shrink: 0;
  }

  .scorer-info { flex: 1; }
  .scorer-name { font-size: 0.88rem; font-weight: 500; color: var(--text); }
  .scorer-team { font-size: 0.73rem; color: var(--text-light); margin-top: 2px; }

  .scorer-stats {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 2px;
  }

  .scorer-goals {
    font-family: 'Fraunces', serif;
    font-size: 1.3rem;
    font-weight: 600;
    color: var(--text);
    line-height: 1;
  }

  .scorer-label {
    font-size: 0.65rem;
    color: var(--text-light);
  }

  /* MINI STATS */
  .mini-stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1px;
    background: var(--border);
  }

  .mini-stat {
    background: var(--white);
    padding: 16px 20px;
  }

  .mini-stat-label {
    font-size: 0.7rem;
    color: var(--text-light);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    margin-bottom: 6px;
  }

  .mini-stat-val {
    font-family: 'Fraunces', serif;
    font-size: 1.6rem;
    font-weight: 400;
    color: var(--text);
    line-height: 1;
  }

  .mini-stat-sub {
    font-size: 0.72rem;
    color: var(--accent);
    margin-top: 4px;
  }

  /* JORNADA TABS */
  .jornada-tabs {
    display: flex;
    gap: 0;
    overflow-x: auto;
    scrollbar-width: none;
    padding: 0 20px;
    border-bottom: 1px solid var(--border);
  }

  .jornada-tab {
    padding: 10px 16px;
    font-size: 0.8rem;
    color: var(--text-light);
    cursor: pointer;
    white-space: nowrap;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
    flex-shrink: 0;
  }

  .jornada-tab:hover { color: var(--text); }
  .jornada-tab.active {
    color: var(--accent);
    border-bottom-color: var(--accent);
    font-weight: 500;
  }

  @media (max-width: 960px) {
    nav { padding: 0 24px; }
    .nav-links { display: none; }
    .league-header { padding: 28px 24px; flex-direction: column; gap: 16px; align-items: flex-start; }
    .content { grid-template-columns: 1fr; padding: 24px; }
  }

</style>
<style>/* JUGADORES */

:root{--bg:#faf9f7;--bg2:#f3f1ed;--bg3:#ede9e3;--white:#fff;--accent:#c4601a;--accent-light:#f5ede6;--accent-mid:#e8a07a;--green-dark:#2a3d2e;--green-mid:#4a6350;--text:#1a1a18;--text-mid:#5a5a54;--text-light:#9a9a90;--border:#e2ddd6;--border-dark:#ccc8be}
*{margin:0;padding:0;box-sizing:border-box}html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:'Geist',sans-serif;font-weight:300;overflow-x:hidden}
nav{position:fixed;top:0;left:0;right:0;z-index:1000;padding:0 48px;height:64px;display:flex;align-items:center;justify-content:space-between;background:rgba(250,249,247,.96);backdrop-filter:blur(16px);border-bottom:1px solid var(--border)}
.logo{font-family:'Fraunces',serif;font-size:1.25rem;font-weight:600;color:var(--text);cursor:pointer;letter-spacing:-.01em}
.logo span{color:var(--accent)}

.page{padding-top:64px}
.page-header{background:var(--green-dark);padding:40px 48px;position:relative;overflow:hidden}
.page-header::before{content:'';position:absolute;top:-80px;right:-80px;width:360px;height:360px;background:radial-gradient(circle,rgba(196,96,26,.1) 0%,transparent 70%);pointer-events:none}
.ph-title{font-family:'Fraunces',serif;font-size:1.8rem;font-weight:400;color:#f5f1eb;letter-spacing:-.02em;margin-bottom:6px}
.ph-sub{font-size:.85rem;color:rgba(245,241,235,.4)}

/* SEARCH BAR */
.search-section{padding:28px 48px 0;max-width:1100px;margin:0 auto}
.search-wrap{position:relative;margin-bottom:20px}
.search-input{width:100%;background:var(--white);border:1px solid var(--border);border-radius:10px;padding:14px 20px 14px 48px;font-family:'Geist',sans-serif;font-size:.95rem;color:var(--text);outline:none;transition:border-color .2s;box-shadow:0 2px 8px rgba(0,0,0,.04)}
.search-input:focus{border-color:var(--accent);box-shadow:0 2px 16px rgba(196,96,26,.1)}
.search-icon{position:absolute;left:16px;top:50%;transform:translateY(-50%);font-size:1.1rem;pointer-events:none}
.search-clear{position:absolute;right:14px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;font-size:1rem;color:var(--text-light);display:none;padding:4px}

/* FILTERS */
.filters{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:24px}
.filter-btn{background:var(--white);border:1px solid var(--border);color:var(--text-mid);padding:6px 14px;border-radius:20px;font-family:'Geist',sans-serif;font-size:.8rem;cursor:pointer;transition:all .15s;white-space:nowrap}
.filter-btn:hover{border-color:var(--border-dark);color:var(--text)}
.filter-btn.active{background:var(--accent);border-color:var(--accent);color:#fff}

/* DROPDOWN */
.search-dropdown{position:absolute;top:calc(100% + 6px);left:0;right:0;background:var(--white);border:1px solid var(--border);border-radius:10px;box-shadow:0 8px 32px rgba(0,0,0,.1);z-index:100;overflow:hidden;display:none;max-height:360px;overflow-y:auto}
.dropdown-item{display:flex;align-items:center;gap:12px;padding:12px 16px;cursor:pointer;transition:background .1s;border-bottom:1px solid var(--bg2)}
.dropdown-item:last-child{border-bottom:none}
.dropdown-item:hover{background:var(--bg)}
.di-avatar{width:38px;height:38px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.78rem;font-weight:600;color:#fff;flex-shrink:0}
.di-name{font-size:.9rem;font-weight:500;color:var(--text)}
.di-meta{font-size:.75rem;color:var(--text-light);margin-top:1px}
.di-league{font-size:.7rem;color:var(--accent);background:var(--accent-light);padding:2px 7px;border-radius:10px;margin-left:auto;flex-shrink:0}
.dropdown-empty{padding:20px;text-align:center;color:var(--text-light);font-size:.88rem}

/* PLAYER GRID */
.players-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px;padding:0 48px 48px;max-width:1100px;margin:0 auto}

.player-card{background:var(--white);border:1px solid var(--border);border-radius:12px;overflow:hidden;cursor:pointer;transition:all .2s}
.player-card:hover{box-shadow:0 8px 28px rgba(0,0,0,.08);transform:translateY(-2px);border-color:var(--accent-mid)}
.pc-header{padding:20px 20px 16px;display:flex;align-items:center;gap:14px}
.pc-avatar{width:52px;height:52px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1rem;font-weight:600;color:#fff;flex-shrink:0}
.pc-name{font-size:1rem;font-weight:500;color:var(--text);margin-bottom:3px}
.pc-meta{font-size:.75rem;color:var(--text-light)}
.pc-league{display:inline-block;font-size:.68rem;color:var(--accent);background:var(--accent-light);padding:2px 8px;border-radius:10px;margin-top:4px}
.pc-stats{display:grid;grid-template-columns:repeat(4,1fr);border-top:1px solid var(--bg2)}
.pc-stat{padding:12px 8px;text-align:center;border-right:1px solid var(--bg2)}
.pc-stat:last-child{border-right:none}
.pc-stat-val{font-size:1rem;font-weight:500;color:var(--text)}
.pc-stat-label{font-size:.62rem;color:var(--text-light);margin-top:2px;text-transform:uppercase;letter-spacing:.04em}
.pc-form{display:flex;gap:4px;padding:10px 20px;border-top:1px solid var(--bg2);align-items:center}
.pc-form-label{font-size:.72rem;color:var(--text-light);margin-right:4px}
.form-dot{width:16px;height:16px;border-radius:50%;font-size:.6rem;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:600}

/* PERFIL DE JUGADOR (modal/vista) */
.player-profile{display:none;padding:0 48px 48px;max-width:1100px;margin:0 auto}
.player-profile.active{display:block}
.players-grid.hidden{display:none}
.search-section.condensed{padding-bottom:20px}

.profile-back{display:flex;align-items:center;gap:8px;font-size:.85rem;color:var(--text-mid);cursor:pointer;margin-bottom:20px;padding:8px 0;width:fit-content}
.profile-back:hover{color:var(--accent)}

.profile-hero{background:var(--green-dark);border-radius:14px;padding:28px;display:flex;align-items:center;gap:24px;margin-bottom:20px;position:relative;overflow:hidden}
.profile-hero::before{content:'';position:absolute;top:-60px;right:-60px;width:260px;height:260px;background:radial-gradient(circle,rgba(196,96,26,.15) 0%,transparent 70%);pointer-events:none}
.ph-avatar{width:72px;height:72px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.4rem;font-weight:600;color:#fff;flex-shrink:0;border:3px solid rgba(255,255,255,.2)}
.ph-info h2{font-family:'Fraunces',serif;font-size:1.5rem;font-weight:400;color:#f5f1eb;margin-bottom:4px}
.ph-info p{font-size:.85rem;color:rgba(245,241,235,.5)}
.ph-badges{display:flex;gap:8px;margin-top:8px;flex-wrap:wrap}
.ph-badge{font-size:.72rem;padding:3px 10px;border-radius:10px;background:rgba(255,255,255,.1);color:rgba(245,241,235,.7)}
.ph-badge.pos{background:rgba(196,96,26,.3);color:var(--accent-mid)}
.ph-quickstats{display:flex;gap:24px;margin-left:auto}
.ph-qs{text-align:center}
.ph-qs-val{font-family:'Fraunces',serif;font-size:1.8rem;font-weight:400;color:#f5f1eb}
.ph-qs-label{font-size:.65rem;color:rgba(245,241,235,.4);text-transform:uppercase;letter-spacing:.06em}

.profile-grid{display:grid;grid-template-columns:1fr 340px;gap:20px}
.profile-left{display:flex;flex-direction:column;gap:20px}
.profile-right{display:flex;flex-direction:column;gap:20px}

.card{background:var(--white);border:1px solid var(--border);border-radius:12px;overflow:hidden}
.card-head{padding:16px 20px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;background:var(--bg)}
.card-head h3{font-size:.92rem;font-weight:500;color:var(--text)}
.card-body{padding:20px}

/* STATS GRID */
.stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
.stat-box{background:var(--bg);border:1px solid var(--border);border-radius:8px;padding:14px 12px;text-align:center}
.stat-box-val{font-size:1.4rem;font-weight:500;color:var(--text);font-family:'Fraunces',serif}
.stat-box-label{font-size:.7rem;color:var(--text-light);margin-top:4px;text-transform:uppercase;letter-spacing:.04em}
.stat-bar-wrap{margin-top:6px}
.stat-bar-track{height:3px;background:var(--bg2);border-radius:2px;overflow:hidden}
.stat-bar-fill{height:100%;border-radius:2px;background:var(--accent)}

/* RADAR */
.radar-wrap{display:flex;justify-content:center;padding:10px 0}
svg.radar{overflow:visible}

/* MATCH LOG */
.match-log-table{width:100%;border-collapse:collapse}
.match-log-table th{padding:8px 12px;text-align:left;font-size:.68rem;font-weight:500;color:var(--text-light);text-transform:uppercase;letter-spacing:.06em;background:var(--bg2);border-bottom:1px solid var(--border)}
.match-log-table td{padding:10px 12px;font-size:.84rem;border-bottom:1px solid var(--bg2);color:var(--text)}
.match-log-table tr:last-child td{border-bottom:none}
.match-log-table tr:hover td{background:var(--bg)}
.res-badge{display:inline-block;width:20px;height:20px;border-radius:4px;font-size:.65rem;font-weight:600;color:#fff;text-align:center;line-height:20px}
.res-w{background:#16a34a}.res-d{background:#d97706}.res-l{background:#dc2626}

/* EVOLUTION CHART */
.evo-chart{width:100%;height:120px;overflow:visible}

/* PERSONAL DATA */
.personal-row{display:flex;justify-content:space-between;align-items:center;padding:10px 16px;border-bottom:1px solid var(--bg2);font-size:.85rem}
.personal-row:last-child{border-bottom:none}
.pr-label{color:var(--text-light)}
.pr-val{color:var(--text);font-weight:400}

/* NO RESULTS */
.no-results{text-align:center;padding:48px 24px;color:var(--text-light)}
.no-results .nr-icon{font-size:2.5rem;margin-bottom:12px}
.no-results .nr-text{font-size:.95rem}

@media(max-width:768px){
  .page-header,.search-section,.players-grid,.player-profile{padding-left:16px;padding-right:16px}
  .players-grid{grid-template-columns:1fr}
  .profile-grid{grid-template-columns:1fr}
  .ph-quickstats{display:none}
  .stats-grid{grid-template-columns:repeat(2,1fr)}
}

</style>
<style>/* EQUIPO */

  :root {
    --bg: #faf9f7;
    --bg2: #f3f1ed;
    --bg3: #ede9e3;
    --white: #ffffff;
    --accent: #c4601a;
    --accent-light: #f5ede6;
    --accent-mid: #e8a07a;
    --green-dark: #2a3d2e;
    --text: #1a1a18;
    --text-mid: #5a5a54;
    --text-light: #9a9a90;
    --border: #e2ddd6;
    --border-dark: #ccc8be;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }
  body { background: var(--bg); color: var(--text); font-family: 'Geist', sans-serif; font-weight: 300; }

  /* NAV */
  nav {
    position: fixed; top: 0; left: 0; right: 0; z-index: 100;
    padding: 0 48px; height: 64px;
    display: flex; align-items: center; justify-content: space-between;
    background: rgba(250,249,247,0.95); backdrop-filter: blur(16px);
    border-bottom: 1px solid var(--border);
  }
  .logo { font-family: 'Fraunces', serif; font-size: 1.25rem; font-weight: 600; color: var(--text); text-decoration: none; }
  .logo span { color: var(--accent); }
  .nav-links { display: flex; gap: 32px; list-style: none; }
  .nav-links a { color: var(--text-mid); text-decoration: none; font-size: 0.88rem; transition: color 0.2s; }
  .nav-links a:hover { color: var(--text); }
  .nav-links a.active { color: var(--accent); border-bottom: 2px solid var(--accent); padding-bottom: 4px; }
  .btn-fill { background: var(--accent); border: none; color: #fff; padding: 8px 20px; font-family: 'Geist', sans-serif; font-size: 0.85rem; font-weight: 500; cursor: pointer; border-radius: 6px; }
  .btn-fill:hover { background: #b05516; }

  .page { padding-top: 64px; }

  /* TEAM HEADER */
  .team-header {
    background: var(--green-dark);
    padding: 48px 48px 0;
    position: relative;
    overflow: hidden;
  }

  .team-header::before {
    content: '';
    position: absolute;
    top: -80px; right: -80px;
    width: 360px; height: 360px;
    background: radial-gradient(circle, rgba(196,96,26,0.12) 0%, transparent 70%);
    pointer-events: none;
  }

  .breadcrumb {
    display: flex; align-items: center; gap: 8px;
    font-size: 0.78rem; color: rgba(245,241,235,0.4);
    margin-bottom: 28px;
  }
  .breadcrumb a { color: rgba(245,241,235,0.4); text-decoration: none; transition: color 0.2s; }
  .breadcrumb a:hover { color: rgba(245,241,235,0.8); }
  .breadcrumb span { color: rgba(245,241,235,0.7); }

  .team-hero {
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: 28px;
    align-items: flex-end;
  }

  .team-crest {
    width: 80px; height: 80px;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.12);
    border-radius: 16px;
    display: flex; align-items: center; justify-content: center;
    font-size: 2.4rem;
    margin-bottom: 32px;
  }

  .team-main { padding-bottom: 32px; }

  .team-league-tag {
    display: inline-flex; align-items: center; gap: 6px;
    background: rgba(196,96,26,0.2); border: 1px solid rgba(196,96,26,0.35);
    color: var(--accent-mid); padding: 4px 12px; border-radius: 20px;
    font-size: 0.75rem; font-weight: 500; margin-bottom: 12px;
  }

  .team-name {
    font-family: 'Fraunces', serif;
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: 400; color: #f5f1eb;
    letter-spacing: -0.02em; line-height: 1.05; margin-bottom: 12px;
  }

  .team-meta {
    display: flex; align-items: center; gap: 20px; flex-wrap: wrap;
  }
  .team-meta-item {
    display: flex; align-items: center; gap: 6px;
    font-size: 0.82rem; color: rgba(245,241,235,0.5);
  }
  .team-meta-item strong { color: rgba(245,241,235,0.85); font-weight: 400; }

  .team-quick-stats {
    display: flex; gap: 0; padding-bottom: 32px;
  }
  .quick-stat { padding: 0 24px; border-left: 1px solid rgba(255,255,255,0.08); text-align: center; }
  .quick-stat:first-child { padding-left: 0; border-left: none; }
  .qs-val { font-family: 'Fraunces', serif; font-size: 2rem; font-weight: 400; color: #f5f1eb; line-height: 1; }
  .qs-label { font-size: 0.68rem; color: rgba(245,241,235,0.4); text-transform: uppercase; letter-spacing: 0.08em; margin-top: 4px; }
  .qs-sub { font-size: 0.7rem; color: var(--accent-mid); margin-top: 2px; }

  .tab-bar {
    background: var(--green-dark);
    border-top: 1px solid rgba(255,255,255,0.06);
    padding: 0 48px; display: flex; gap: 0;
  }
  .tab { padding: 14px 20px; font-size: 0.85rem; color: rgba(245,241,235,0.4); cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.2s; white-space: nowrap; }
  .tab:hover { color: rgba(245,241,235,0.8); }
  .tab.active { color: var(--accent-mid); border-bottom-color: var(--accent); }

  /* CONTENT */
  .content {
    max-width: 1200px; margin: 0 auto;
    padding: 36px 48px;
    display: grid; grid-template-columns: 1fr 340px; gap: 28px;
  }
  .content-left { display: flex; flex-direction: column; gap: 28px; }
  .content-right { display: flex; flex-direction: column; gap: 28px; }

  /* CARDS */
  .card { background: var(--white); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; }
  .card-head { padding: 16px 20px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; background: var(--bg); }
  .card-head h2 { font-size: 0.92rem; font-weight: 500; color: var(--text); }
  .card-head-right { font-size: 0.78rem; color: var(--accent); cursor: pointer; }

  /* COLLECTIVE STATS */
  .coll-stats {
    display: grid; grid-template-columns: repeat(3, 1fr);
    gap: 1px; background: var(--border);
  }
  .coll-stat {
    background: var(--white); padding: 20px;
    transition: background 0.15s;
  }
  .coll-stat:hover { background: var(--bg); }
  .coll-label { font-size: 0.7rem; color: var(--text-light); text-transform: uppercase; letter-spacing: 0.06em; margin-bottom: 8px; }
  .coll-val { font-family: 'Fraunces', serif; font-size: 1.7rem; font-weight: 400; color: var(--text); line-height: 1; }
  .coll-sub { font-size: 0.72rem; color: var(--text-light); margin-top: 4px; }
  .coll-bar { height: 3px; background: var(--bg2); border-radius: 2px; margin-top: 10px; overflow: hidden; }
  .coll-bar-fill { height: 100%; border-radius: 2px; background: var(--accent); }
  .coll-bar-fill.green { background: #16a34a; }
  .coll-bar-fill.blue { background: #3b82f6; }

  /* PERFORMANCE CHART */
  .perf-wrap { padding: 20px; }
  .perf-legend { display: flex; gap: 16px; margin-bottom: 14px; flex-wrap: wrap; }
  .legend-item { display: flex; align-items: center; gap: 6px; font-size: 0.75rem; color: var(--text-mid); }
  .legend-dot { width: 8px; height: 8px; border-radius: 50%; }
  .perf-chart { position: relative; height: 160px; }
  .perf-svg { width: 100%; height: 100%; overflow: visible; }
  .x-labels { display: flex; justify-content: space-between; margin-top: 6px; }
  .x-label { font-size: 0.62rem; color: var(--text-light); text-align: center; flex: 1; }

  /* SQUAD */
  .squad-filters {
    display: flex; gap: 8px; padding: 14px 20px;
    border-bottom: 1px solid var(--border); overflow-x: auto;
  }
  .filter-btn {
    background: var(--bg2); border: 1px solid var(--border);
    color: var(--text-mid); padding: 5px 14px; border-radius: 20px;
    font-size: 0.78rem; cursor: pointer; white-space: nowrap;
    transition: all 0.2s; font-family: 'Geist', sans-serif;
  }
  .filter-btn.active, .filter-btn:hover {
    background: var(--accent-light); border-color: var(--accent-mid);
    color: var(--accent);
  }

  .squad-grid {
    display: grid; grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
    gap: 1px; background: var(--border);
  }

  .player-card {
    background: var(--white); padding: 16px;
    display: flex; flex-direction: column; align-items: center;
    gap: 8px; text-align: center;
    transition: background 0.15s; cursor: pointer;
  }
  .player-card:hover { background: var(--bg); }

  .player-card-avatar {
    width: 44px; height: 44px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 0.85rem; font-weight: 600; color: white;
  }
  .player-card-num { font-size: 0.65rem; color: var(--text-light); }
  .player-card-name { font-size: 0.85rem; font-weight: 500; color: var(--text); line-height: 1.2; }
  .player-card-pos {
    font-size: 0.7rem; color: var(--accent);
    background: var(--accent-light); padding: 2px 8px; border-radius: 10px;
  }
  .player-card-stat { font-size: 0.75rem; color: var(--text-light); }

  /* RESULTS */
  .results-list { padding: 4px 0; }
  .result-item {
    padding: 12px 20px;
    display: grid; grid-template-columns: 1fr auto 1fr;
    align-items: center; gap: 12px;
    border-bottom: 1px solid var(--bg2);
    transition: background 0.15s;
  }
  .result-item:last-child { border-bottom: none; }
  .result-item:hover { background: var(--bg); }

  .result-team { display: flex; align-items: center; gap: 8px; font-size: 0.87rem; }
  .result-team.away { justify-content: flex-end; flex-direction: row-reverse; }
  .result-badge { width: 22px; height: 22px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.55rem; font-weight: 700; color: white; flex-shrink: 0; }

  .result-score { text-align: center; }
  .score-main { font-family: 'Fraunces', serif; font-size: 1.05rem; font-weight: 600; color: var(--text); letter-spacing: 0.05em; }
  .score-meta { font-size: 0.62rem; color: var(--text-light); margin-top: 2px; }
  .result-pill { display: inline-block; padding: 1px 6px; border-radius: 4px; font-size: 0.68rem; font-weight: 500; margin-top: 3px; }
  .pill-w { background: #dcfce7; color: #16a34a; }
  .pill-d { background: #fef9c3; color: #ca8a04; }
  .pill-l { background: #fee2e2; color: #dc2626; }

  /* UPCOMING */
  .upcoming-list { padding: 4px 0; }
  .upcoming-item {
    padding: 12px 20px;
    display: grid; grid-template-columns: 1fr auto 1fr;
    align-items: center; gap: 12px;
    border-bottom: 1px solid var(--bg2); transition: background 0.15s;
  }
  .upcoming-item:last-child { border-bottom: none; }
  .upcoming-item:hover { background: var(--bg); }
  .upcoming-center { text-align: center; }
  .upcoming-day { font-size: 0.75rem; font-weight: 500; color: var(--accent); }
  .upcoming-time { font-size: 0.68rem; color: var(--text-light); margin-top: 2px; }
  .upcoming-comp { font-size: 0.62rem; color: var(--text-light); margin-top: 2px; }

  @media (max-width: 960px) {
    nav { padding: 0 24px; }
    .nav-links { display: none; }
    .team-header { padding: 28px 24px 0; }
    .team-hero { grid-template-columns: auto 1fr; }
    .team-quick-stats { display: none; }
    .tab-bar { padding: 0 24px; overflow-x: auto; }
    .content { grid-template-columns: 1fr; padding: 24px; }
    .coll-stats { grid-template-columns: repeat(2, 1fr); }
    .squad-grid { grid-template-columns: repeat(3, 1fr); }
  }

</style>
<style>/* COMPARAR */

  :root {
    --bg: #faf9f7;
    --bg2: #f3f1ed;
    --bg3: #ede9e3;
    --white: #ffffff;
    --accent: #c4601a;
    --accent-light: #f5ede6;
    --accent-mid: #e8a07a;
    --green-dark: #2a3d2e;
    --green-mid: #4a6350;
    --text: #1a1a18;
    --text-mid: #5a5a54;
    --text-light: #9a9a90;
    --border: #e2ddd6;
    --border-dark: #ccc8be;
    --p1: #c4601a;
    --p2: #4a6350;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }
  html { scroll-behavior: smooth; }
  body { background: var(--bg); color: var(--text); font-family: 'Geist', sans-serif; font-weight: 300; }

  nav {
    position: fixed; top: 0; left: 0; right: 0; z-index: 100;
    padding: 0 48px; height: 64px;
    display: flex; align-items: center; justify-content: space-between;
    background: rgba(250,249,247,0.95); backdrop-filter: blur(16px);
    border-bottom: 1px solid var(--border);
  }
  .logo { font-family: 'Fraunces', serif; font-size: 1.25rem; font-weight: 600; color: var(--text); text-decoration: none; }
  .logo span { color: var(--accent); }
  .nav-links { display: flex; gap: 32px; list-style: none; }
  .nav-links a { color: var(--text-mid); text-decoration: none; font-size: 0.88rem; transition: color 0.2s; }
  .nav-links a:hover { color: var(--text); }
  .nav-links a.active { color: var(--accent); border-bottom: 2px solid var(--accent); padding-bottom: 4px; }
  .btn-fill { background: var(--accent); border: none; color: #fff; padding: 8px 20px; font-family: 'Geist', sans-serif; font-size: 0.85rem; font-weight: 500; cursor: pointer; border-radius: 6px; }

  .page { padding-top: 64px; }

  /* COMPARE HEADER */
  .compare-header {
    background: var(--green-dark);
    padding: 40px 48px;
    position: relative; overflow: hidden;
  }
  .compare-header::before {
    content: '';
    position: absolute; top: -100px; right: -100px;
    width: 400px; height: 400px;
    background: radial-gradient(circle, rgba(196,96,26,0.1) 0%, transparent 70%);
    pointer-events: none;
  }

  .compare-header-top {
    display: flex; align-items: center; justify-content: space-between;
    margin-bottom: 28px;
  }

  .compare-title {
    font-family: 'Fraunces', serif;
    font-size: 1.6rem; font-weight: 400;
    color: #f5f1eb; letter-spacing: -0.02em;
  }
  .compare-title em { font-style: italic; color: var(--accent-mid); }

  .mode-toggle {
    display: flex; gap: 0;
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 8px; overflow: hidden;
  }
  .mode-btn {
    padding: 8px 20px; font-size: 0.82rem;
    color: rgba(245,241,235,0.5); cursor: pointer;
    border: none; background: none;
    font-family: 'Geist', sans-serif;
    transition: all 0.2s;
  }
  .mode-btn.active { background: rgba(196,96,26,0.3); color: #f5f1eb; }

  /* SELECTOR PANEL */
  .selector-panel {
    display: grid; grid-template-columns: 1fr auto 1fr; gap: 16px;
    align-items: center;
  }

  .selector-card {
    background: rgba(255,255,255,0.06);
    border: 1px solid rgba(255,255,255,0.1);
    border-radius: 12px; padding: 20px;
    display: flex; align-items: center; gap: 16px;
    cursor: pointer; transition: all 0.2s;
  }
  .selector-card:hover { background: rgba(255,255,255,0.1); }
  .selector-card.p1 { border-color: rgba(196,96,26,0.4); }
  .selector-card.p2 { border-color: rgba(74,99,80,0.5); }

  .selector-avatar {
    width: 52px; height: 52px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 1rem; font-weight: 600; color: white; flex-shrink: 0;
  }

  .selector-info { flex: 1; }
  .selector-name { font-family: 'Fraunces', serif; font-size: 1.1rem; font-weight: 400; color: #f5f1eb; }
  .selector-sub { font-size: 0.78rem; color: rgba(245,241,235,0.45); margin-top: 3px; }
  .selector-change { font-size: 0.72rem; color: var(--accent-mid); margin-top: 6px; cursor: pointer; }

  .vs-badge {
    width: 40px; height: 40px; border-radius: 50%;
    background: rgba(255,255,255,0.08);
    border: 1px solid rgba(255,255,255,0.12);
    display: flex; align-items: center; justify-content: center;
    font-size: 0.75rem; font-weight: 500; color: rgba(245,241,235,0.5);
    flex-shrink: 0;
  }

  /* CONTENT */
  .content {
    max-width: 1200px; margin: 0 auto;
    padding: 36px 48px;
    display: flex; flex-direction: column; gap: 28px;
  }

  .card { background: var(--white); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; }
  .card-head { padding: 16px 20px; border-bottom: 1px solid var(--border); display: flex; align-items: center; justify-content: space-between; background: var(--bg); }
  .card-head h2 { font-size: 0.92rem; font-weight: 500; color: var(--text); }

  /* WINNER SUMMARY */
  .winner-grid {
    display: grid; grid-template-columns: repeat(4, 1fr);
    gap: 1px; background: var(--border);
  }

  .winner-cell {
    background: var(--white); padding: 18px 20px;
    display: flex; flex-direction: column; gap: 6px;
    transition: background 0.15s;
  }
  .winner-cell:hover { background: var(--bg); }

  .winner-category {
    font-size: 0.7rem; color: var(--text-light);
    text-transform: uppercase; letter-spacing: 0.06em;
  }

  .winner-name {
    font-size: 0.9rem; font-weight: 500;
  }

  .winner-val {
    font-family: 'Fraunces', serif; font-size: 1.4rem;
    font-weight: 400; line-height: 1;
  }

  .winner-margin {
    font-size: 0.72rem; color: var(--text-light);
  }

  .winner-badge {
    display: inline-flex; align-items: center; gap: 4px;
    padding: 2px 8px; border-radius: 10px;
    font-size: 0.68rem; font-weight: 500;
    width: fit-content;
  }

  /* STATS TABLE */
  .stats-table { width: 100%; border-collapse: collapse; }

  .stats-table tr { border-bottom: 1px solid var(--bg2); }
  .stats-table tr:last-child { border-bottom: none; }
  .stats-table tr:hover td { background: var(--bg); }

  .stats-table td {
    padding: 13px 20px; font-size: 0.88rem;
  }

  .col-p1 { text-align: left; font-weight: 500; }
  .col-label { text-align: center; color: var(--text-light); font-size: 0.78rem; width: 200px; }
  .col-p2 { text-align: right; font-weight: 500; }

  .stat-bars { display: flex; gap: 4px; align-items: center; justify-content: center; }
  .bar-p1 { height: 4px; border-radius: 2px 0 0 2px; background: var(--p1); }
  .bar-p2 { height: 4px; border-radius: 0 2px 2px 0; background: var(--p2); }

  .win-highlight { color: var(--accent); }
  .win-highlight-2 { color: var(--green-mid); }

  /* RADAR */
  .radar-section {
    display: grid; grid-template-columns: 1fr 1fr;
    gap: 0; background: var(--border);
  }

  .radar-half {
    background: var(--white); padding: 28px;
    display: flex; flex-direction: column; align-items: center; gap: 0;
  }

  .radar-half-title {
    font-size: 0.82rem; font-weight: 500; color: var(--text);
    margin-bottom: 4px;
  }
  .radar-half-sub { font-size: 0.72rem; color: var(--text-light); margin-bottom: 16px; }

  .radar-svg { width: 220px; height: 220px; }

  /* EVOLUTION */
  .evo-wrap { padding: 24px; }
  .evo-legend { display: flex; gap: 20px; margin-bottom: 16px; }
  .legend-item { display: flex; align-items: center; gap: 6px; font-size: 0.78rem; color: var(--text-mid); }
  .legend-dot { width: 10px; height: 10px; border-radius: 50%; }
  .evo-chart { height: 180px; position: relative; }
  .evo-svg { width: 100%; height: 100%; overflow: visible; }
  .x-labels { display: flex; justify-content: space-between; margin-top: 6px; }
  .x-label { font-size: 0.62rem; color: var(--text-light); text-align: center; flex: 1; }

  @media (max-width: 960px) {
    nav { padding: 0 24px; }
    .nav-links { display: none; }
    .compare-header { padding: 28px 24px; }
    .selector-panel { grid-template-columns: 1fr auto 1fr; gap: 8px; }
    .content { padding: 24px; }
    .winner-grid { grid-template-columns: repeat(2, 1fr); }
    .radar-section { grid-template-columns: 1fr; }
  }

</style>
<style>/* MIEQUIPO */

:root {
  --bg:#faf9f7; --bg2:#f3f1ed; --bg3:#ede9e3;
  --white:#fff; --accent:#c4601a; --accent-light:#f5ede6; --accent-mid:#e8a07a;
  --green-dark:#2a3d2e; --green-mid:#4a6350; --green-light:#e8f0e9;
  --text:#1a1a18; --text-mid:#5a5a54; --text-light:#9a9a90;
  --border:#e2ddd6; --border-dark:#ccc8be;
  --success:#16a34a; --success-light:#dcfce7;
  --warn:#d97706; --warn-light:#fef9c3;
  --danger:#dc2626; --danger-light:#fee2e2;
  --blue:#3b82f6; --blue-light:#eff6ff;
  --purple:#8b5cf6; --purple-light:#f5f3ff;
}
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{background:var(--bg);color:var(--text);font-family:'Geist',sans-serif;font-weight:300;overflow-x:hidden}

/* ── LAYOUT ── */
.app{display:grid;grid-template-columns:260px 1fr;min-height:100vh;padding-top:64px}
.sidebar{background:var(--green-dark);padding:24px 0;position:sticky;top:64px;height:calc(100vh - 64px);overflow-y:auto;display:flex;flex-direction:column;gap:0}
.main{padding:28px 32px;min-width:0}

/* ── SIDEBAR ── */
.sb-team{padding:20px 20px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
.sb-team-name{font-family:'Fraunces',serif;font-size:1.1rem;font-weight:400;color:#f5f1eb;margin-bottom:2px}
.sb-team-sub{font-size:.72rem;color:rgba(245,241,235,.4)}
.sb-section{padding:12px 12px 4px;font-size:.62rem;font-weight:600;color:rgba(245,241,235,.3);text-transform:uppercase;letter-spacing:.1em}
.sb-item{display:flex;align-items:center;gap:10px;padding:10px 16px;cursor:pointer;transition:background .15s;border-radius:0;color:rgba(245,241,235,.6);font-size:.85rem;border-left:3px solid transparent}
.sb-item:hover{background:rgba(255,255,255,.05);color:rgba(245,241,235,.9)}
.sb-item.active{background:rgba(255,255,255,.08);color:#f5f1eb;border-left-color:var(--accent)}
.sb-item .sb-icon{width:18px;text-align:center;font-size:.9rem}
.sb-stats{padding:16px;margin-top:auto;border-top:1px solid rgba(255,255,255,.08)}
.sb-stat-row{display:flex;justify-content:space-between;align-items:center;padding:4px 0;font-size:.78rem}
.sb-stat-label{color:rgba(245,241,235,.4)}
.sb-stat-val{color:#f5f1eb;font-weight:500}

/* ── TABS (main content areas) ── */
.tab-content{display:none}
.tab-content.active{display:block}

/* ── HEADER ── */
.page-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:24px}
.page-head h1{font-family:'Fraunces',serif;font-size:1.5rem;font-weight:400;color:var(--text)}
.page-head p{font-size:.82rem;color:var(--text-light);margin-top:2px}

/* ── CARDS ── */
.card{background:var(--white);border:1px solid var(--border);border-radius:12px;overflow:hidden;margin-bottom:20px}
.card-head{padding:14px 20px;border-bottom:1px solid var(--border);background:var(--bg);display:flex;align-items:center;justify-content:space-between}
.card-head h2{font-size:.9rem;font-weight:500;color:var(--text)}
.card-head h3{font-size:.85rem;font-weight:500;color:var(--text)}
.card-body{padding:20px}

/* ── BUTTONS ── */
.btn{display:inline-flex;align-items:center;gap:7px;padding:9px 18px;border-radius:7px;font-family:'Geist',sans-serif;font-size:.84rem;font-weight:500;cursor:pointer;border:none;transition:all .15s}
.btn-primary{background:var(--accent);color:#fff}.btn-primary:hover{background:#b05516}
.btn-secondary{background:var(--bg2);color:var(--text-mid);border:1px solid var(--border)}.btn-secondary:hover{border-color:var(--border-dark)}
.btn-ghost{background:none;color:var(--text-mid);border:1px solid var(--border)}.btn-ghost:hover{border-color:var(--border-dark);color:var(--text)}
.btn-danger{background:var(--danger-light);color:var(--danger);border:1px solid #fecaca}.btn-danger:hover{background:#fecaca}
.btn-success{background:var(--success-light);color:var(--success);border:1px solid #bbf7d0}
.btn-sm{padding:6px 12px;font-size:.78rem}
.btn-xs{padding:4px 9px;font-size:.72rem;border-radius:5px}
.btn-group{display:flex;gap:8px;flex-wrap:wrap}

/* ── FORMS ── */
.form-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}
.form-grid-3{grid-template-columns:repeat(3,1fr)}
.field{display:flex;flex-direction:column;gap:5px}
.field label{font-size:.75rem;font-weight:500;color:var(--text-mid);text-transform:uppercase;letter-spacing:.05em}
.field input,.field select,.field textarea{background:var(--bg);border:1px solid var(--border);border-radius:7px;padding:9px 12px;font-family:'Geist',sans-serif;font-size:.88rem;color:var(--text);outline:none;transition:border-color .2s}
.field input:focus,.field select:focus{border-color:var(--accent);background:var(--white)}
.field .hint{font-size:.7rem;color:var(--text-light)}

/* ── PLAYERS TABLE ── */
.players-table{width:100%;border-collapse:collapse}
.players-table th{padding:9px 14px;text-align:left;font-size:.68rem;font-weight:500;color:var(--text-light);text-transform:uppercase;letter-spacing:.07em;background:var(--bg2);border-bottom:1px solid var(--border)}
.players-table td{padding:11px 14px;font-size:.85rem;border-bottom:1px solid var(--bg2);color:var(--text)}
.players-table tr:last-child td{border-bottom:none}
.players-table tr:hover td{background:var(--bg)}
.pos-badge{display:inline-block;padding:2px 8px;border-radius:10px;font-size:.68rem;font-weight:600;letter-spacing:.03em}
.pos-POR{background:#fef9c3;color:#ca8a04}
.pos-DC,.pos-DCD,.pos-DCI{background:var(--blue-light);color:var(--blue)}
.pos-LD,.pos-LI{background:var(--purple-light);color:var(--purple)}
.pos-MC,.pos-MCD,.pos-MCO,.pos-MAI,.pos-MAD{background:var(--green-light);color:var(--green-mid)}
.pos-SD,.pos-ED,.pos-EI,.pos-DC_DEL{background:var(--danger-light);color:var(--danger)}

/* ── MÉTRICA FORM ── */
.metrica-section{margin-bottom:20px}
.metrica-section-title{font-size:.78rem;font-weight:600;color:var(--text-mid);text-transform:uppercase;letter-spacing:.08em;margin-bottom:10px;padding-bottom:6px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:8px}
.metrica-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:10px}
.metrica-item{background:var(--bg);border:1px solid var(--border);border-radius:8px;padding:12px}
.metrica-label{font-size:.78rem;font-weight:500;color:var(--text);margin-bottom:2px}
.metrica-desc{font-size:.68rem;color:var(--text-light);margin-bottom:8px}
.metrica-input-simple input{width:100%;background:var(--white);border:1px solid var(--border);border-radius:6px;padding:7px 10px;font-family:'Geist',sans-serif;font-size:.9rem;color:var(--text);outline:none;text-align:center}
.metrica-input-simple input:focus{border-color:var(--accent)}
.fraccion-inputs{display:grid;grid-template-columns:1fr 1fr;gap:6px}
.fraccion-part{display:flex;flex-direction:column;gap:3px;align-items:center}
.fraccion-part label{font-size:.6rem;color:var(--text-light);text-transform:uppercase;letter-spacing:.04em}
.fraccion-part input{width:100%;background:var(--white);border:1px solid var(--border);border-radius:6px;padding:6px 8px;font-family:'Geist',sans-serif;font-size:.88rem;color:var(--text);outline:none;text-align:center}
.fraccion-part input:focus{border-color:var(--accent)}
.fraccion-sep{display:flex;align-items:flex-end;padding-bottom:8px;color:var(--text-light);font-size:.8rem;font-weight:500}

/* ── PLAYER SELECTOR ── */
.player-selector{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px}
.player-chip{display:flex;align-items:center;gap:6px;padding:7px 14px;border-radius:20px;cursor:pointer;border:1px solid var(--border);background:var(--white);font-size:.82rem;color:var(--text-mid);transition:all .15s}
.player-chip:hover{border-color:var(--border-dark)}
.player-chip.active{background:var(--accent);border-color:var(--accent);color:#fff}
.player-chip .chip-pos{font-size:.65rem;opacity:.7}

/* ── REPORTE ── */
.reporte-header{background:var(--green-dark);border-radius:12px;padding:28px;margin-bottom:20px;position:relative;overflow:hidden}
.reporte-header::before{content:'';position:absolute;top:-80px;right:-80px;width:300px;height:300px;background:radial-gradient(circle,rgba(196,96,26,.12) 0%,transparent 70%);pointer-events:none}
.reporte-title{font-family:'Fraunces',serif;font-size:1.6rem;font-weight:400;color:#f5f1eb;margin-bottom:4px}
.reporte-sub{font-size:.8rem;color:rgba(245,241,235,.4)}
.reporte-grid4{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-top:20px}
.rg-stat{text-align:center}
.rg-val{font-family:'Fraunces',serif;font-size:2rem;font-weight:400;color:#f5f1eb}
.rg-label{font-size:.65rem;color:rgba(245,241,235,.4);text-transform:uppercase;letter-spacing:.08em;margin-top:2px}

.scouting-card{background:var(--white);border:1px solid var(--border);border-radius:12px;margin-bottom:16px;overflow:hidden}
.sc-head{padding:14px 20px;background:var(--bg);border-bottom:1px solid var(--border);display:flex;align-items:center;gap:10px}
.sc-head h3{font-size:.9rem;font-weight:500}
.sc-body{padding:20px}

/* INSIGHT BADGES */
.insight{display:flex;align-items:flex-start;gap:10px;padding:10px 14px;border-radius:7px;margin-bottom:8px;font-size:.82rem}
.insight-excelente{background:var(--success-light);color:#15803d;border:1px solid #bbf7d0}
.insight-bueno{background:var(--blue-light);color:#1d4ed8;border:1px solid #bfdbfe}
.insight-alerta{background:var(--warn-light);color:#92400e;border:1px solid #fde68a}
.insight-icon{font-size:1rem;flex-shrink:0}

/* RADAR SVG */
.radar-wrap{display:flex;justify-content:center;padding:8px 0}

/* STAT BARS */
.stat-bar-row{display:flex;align-items:center;gap:12px;margin-bottom:10px}
.sbr-label{font-size:.78rem;color:var(--text-mid);width:160px;flex-shrink:0}
.sbr-bar{flex:1;height:6px;background:var(--bg2);border-radius:3px;overflow:hidden}
.sbr-fill{height:100%;border-radius:3px;transition:width .6s ease}
.sbr-val{font-size:.78rem;color:var(--text-mid);width:50px;text-align:right;flex-shrink:0}

/* MATCH HISTORY */
.match-row{display:flex;align-items:center;gap:12px;padding:10px 16px;border-bottom:1px solid var(--bg2);font-size:.84rem;cursor:pointer;transition:background .1s}
.match-row:hover{background:var(--bg)}
.match-row:last-child{border-bottom:none}
.mr-res{width:24px;height:24px;border-radius:5px;display:flex;align-items:center;justify-content:center;font-size:.65rem;font-weight:700;color:#fff;flex-shrink:0}
.mr-res-W{background:var(--success)}
.mr-res-D{background:var(--warn)}
.mr-res-L{background:var(--danger)}

/* EMPTY STATE */
.empty-state{text-align:center;padding:40px 20px;color:var(--text-light)}
.empty-icon{font-size:2.5rem;margin-bottom:12px}
.empty-text{font-size:.9rem;margin-bottom:6px}
.empty-sub{font-size:.78rem}

/* PARTIDO FORM */
.partido-form{background:var(--bg);border:1px solid var(--border);border-radius:10px;padding:20px;margin-bottom:20px}

/* ACCORDION para jugador scouting */
.player-scouting{border:1px solid var(--border);border-radius:10px;margin-bottom:12px;overflow:hidden}
.ps-header{padding:14px 18px;display:flex;align-items:center;gap:12px;cursor:pointer;background:var(--bg);transition:background .15s}
.ps-header:hover{background:var(--bg2)}
.ps-avatar{width:38px;height:38px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:600;color:#fff;flex-shrink:0}
.ps-name{font-size:.9rem;font-weight:500}
.ps-meta{font-size:.72rem;color:var(--text-light)}
.ps-rating{margin-left:auto;text-align:center}
.ps-rating-val{font-family:'Fraunces',serif;font-size:1.4rem;line-height:1}
.ps-rating-label{font-size:.6rem;color:var(--text-light);text-transform:uppercase;letter-spacing:.05em}
.ps-body{display:none;padding:20px;border-top:1px solid var(--border);background:var(--white)}
.ps-body.open{display:block}

/* FORMA DOTS */
.forma-dots{display:flex;gap:5px;align-items:center}
.forma-dot{width:22px;height:22px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.62rem;font-weight:700;color:#fff}

/* IMPORT */
.import-zone{border:2px dashed var(--border-dark);border-radius:10px;padding:36px;text-align:center;cursor:pointer;transition:all .2s;background:var(--bg)}
.import-zone:hover,.import-zone.drag-over{border-color:var(--accent);background:var(--accent-light)}
.import-icon{font-size:2rem;margin-bottom:10px}
.import-text{font-size:.9rem;color:var(--text-mid);margin-bottom:4px}
.import-sub{font-size:.78rem;color:var(--text-light)}

@media(max-width:900px){
  .app{grid-template-columns:1fr}
  .sidebar{display:none}
  .metrica-grid{grid-template-columns:1fr 1fr}
  .reporte-grid4{grid-template-columns:repeat(2,1fr)}
}
@media(max-width:600px){
  .main{padding:16px}
  .form-grid{grid-template-columns:1fr}
  .metrica-grid{grid-template-columns:1fr}
}

</style>
</head>
<body>
<div class="toast" id="globalToast"></div>
<nav>
  <div class="logo" id="logoBtn">Stat<span>Campo</span></div>
  <ul class="nav-links">
    <li><a id="nav-liga">Ligas</a></li>
    <li><a id="nav-jugadores">Jugadores</a></li>
    <li><a id="nav-equipo">Equipos</a></li>
    <li><a id="nav-comparar">Comparar</a></li>
    <li><a id="nav-miequipo">Mi Equipo</a></li>
  </ul>
  <div class="nav-right">
    <button class="btn-ghost-nav">Iniciar sesión</button>
    <button class="btn-fill-nav" id="navCta">Empezar gratis</button>
  </div>
</nav>
<div class="mobile-nav">
  <div class="mobile-nav-items">
    <button class="mobile-nav-btn" id="mnav-landing"><span class="mn-icon">🏠</span><span class="mn-label">Inicio</span></button>
    <button class="mobile-nav-btn" id="mnav-liga"><span class="mn-icon">🏆</span><span class="mn-label">Ligas</span></button>
    <button class="mobile-nav-btn" id="mnav-jugadores"><span class="mn-icon">👤</span><span class="mn-label">Jugadores</span></button>
    <button class="mobile-nav-btn" id="mnav-equipo"><span class="mn-icon">🏟️</span><span class="mn-label">Equipos</span></button>
    <button class="mobile-nav-btn" id="mnav-comparar"><span class="mn-icon">⚖️</span><span class="mn-label">Comparar</span></button>
    <button class="mobile-nav-btn" id="mnav-miequipo"><span class="mn-icon">⚽</span><span class="mn-label">Mi Equipo</span></button>
  </div>
</div>

<div class="sc-page sc-page-padded" id="page-landing">
<!-- NAV -->


<!-- HERO -->
<section class="hero">
  <div class="hero-left">
    <div class="hero-eyebrow">⚽ Análisis de fútbol con datos reales</div>

    <h1 class="hero-title">
      Entendé por qué<br>
      tu equipo <em>ganó</em><br>
      o perdió el domingo
    </h1>

    <p class="hero-desc">
      StatCampo transforma estadísticas de las principales ligas del mundo en visualizaciones claras. Sin jerga técnica, sin hojas de Excel. Solo el partido, contado con datos.
    </p>

    <div class="hero-actions">
      <button class="btn-primary">Explorar gratis →</button>
      <button class="btn-secondary">▶ Ver cómo funciona</button>
    </div>

    <div class="hero-social-proof">
      <div class="avatars">
        <div class="avatar" style="background:#c4601a">MR</div>
        <div class="avatar" style="background:#4a6350">JL</div>
        <div class="avatar" style="background:#7a5230">AS</div>
        <div class="avatar" style="background:#2a3d2e">PV</div>
      </div>
      <div class="social-text">
        <strong>+240 entrenadores y analistas</strong> ya lo usan
      </div>
    </div>
  </div>

  <div class="hero-visual">
    <div class="dashboard-card">
      <div class="card-header">
        <div class="card-header-left">
          <span class="card-tag">LaLiga</span>
          <span class="card-league">Jornada 28</span>
        </div>
        <div class="card-live">
          <div class="live-dot"></div>
          En vivo
        </div>
      </div>
      <div class="card-body">
        <div style="font-size:0.75rem; color:var(--text-light); margin-bottom:12px; text-transform:uppercase; letter-spacing:0.06em;">Mejores xG esta jornada</div>

        <div class="player-row">
          <div class="player-avatar" style="background:#c4601a">VJ</div>
          <div class="player-info">
            <div class="player-name">Vinícius Jr.</div>
            <div class="player-pos">Extremo · Real Madrid</div>
          </div>
          <div class="player-stats">
            <div class="stat-pill">
              <div class="stat-val">2</div>
              <div class="stat-label">goles</div>
            </div>
            <div class="xg-bar-wrap">
              <div class="xg-bar-track">
                <div class="xg-bar-fill" style="width:88%"></div>
              </div>
              <div class="xg-val">xG 1.82</div>
            </div>
          </div>
        </div>

        <div class="player-row">
          <div class="player-avatar" style="background:#4a6350">RY</div>
          <div class="player-info">
            <div class="player-name">Robert Lewandowski</div>
            <div class="player-pos">Delantero · Barcelona</div>
          </div>
          <div class="player-stats">
            <div class="stat-pill">
              <div class="stat-val">1</div>
              <div class="stat-label">goles</div>
            </div>
            <div class="xg-bar-wrap">
              <div class="xg-bar-track">
                <div class="xg-bar-fill" style="width:65%"></div>
              </div>
              <div class="xg-val">xG 1.34</div>
            </div>
          </div>
        </div>

        <div class="player-row">
          <div class="player-avatar" style="background:#7a5230">AS</div>
          <div class="player-info">
            <div class="player-name">Antoine Griezmann</div>
            <div class="player-pos">Mediapunta · Atlético</div>
          </div>
          <div class="player-stats">
            <div class="stat-pill">
              <div class="stat-val">1</div>
              <div class="stat-label">goles</div>
            </div>
            <div class="xg-bar-wrap">
              <div class="xg-bar-track">
                <div class="xg-bar-fill" style="width:52%"></div>
              </div>
              <div class="xg-val">xG 1.07</div>
            </div>
          </div>
        </div>

        <div style="margin-top:16px; padding-top:14px; border-top:1px solid var(--bg2); display:flex; justify-content:space-between; align-items:center;">
          <div style="font-size:0.78rem; color:var(--text-light)">Datos actualizados · hace 2 min</div>
          <div style="font-size:0.82rem; color:var(--accent); font-weight:500; cursor:pointer;">Ver todos →</div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- TICKER -->
<div class="ticker">
  <div class="ticker-track">
    <div class="ticker-item"><span class="ticker-teams">Real Madrid vs Barcelona</span><span class="ticker-dot">·</span><span class="ticker-score">3 — 2</span><span class="ticker-xg">xG 2.4 / 1.9</span></div>
    <div class="ticker-item"><span class="ticker-teams">Man City vs Arsenal</span><span class="ticker-dot">·</span><span class="ticker-score">1 — 1</span><span class="ticker-xg">xG 1.8 / 2.1</span></div>
    <div class="ticker-item"><span class="ticker-teams">Bayern vs Dortmund</span><span class="ticker-dot">·</span><span class="ticker-score">4 — 0</span><span class="ticker-xg">xG 3.6 / 0.8</span></div>
    <div class="ticker-item"><span class="ticker-teams">PSG vs Lyon</span><span class="ticker-dot">·</span><span class="ticker-score">2 — 1</span><span class="ticker-xg">xG 2.2 / 1.1</span></div>
    <div class="ticker-item"><span class="ticker-teams">Inter vs Juventus</span><span class="ticker-dot">·</span><span class="ticker-score">0 — 0</span><span class="ticker-xg">xG 1.2 / 1.4</span></div>
    <div class="ticker-item"><span class="ticker-teams">Atlético vs Sevilla</span><span class="ticker-dot">·</span><span class="ticker-score">2 — 0</span><span class="ticker-xg">xG 1.9 / 0.7</span></div>
    <div class="ticker-item"><span class="ticker-teams">River vs Boca</span><span class="ticker-dot">·</span><span class="ticker-score">1 — 1</span><span class="ticker-xg">xG 1.6 / 1.5</span></div>
    <!-- Duplicate -->
    <div class="ticker-item"><span class="ticker-teams">Real Madrid vs Barcelona</span><span class="ticker-dot">·</span><span class="ticker-score">3 — 2</span><span class="ticker-xg">xG 2.4 / 1.9</span></div>
    <div class="ticker-item"><span class="ticker-teams">Man City vs Arsenal</span><span class="ticker-dot">·</span><span class="ticker-score">1 — 1</span><span class="ticker-xg">xG 1.8 / 2.1</span></div>
    <div class="ticker-item"><span class="ticker-teams">Bayern vs Dortmund</span><span class="ticker-dot">·</span><span class="ticker-score">4 — 0</span><span class="ticker-xg">xG 3.6 / 0.8</span></div>
    <div class="ticker-item"><span class="ticker-teams">PSG vs Lyon</span><span class="ticker-dot">·</span><span class="ticker-score">2 — 1</span><span class="ticker-xg">xG 2.2 / 1.1</span></div>
    <div class="ticker-item"><span class="ticker-teams">Inter vs Juventus</span><span class="ticker-dot">·</span><span class="ticker-score">0 — 0</span><span class="ticker-xg">xG 1.2 / 1.4</span></div>
    <div class="ticker-item"><span class="ticker-teams">Atlético vs Sevilla</span><span class="ticker-dot">·</span><span class="ticker-score">2 — 0</span><span class="ticker-xg">xG 1.9 / 0.7</span></div>
    <div class="ticker-item"><span class="ticker-teams">River vs Boca</span><span class="ticker-dot">·</span><span class="ticker-score">1 — 1</span><span class="ticker-xg">xG 1.6 / 1.5</span></div>
  </div>
</div>

<!-- LOGOS -->
<div class="logos">
  <div class="logos-label">Cobertura de ligas</div>
  <div class="logos-row">
    <div class="league-item"><div class="league-flag">🇪🇸</div><div class="league-nm">LaLiga</div></div>
    <div class="league-item"><div class="league-flag">🏴󠁧󠁢󠁥󠁮󠁧󠁿</div><div class="league-nm">Premier</div></div>
    <div class="league-item"><div class="league-flag">🇩🇪</div><div class="league-nm">Bundesliga</div></div>
    <div class="league-item"><div class="league-flag">🇮🇹</div><div class="league-nm">Serie A</div></div>
    <div class="league-item"><div class="league-flag">🇫🇷</div><div class="league-nm">Ligue 1</div></div>
    <div class="league-item"><div class="league-flag">🌍</div><div class="league-nm">Champions</div></div>
    <div class="league-item"><div class="league-flag">🇦🇷</div><div class="league-nm">Liga Prof.</div></div>
  </div>
</div>

<!-- FEATURES -->
<section class="features">
  <div class="features-header">
    <h2 class="features-title">Todo lo que necesitás para <em>leer el partido</em> con datos</h2>
    <p class="features-desc">Métricas que antes solo tenían los clubes profesionales, ahora accesibles para cualquiera que quiera entender el juego más allá del resultado.</p>
  </div>

  <div class="features-grid">
    <div class="feat-card">
      <div class="feat-icon">👤</div>
      <div class="feat-title">Perfil de jugador</div>
      <p class="feat-desc">Goles, asistencias, xG, xA, pases clave y duelos. Toda la temporada en un solo lugar, con evolución semana a semana.</p>
    </div>
    <div class="feat-card">
      <div class="feat-icon">🏟️</div>
      <div class="feat-title">Análisis de equipo</div>
      <p class="feat-desc">Posesión, presión, xG a favor y en contra, rendimiento local vs visitante. Entendé el estilo de juego real del equipo.</p>
    </div>
    <div class="feat-card">
      <div class="feat-icon">🎯</div>
      <div class="feat-title">xG y métricas avanzadas</div>
      <p class="feat-desc">Expected Goals y Expected Assists para entender qué equipo realmente dominó, más allá del marcador final.</p>
    </div>
    <div class="feat-card">
      <div class="feat-icon">⚖️</div>
      <div class="feat-title">Comparador</div>
      <p class="feat-desc">Poné dos jugadores o equipos lado a lado. Radar charts interactivos para ver diferencias clave de un vistazo.</p>
    </div>
    <div class="feat-card">
      <div class="feat-icon">🗺️</div>
      <div class="feat-title">Mapas de tiros</div>
      <p class="feat-desc">Visualizá cada remate del partido con su valor xG y zona de campo. Análisis visual del ataque y la defensa.</p>
    </div>
    <div class="feat-card">
      <div class="feat-icon">📅</div>
      <div class="feat-title">Historial de partidos</div>
      <p class="feat-desc">Accedé al detalle estadístico de cualquier partido de la temporada. Filtrá por equipo, fecha o competición.</p>
    </div>
  </div>
</section>

<!-- DASHBOARD DARK SECTION -->
<section class="dash-section">
  <div class="dash-inner">
    <div>
      <div class="dash-label">// el dashboard</div>
      <h2 class="dash-title">Todo el análisis en <em>un solo lugar</em></h2>
      <p class="dash-desc">Diseñado para que puedas entender los datos sin ser analista profesional. Claro, visual y directo.</p>
      <div class="dash-features">
        <div class="dash-feat">
          <div class="dash-feat-dot"></div>
          <div class="dash-feat-text"><strong>Vista de liga</strong> — tabla de posiciones, resultados y próximos partidos</div>
        </div>
        <div class="dash-feat">
          <div class="dash-feat-dot"></div>
          <div class="dash-feat-text"><strong>Perfil de jugador</strong> — métricas individuales y evolución temporal</div>
        </div>
        <div class="dash-feat">
          <div class="dash-feat-dot"></div>
          <div class="dash-feat-text"><strong>Análisis de partido</strong> — estadísticas detalladas de cada match</div>
        </div>
        <div class="dash-feat">
          <div class="dash-feat-dot"></div>
          <div class="dash-feat-text"><strong>Comparador</strong> — jugadores y equipos en radar charts interactivos</div>
        </div>
      </div>
    </div>

    <div class="mock-dash">
      <div class="mock-topbar">
        <div class="mock-dot" style="background:#ff5f57"></div>
        <div class="mock-dot" style="background:#febc2e"></div>
        <div class="mock-dot" style="background:#28c840"></div>
        <span class="mock-url">statcampo.app/laliga/equipos/real-madrid</span>
      </div>
      <div class="mock-body">
        <div class="mock-card">
          <div class="mock-card-label">xG temporada</div>
          <div class="mock-card-val">68.4</div>
          <div class="mock-card-sub">↑ +12.3 vs temporada ant.</div>
        </div>
        <div class="mock-card">
          <div class="mock-card-label">Goles anotados</div>
          <div class="mock-card-val">71</div>
          <div class="mock-card-sub">↑ Sobre xG esperado</div>
        </div>
        <div class="mock-card mock-card-full">
          <div class="mock-card-label">xG por jornada — últimas 8</div>
          <div class="mock-bars" id="mockBars"></div>
        </div>
        <div class="mock-card mock-card-full">
          <div class="mock-card-label">Top goleadores por xG</div>
          <div class="mock-player-list">
            <div class="mock-player">
              <div class="mock-p-dot" style="background:#c4601a">VJ</div>
              <div class="mock-p-info">
                <div class="mock-p-name">Vinícius Jr.</div>
                <div class="mock-p-stat">Extremo · 24 partidos</div>
              </div>
              <div class="mock-p-xg">xG 18.4</div>
            </div>
            <div class="mock-player">
              <div class="mock-p-dot" style="background:#4a6350">MB</div>
              <div class="mock-p-info">
                <div class="mock-p-name">Mbappé</div>
                <div class="mock-p-stat">Delantero · 22 partidos</div>
              </div>
              <div class="mock-p-xg">xG 16.1</div>
            </div>
            <div class="mock-player">
              <div class="mock-p-dot" style="background:#7a5230">BE</div>
              <div class="mock-p-info">
                <div class="mock-p-name">Bellingham</div>
                <div class="mock-p-stat">Mediapunta · 23 partidos</div>
              </div>
              <div class="mock-p-xg">xG 12.8</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- CTA -->
<section class="cta">
  <div class="cta-eyebrow">🎉 Beta gratuita</div>
  <h2 class="cta-title">Empezá a analizar<br>el fútbol <em>hoy mismo</em></h2>
  <p class="cta-desc">Acceso anticipado sin costo. Sé de los primeros en explorar datos reales de las principales ligas del mundo.</p>
  <div class="cta-form">
    <input class="cta-input" type="email" placeholder="tu@email.com">
    <button class="cta-btn">Quiero acceso</button>
  </div>
  <div class="cta-note">Sin tarjeta de crédito · Gratis para siempre en el plan básico</div>
</section>

<!-- FOOTER -->
<footer>
  <div class="footer-logo">Stat<span>Campo</span></div>
  <div class="footer-links">
    <a href="javascript:void(0)">Ligas</a>
    <a href="javascript:void(0)">Jugadores</a>
    <a href="javascript:void(0)">Equipos</a>
    <a href="javascript:void(0)">Privacidad</a>
  </div>
  <div class="footer-copy">© 2025 StatCampo</div>
</footer>
</div>

<div class="sc-page sc-page-padded" id="page-liga">
<div class="page">

  <!-- LEAGUE HEADER -->
  <div class="league-header">
    <div class="league-header-left">
      <div class="league-flag-big" id="ligaBandera">🇪🇸</div>
      <div class="league-info">
        <h1 id="ligaTitulo">LaLiga EA Sports</h1>
        <p id="ligaJornada">Temporada 2024/25 · Jornada 28 de 38</p>
      </div>
    </div>
    <div class="league-selectors">
      <button class="league-btn active">🇪🇸 LaLiga</button>
      <button class="league-btn">🏴󠁧󠁢󠁥󠁮󠁧󠁿 Premier</button>
      <button class="league-btn">🇩🇪 Bundesliga</button>
      <button class="league-btn">🇮🇹 Serie A</button>
      <button class="league-btn">🇦🇷 Liga Prof.</button>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <div class="content">

    <!-- LEFT COLUMN -->
    <div class="content-left">

      <!-- STANDINGS -->
      <div class="card">
        <div class="card-head">
          <h2>Tabla de posiciones</h2>
          <span class="card-head-right">Temporada completa →</span>
        </div>
        <table class="standings-table">
          <thead>
            <tr>
              <th style="width:36px">#</th>
              <th>Equipo</th>
              <th class="center">PJ</th>
              <th class="center">G</th>
              <th class="center">E</th>
              <th class="center">P</th>
              <th class="center">GF</th>
              <th class="center">GC</th>
              <th class="center">DG</th>
              <th class="center">Pts</th>
              <th class="center">Forma</th>
            </tr>
          </thead>
          <tbody id="standingsBody"></tbody>
        </table>
      </div>

      <!-- RESULTS -->
      <div class="card">
        <div class="card-head">
          <h2 id="resultadosTitle">Resultados — Jornada 28</h2>
          <span class="card-head-right">Ver todas →</span>
        </div>
        <div class="jornada-tabs">
          <div class="jornada-tab">J-4</div>
          <div class="jornada-tab">J-3</div>
          <div class="jornada-tab">J-2</div>
          <div class="jornada-tab active">Última</div>
        </div>
        <div class="results-list" id="resultsList"></div>
      </div>

    </div>

    <!-- RIGHT COLUMN -->
    <div class="content-right">

      <!-- MINI STATS -->
      <div class="card">
        <div class="card-head">
          <h2 id="ligaStatsTitle">LaLiga en números</h2>
        </div>
        <div class="mini-stats">
          <div class="mini-stat">
            <div class="mini-stat-label">Goles totales</div>
            <div class="mini-stat-val" id="statGoles">742</div>
            <div class="mini-stat-sub">en la temporada</div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-label">Promedio goles</div>
            <div class="mini-stat-val" id="statPromedio">2.6</div>
            <div class="mini-stat-sub">por partido</div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-label">Partidos jugados</div>
            <div class="mini-stat-val" id="statPartidos">280</div>
            <div class="mini-stat-sub">esta temporada</div>
          </div>
          <div class="mini-stat">
            <div class="mini-stat-label">Tarjetas rojas</div>
            <div class="mini-stat-val" id="statRojas">34</div>
            <div class="mini-stat-sub">en la temporada</div>
          </div>
        </div>
      </div>

      <!-- UPCOMING -->
      <div class="card">
        <div class="card-head">
          <h2 id="proximosTitle">Próximos partidos — J29</h2>
          <span class="card-head-right">Calendario →</span>
        </div>
        <div class="upcoming-list" id="upcomingList"></div>
      </div>

      <!-- SCORERS -->
      <div class="card">
        <div class="card-head">
          <h2>Goleadores</h2>
          <span class="card-head-right">Ver todos →</span>
        </div>
        <div class="scorers-list" id="scorersList"></div>
      </div>

    </div>
  </div>
</div>
</div>

<div class="sc-page sc-page-padded" id="page-jugadores">
<div class="page">
  <div class="page-header">
    <div class="ph-title">Jugadores</div>
    <div class="ph-sub">Buscá cualquier jugador de las principales ligas del mundo</div>
  </div>

  <div class="search-section" id="searchSection">
    <div class="search-wrap">
      <span class="search-icon">🔍</span>
      <input type="text" class="search-input" id="searchInput" placeholder="Buscar jugador... ej: Mbappé, Salah, Messi">
      <button class="search-clear" id="searchClear">✕</button>
      <div class="search-dropdown" id="searchDropdown"></div>
    </div>
    <div class="filters">
      <button class="filter-btn active" data-filter="all">Todos</button>
      <button class="filter-btn" data-filter="LaLiga">🇪🇸 LaLiga</button>
      <button class="filter-btn" data-filter="Premier">🏴󠁧󠁢󠁥󠁮󠁧󠁿 Premier</button>
      <button class="filter-btn" data-filter="Bundesliga">🇩🇪 Bundesliga</button>
      <button class="filter-btn" data-filter="Serie A">🇮🇹 Serie A</button>
      <button class="filter-btn" data-filter="Liga Prof.">🇦🇷 Liga Prof.</button>
      <button class="filter-btn" data-filter="Delantero">⚡ Delanteros</button>
      <button class="filter-btn" data-filter="Mediocampista">🎯 Mediocampistas</button>
      <button class="filter-btn" data-filter="Defensa">🛡️ Defensas</button>
    </div>

    <!-- CHAT IA -->
    <div style="background:var(--white);border:1px solid var(--border);border-radius:12px;overflow:hidden;margin-bottom:20px">
      <div style="padding:12px 16px;background:var(--bg);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;cursor:pointer" onclick="SC_jugadores_toggleChatIA()">
        <div style="display:flex;align-items:center;gap:8px">
          <span>🤖</span>
          <span style="font-size:.88rem;font-weight:500">Preguntale a Claude sobre los jugadores</span>
          <span id="chatApiBadge" style="font-size:.68rem;padding:2px 8px;border-radius:10px;background:var(--bg2);color:var(--text-light)">Sin API key</span>
        </div>
        <span id="chatToggleArrow" style="color:var(--text-light);font-size:.8rem">▼</span>
      </div>
      <div id="chatIAWrap" style="display:none">
        <div id="chatApiKeySection" style="padding:14px 16px;border-bottom:1px solid var(--bg2)">
          <div style="display:flex;gap:8px;align-items:center">
            <input type="password" id="chatApiKeyInput" placeholder="API key de Anthropic (sk-ant-...)" style="flex:1;background:var(--bg);border:1px solid var(--border);border-radius:7px;padding:8px 12px;font-family:'Geist',sans-serif;font-size:.84rem;color:var(--text);outline:none">
            <button onclick="SC_jugadores_saveChatApiKey()" style="background:var(--accent);color:#fff;border:none;border-radius:7px;padding:8px 14px;font-family:'Geist',sans-serif;font-size:.84rem;cursor:pointer">Guardar</button>
          </div>
        </div>
        <div id="chatMessages" style="height:260px;overflow-y:auto;padding:14px 16px;display:flex;flex-direction:column;gap:10px">
          <div style="text-align:center;color:var(--text-light);font-size:.82rem;padding:20px 0">
            Preguntá cualquier cosa sobre los jugadores. Ej: "¿Cómo juega Wirtz?", "Comparame a Salah con Mbappé esta temporada"
          </div>
        </div>
        <div style="padding:10px 14px;border-top:1px solid var(--bg2);display:flex;gap:8px">
          <input type="text" id="chatInput" placeholder="Escribí tu pregunta..." style="flex:1;background:var(--bg);border:1px solid var(--border);border-radius:7px;padding:9px 12px;font-family:'Geist',sans-serif;font-size:.84rem;color:var(--text);outline:none" onkeydown="if(event.key==='Enter')SC_jugadores_sendChatMessage()">
          <button onclick="SC_jugadores_sendChatMessage()" id="chatSendBtn" style="background:var(--accent);color:#fff;border:none;border-radius:7px;padding:9px 16px;font-family:'Geist',sans-serif;font-size:.84rem;cursor:pointer;white-space:nowrap">Enviar</button>
        </div>
      </div>
    </div>
  </div>

  <div class="players-grid" id="playersGrid"></div>
  <div class="player-profile" id="playerProfile"></div>
</div>
</div>

<div class="sc-page sc-page-padded" id="page-equipo">
<div class="page">

  <!-- TEAM HEADER -->
  <div class="team-header">
    <div class="breadcrumb">
      <a href="javascript:void(0)">Ligas</a> › <a href="javascript:void(0)">LaLiga</a> › <span>Real Madrid CF</span>
    </div>

    <div class="team-hero">
      <div class="team-crest">⚪</div>

      <div class="team-main">
        <div class="team-league-tag">🇪🇸 LaLiga EA Sports · 2024/25</div>
        <div class="team-name">Real Madrid CF</div>
        <div class="team-meta">
          <div class="team-meta-item">🏟️ <strong>Estadio Santiago Bernabéu</strong></div>
          <div class="team-meta-item">👔 <strong>Carlo Ancelotti</strong></div>
          <div class="team-meta-item">📍 <strong>Madrid, España</strong></div>
          <div class="team-meta-item">📅 <strong>Fundado en 1902</strong></div>
        </div>
      </div>

      <div class="team-quick-stats">
        <div class="quick-stat">
          <div class="qs-val">1°</div>
          <div class="qs-label">Posición</div>
          <div class="qs-sub">LaLiga</div>
        </div>
        <div class="quick-stat">
          <div class="qs-val">62</div>
          <div class="qs-label">Puntos</div>
          <div class="qs-sub">28 jugados</div>
        </div>
        <div class="quick-stat">
          <div class="qs-val">62</div>
          <div class="qs-label">Goles</div>
          <div class="qs-sub">xG: 58.4</div>
        </div>
        <div class="quick-stat">
          <div class="qs-val">68%</div>
          <div class="qs-label">V. local</div>
          <div class="qs-sub">% victorias</div>
        </div>
      </div>
    </div>
  </div>

  <div class="tab-bar">
    <div class="tab active">Resumen</div>
    <div class="tab">Plantilla</div>
    <div class="tab">Estadísticas</div>
    <div class="tab">Partidos</div>
  </div>

  <div class="content">

    <div class="content-left">

      <!-- COLLECTIVE STATS -->
      <div class="card">
        <div class="card-head">
          <h2>Estadísticas colectivas</h2>
          <span class="card-head-right">Temporada 2024/25</span>
        </div>
        <div class="coll-stats">
          <div class="coll-stat">
            <div class="coll-label">Goles anotados</div>
            <div class="coll-val">62</div>
            <div class="coll-sub">xG: 58.4 · Sobre lo esperado</div>
            <div class="coll-bar"><div class="coll-bar-fill green" style="width:82%"></div></div>
          </div>
          <div class="coll-stat">
            <div class="coll-label">Goles encajados</div>
            <div class="coll-val">28</div>
            <div class="coll-sub">xGC: 31.2 · Mejor de lo esperado</div>
            <div class="coll-bar"><div class="coll-bar-fill" style="width:37%"></div></div>
          </div>
          <div class="coll-stat">
            <div class="coll-label">Posesión media</div>
            <div class="coll-val">58%</div>
            <div class="coll-sub">2° en la liga</div>
            <div class="coll-bar"><div class="coll-bar-fill blue" style="width:58%"></div></div>
          </div>
          <div class="coll-stat">
            <div class="coll-label">Remates por partido</div>
            <div class="coll-val">14.2</div>
            <div class="coll-sub">1° en la liga</div>
            <div class="coll-bar"><div class="coll-bar-fill green" style="width:90%"></div></div>
          </div>
          <div class="coll-stat">
            <div class="coll-label">Pases completados</div>
            <div class="coll-val">87%</div>
            <div class="coll-sub">Precisión de pase</div>
            <div class="coll-bar"><div class="coll-bar-fill blue" style="width:87%"></div></div>
          </div>
          <div class="coll-stat">
            <div class="coll-label">Porterías a cero</div>
            <div class="coll-val">10</div>
            <div class="coll-sub">de 28 partidos</div>
            <div class="coll-bar"><div class="coll-bar-fill green" style="width:36%"></div></div>
          </div>
          <div class="coll-stat">
            <div class="coll-label">Victorias</div>
            <div class="coll-val">19</div>
            <div class="coll-sub">5 empates · 4 derrotas</div>
            <div class="coll-bar"><div class="coll-bar-fill green" style="width:68%"></div></div>
          </div>
          <div class="coll-stat">
            <div class="coll-label">Presión defensiva</div>
            <div class="coll-val">PPDA</div>
            <div class="coll-sub">8.4 · Alta presión</div>
            <div class="coll-bar"><div class="coll-bar-fill" style="width:72%"></div></div>
          </div>
          <div class="coll-stat">
            <div class="coll-label">xG por partido</div>
            <div class="coll-val">2.09</div>
            <div class="coll-sub">1° en la liga</div>
            <div class="coll-bar"><div class="coll-bar-fill green" style="width:95%"></div></div>
          </div>
        </div>
      </div>

      <!-- PERFORMANCE CHART -->
      <div class="card">
        <div class="card-head">
          <h2>Rendimiento en la temporada</h2>
          <span class="card-head-right">Puntos acumulados</span>
        </div>
        <div class="perf-wrap">
          <div class="perf-legend">
            <div class="legend-item"><div class="legend-dot" style="background:var(--accent)"></div>Real Madrid</div>
            <div class="legend-item"><div class="legend-dot" style="background:#4a6350"></div>Barcelona</div>
            <div class="legend-item"><div class="legend-dot" style="background:#ccc8be"></div>Atlético</div>
          </div>
          <div class="perf-chart">
            <svg class="perf-svg" id="perfChart" viewBox="0 0 620 160" preserveAspectRatio="none"></svg>
          </div>
          <div class="x-labels" id="xLabels"></div>
        </div>
      </div>

      <!-- SQUAD -->
      <div class="card">
        <div class="card-head">
          <h2>Plantilla</h2>
          <span class="card-head-right">26 jugadores</span>
        </div>
        <div class="squad-filters">
          <button class="filter-btn active" onclick="SC_equipo_filterSquad('all',this)">Todos</button>
          <button class="filter-btn" onclick="SC_equipo_filterSquad('POR',this)">Porteros</button>
          <button class="filter-btn" onclick="SC_equipo_filterSquad('DEF',this)">Defensas</button>
          <button class="filter-btn" onclick="SC_equipo_filterSquad('MED',this)">Mediocampistas</button>
          <button class="filter-btn" onclick="SC_equipo_filterSquad('DEL',this)">Delanteros</button>
        </div>
        <div class="squad-grid" id="squadGrid"></div>
      </div>

    </div>

    <div class="content-right">

      <!-- RECENT RESULTS -->
      <div class="card">
        <div class="card-head">
          <h2>Resultados recientes</h2>
          <span class="card-head-right">Ver todos →</span>
        </div>
        <div class="results-list" id="resultsList"></div>
      </div>

      <!-- UPCOMING -->
      <div class="card">
        <div class="card-head">
          <h2>Próximos partidos</h2>
          <span class="card-head-right">Calendario →</span>
        </div>
        <div class="upcoming-list" id="upcomingList"></div>
      </div>

    </div>
  </div>
</div>
</div>

<div class="sc-page sc-page-padded" id="page-comparar">
<div class="page">

  <!-- HEADER -->
  <div class="compare-header">
    <div class="compare-header-top">
      <div class="compare-title">Comparar <em>en profundidad</em></div>
      <div class="mode-toggle">
        <button class="mode-btn active" id="modeJugadores" onclick="SC_comparar_setMode('jugadores')">⚽ Jugadores</button>
        <button class="mode-btn" id="modeEquipos" onclick="SC_comparar_setMode('equipos')">🏟️ Equipos</button>
      </div>
    </div>

    <div class="selector-panel">
      <div class="selector-card p1">
        <div class="selector-avatar" id="avatar1" style="background:#c4601a">VJ</div>
        <div class="selector-info">
          <div class="selector-name" id="name1">Vinícius Jr.</div>
          <div class="selector-sub" id="sub1">Real Madrid · Extremo izquierdo</div>
          <div class="selector-change" onclick="SC_comparar_cyclePlayer(0)">↔ Cambiar jugador</div>
        </div>
      </div>

      <div class="vs-badge">VS</div>

      <div class="selector-card p2">
        <div class="selector-avatar" id="avatar2" style="background:#4a6350">RL</div>
        <div class="selector-info">
          <div class="selector-name" id="name2">Lewandowski</div>
          <div class="selector-sub" id="sub2">Barcelona · Delantero centro</div>
          <div class="selector-change" onclick="SC_comparar_cyclePlayer(1)">↔ Cambiar jugador</div>
        </div>
      </div>
    </div>
  </div>

  <div class="content">

    <!-- WINNER SUMMARY -->
    <div class="card">
      <div class="card-head">
        <h2>Ganador por categoría</h2>
        <span style="font-size:0.78rem; color:var(--text-light)">Temporada 2024/25 · LaLiga</span>
      </div>
      <div class="winner-grid" id="winnerGrid"></div>
    </div>

    <!-- STATS TABLE -->
    <div class="card">
      <div class="card-head">
        <h2>Estadísticas lado a lado</h2>
      </div>
      <div style="padding: 12px 20px; display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid var(--border);">
        <span style="font-size:0.85rem; font-weight:500; color:var(--p1)" id="tableHeader1">Vinícius Jr.</span>
        <span style="font-size:0.72rem; color:var(--text-light)">Métrica</span>
        <span style="font-size:0.85rem; font-weight:500; color:var(--p2)" id="tableHeader2">Lewandowski</span>
      </div>
      <table class="stats-table" id="statsTable"></table>
    </div>

    <!-- RADAR -->
    <div class="card">
      <div class="card-head"><h2>Radar de métricas</h2></div>
      <div class="radar-section">
        <div class="radar-half">
          <div class="radar-half-title" id="radar1name">Vinícius Jr.</div>
          <div class="radar-half-sub" style="color:var(--p1)">Real Madrid</div>
          <svg class="radar-svg" id="radar1" viewBox="-120 -120 240 240"></svg>
        </div>
        <div class="radar-half" style="border-left:1px solid var(--border)">
          <div class="radar-half-title" id="radar2name">Lewandowski</div>
          <div class="radar-half-sub" style="color:var(--p2)">Barcelona</div>
          <svg class="radar-svg" id="radar2" viewBox="-120 -120 240 240"></svg>
        </div>
      </div>
    </div>

    <!-- EVOLUTION -->
    <div class="card">
      <div class="card-head"><h2>Evolución de goles por jornada</h2></div>
      <div class="evo-wrap">
        <div class="evo-legend">
          <div class="legend-item"><div class="legend-dot" style="background:var(--p1)"></div><span id="evoLeg1">Vinícius Jr.</span></div>
          <div class="legend-item"><div class="legend-dot" style="background:var(--p2)"></div><span id="evoLeg2">Lewandowski</span></div>
        </div>
        <div class="evo-chart">
          <svg class="evo-svg" id="evoChart" viewBox="0 0 640 170" preserveAspectRatio="none"></svg>
        </div>
        <div class="x-labels" id="evoLabels"></div>
      </div>
    </div>

  </div>
</div>
</div>

<div class="sc-page " id="page-miequipo">
<div class="app">
  <!-- SIDEBAR -->
  <aside class="sidebar">
    <div class="sb-team">
      <div class="sb-team-name" id="sbTeamName" contenteditable="true" spellcheck="false" title="Hacé click para editar el nombre" style="cursor:text;outline:none;border-bottom:1px dashed rgba(255,255,255,.15);padding-bottom:2px">Mi Equipo</div>
      <div class="sb-team-sub">Segunda División</div>
    </div>

    <div class="sb-section">Gestión</div>
    <div class="sb-item active" data-tab="plantilla"><span class="sb-icon">👥</span> Plantilla</div>
    <div class="sb-item" data-tab="partidos"><span class="sb-icon">📅</span> Partidos</div>

    <div class="sb-section">Análisis</div>
    <div class="sb-item" data-tab="metricas"><span class="sb-icon">📊</span> Cargar métricas</div>
    <div class="sb-item" data-tab="reporte"><span class="sb-icon">📋</span> Reporte scouting</div>

    <div class="sb-section">Datos</div>
    <div class="sb-item" data-tab="importar"><span class="sb-icon">📁</span> Importar Excel</div>
    <div class="sb-item" onclick="SC_miequipo_cargarDemo()" style="color:rgba(245,241,235,.5)"><span class="sb-icon">🎮</span> Cargar demo</div>
    <div class="sb-item" onclick="SC_miequipo_limpiarTodo()" style="color:rgba(220,38,38,.6)"><span class="sb-icon">🗑️</span> Limpiar todo</div>

    <div class="sb-stats" id="sbStats">
      <div class="sb-stat-row"><span class="sb-stat-label">Jugadores</span><span class="sb-stat-val" id="sbCountPlayers">0</span></div>
      <div class="sb-stat-row"><span class="sb-stat-label">Partidos</span><span class="sb-stat-val" id="sbCountMatches">0</span></div>
      <div class="sb-stat-row"><span class="sb-stat-label">Victorias</span><span class="sb-stat-val" id="sbCountWins">0</span></div>
      <div class="sb-stat-row"><span class="sb-stat-label">Goles</span><span class="sb-stat-val" id="sbCountGoals">0</span></div>
    </div>
  </aside>

  <!-- MAIN -->
  <main class="main">

    <!-- ── PLANTILLA ── -->
    <div class="tab-content active" id="tab-plantilla">
      <div class="page-head">
        <div><h1>Plantilla</h1><p>Administrá los jugadores de tu equipo</p></div>
        <button class="btn btn-primary" onclick="SC_miequipo_togglePlayerForm()">+ Agregar jugador</button>
      </div>

      <div class="card" id="playerFormCard" style="display:none">
        <div class="card-head"><h2 id="playerFormTitle">Nuevo jugador</h2></div>
        <div class="card-body">
          <div class="form-grid">
            <div class="field">
              <label>Nombre completo</label>
              <input type="text" id="pNombre" placeholder="Ej: Lucas Martínez">
            </div>
            <div class="field">
              <label>Número</label>
              <input type="number" id="pNumero" placeholder="1–99" min="1" max="99">
            </div>
            <div class="field">
              <label>Posición</label>
              <select id="pPosicion">
                <option value="">Seleccioná</option>
                <optgroup label="Arquero">
                  <option value="POR">Portero (POR)</option>
                </optgroup>
                <optgroup label="Defensa">
                  <option value="DC">Defensa central (DC)</option>
                  <option value="DCD">Defensa central der. (DCD)</option>
                  <option value="DCI">Defensa central izq. (DCI)</option>
                  <option value="LD">Lateral derecho (LD)</option>
                  <option value="LI">Lateral izquierdo (LI)</option>
                </optgroup>
                <optgroup label="Mediocampo">
                  <option value="MCD">Mediocentro defensivo (MCD)</option>
                  <option value="MC">Mediocampista central (MC)</option>
                  <option value="MCO">Mediocampista ofensivo (MCO)</option>
                  <option value="MAD">Mediocampista ala der. (MAD)</option>
                  <option value="MAI">Mediocampista ala izq. (MAI)</option>
                </optgroup>
                <optgroup label="Ataque">
                  <option value="SD">Segundo delantero (SD)</option>
                  <option value="DC_DEL">Delantero centro (DC)</option>
                  <option value="ED">Extremo derecho (ED)</option>
                  <option value="EI">Extremo izquierdo (EI)</option>
                </optgroup>
              </select>
            </div>
            <div class="field">
              <label>Edad</label>
              <input type="number" id="pEdad" placeholder="Ej: 22" min="14" max="45">
            </div>
            <div class="field">
              <label>Pie hábil</label>
              <select id="pPie">
                <option value="Derecho">Derecho</option>
                <option value="Izquierdo">Izquierdo</option>
                <option value="Ambos">Ambidiestro</option>
              </select>
            </div>
            <div class="field">
              <label>Nacionalidad</label>
              <input type="text" id="pNacionalidad" placeholder="Ej: Argentina">
            </div>
          </div>
          <div class="btn-group" style="margin-top:16px">
            <button class="btn btn-primary" onclick="SC_miequipo_savePlayer()">Guardar jugador</button>
            <button class="btn btn-ghost" onclick="SC_miequipo_togglePlayerForm()">Cancelar</button>
          </div>
        </div>
      </div>

      <div class="card" id="plantillaCard">
        <div class="card-head">
          <h2>Jugadores registrados (<span id="countPlayers">0</span>)</h2>
        </div>
        <div id="plantillaBody">
          <div class="empty-state">
            <div class="empty-icon">👥</div>
            <div class="empty-text">No hay jugadores todavía</div>
            <div class="empty-sub">Hacé click en "Agregar jugador" para empezar</div>
          </div>
        </div>
      </div>
    </div>

    <!-- ── PARTIDOS ── -->
    <div class="tab-content" id="tab-partidos">
      <div class="page-head">
        <div><h1>Partidos</h1><p>Registrá los resultados de la temporada</p></div>
        <button class="btn btn-primary" onclick="SC_miequipo_toggleMatchForm()">+ Agregar partido</button>
      </div>

      <div class="partido-form" id="matchFormCard" style="display:none">
        <div class="form-grid">
          <div class="field">
            <label>Rival</label>
            <input type="text" id="mRival" placeholder="Nombre del equipo rival">
          </div>
          <div class="field">
            <label>Fecha</label>
            <input type="date" id="mFecha">
          </div>
          <div class="field">
            <label>Condición</label>
            <select id="mCondicion">
              <option value="Local">Local</option>
              <option value="Visitante">Visitante</option>
              <option value="Neutro">Neutro</option>
            </select>
          </div>
          <div class="field">
            <label>Goles a favor</label>
            <input type="number" id="mGF" min="0" placeholder="0">
          </div>
          <div class="field">
            <label>Goles en contra</label>
            <input type="number" id="mGC" min="0" placeholder="0">
          </div>
          <div class="field">
            <label>Jornada / Fecha</label>
            <input type="text" id="mJornada" placeholder="Ej: Fecha 5">
          </div>
        </div>
        <div class="btn-group" style="margin-top:14px">
          <button class="btn btn-primary" onclick="SC_miequipo_saveMatch()">Guardar partido</button>
          <button class="btn btn-ghost" onclick="SC_miequipo_toggleMatchForm()">Cancelar</button>
        </div>
      </div>

      <div id="matchList">
        <div class="empty-state">
          <div class="empty-icon">📅</div>
          <div class="empty-text">No hay partidos registrados</div>
          <div class="empty-sub">Agregá el primer partido para empezar</div>
        </div>
      </div>
    </div>

    <!-- ── MÉTRICAS ── -->
    <div class="tab-content" id="tab-metricas">
      <div class="page-head">
        <div><h1>Cargar métricas</h1><p>Registrá las acciones de cada jugador partido a partido</p></div>
      </div>

      <div class="card">
        <div class="card-head"><h2>Seleccionar partido y jugador</h2></div>
        <div class="card-body">
          <div class="form-grid">
            <div class="field">
              <label>Partido</label>
              <select id="metricaPartido" onchange="SC_miequipo_onMetricaPartidoChange()">
                <option value="">— Seleccioná un partido —</option>
              </select>
            </div>
            <div class="field">
              <label>Jugador</label>
              <select id="metricaJugador" onchange="SC_miequipo_onMetricaJugadorChange()">
                <option value="">— Seleccioná un jugador —</option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <div id="metricaFormWrap"></div>
    </div>

    <!-- ── REPORTE ── -->
    <div class="tab-content" id="tab-reporte">
      <div class="page-head">
        <div><h1>Reporte scouting</h1><p>Análisis profesional generado automáticamente</p></div>
        <div class="btn-group">
          <button class="btn btn-primary" onclick="SC_miequipo_generarReporte()">🔄 Generar reporte</button>
          <button class="btn btn-ghost" onclick="SC_miequipo_exportarPDF()">📄 Exportar PDF</button>
        </div>
      </div>

      <!-- API KEY CONFIG -->
      <div class="card" id="apiKeyCard" style="margin-bottom:20px">
        <div class="card-head" style="cursor:pointer" onclick="SC_miequipo_toggleApiPanel()">
          <h2 style="display:flex;align-items:center;gap:8px">
            <span id="apiKeyStatus">🔑</span> Análisis con IA
            <span id="apiKeyBadge" style="font-size:.7rem;padding:2px 8px;border-radius:10px;background:var(--bg2);color:var(--text-light);font-weight:400">Sin configurar</span>
          </h2>
          <span style="color:var(--text-light);font-size:.8rem" id="apiPanelToggle">▼ Configurar</span>
        </div>
        <div id="apiKeyPanel" style="display:none;padding:16px 20px;border-top:1px solid var(--border);background:var(--bg)">
          <p style="font-size:.82rem;color:var(--text-mid);margin-bottom:12px">Ingresá tu API key de Anthropic para activar el análisis narrativo con IA. La key se guarda solo en tu navegador.</p>
          <div style="display:flex;gap:10px;align-items:flex-end">
            <div class="field" style="flex:1">
              <label>API Key</label>
              <input type="password" id="apiKeyInput" placeholder="sk-ant-api..." autocomplete="off">
            </div>
            <button class="btn btn-primary" onclick="SC_miequipo_saveApiKey()">Guardar</button>
            <button class="btn btn-danger btn-sm" onclick="SC_miequipo_clearApiKey()" style="white-space:nowrap">Eliminar</button>
          </div>
          <p style="font-size:.72rem;color:var(--text-light);margin-top:8px">Obtené tu key en <strong>console.anthropic.com</strong></p>
        </div>
      </div>

      <!-- ANÁLISIS IA -->
      <div id="iaAnalisisWrap" style="display:none;margin-bottom:20px">
        <div class="scouting-card">
          <div class="sc-head" style="justify-content:space-between">
            <div style="display:flex;align-items:center;gap:8px"><span>🤖</span><h3>Análisis narrativo — Claude IA</h3></div>
            <button class="btn btn-primary btn-sm" onclick="SC_miequipo_generarAnalisisIA()">✨ Generar análisis</button>
          </div>
          <div id="iaAnalisisContent" style="padding:20px">
            <div style="text-align:center;padding:20px;color:var(--text-light);font-size:.85rem">
              Hacé click en "Generar análisis" para que Claude analice tu equipo y escriba un informe táctico completo.
            </div>
          </div>
        </div>
      </div>

      <div id="reporteContent">
        <div class="empty-state" style="padding:60px 20px">
          <div class="empty-icon">📋</div>
          <div class="empty-text">El reporte aparece acá</div>
          <div class="empty-sub">Cargá jugadores, partidos y métricas, luego hacé click en "Generar reporte"</div>
        </div>
      </div>
    </div>

    <!-- ── IMPORTAR ── -->
    <div class="tab-content" id="tab-importar">
      <div class="page-head">
        <div><h1>Importar datos</h1><p>Subí un archivo Excel o CSV con tu plantel</p></div>
      </div>
      <div class="card">
        <div class="card-head"><h2>Subir archivo</h2></div>
        <div class="card-body">
          <div class="import-zone" id="importZone" onclick="document.getElementById('fileInput').click()" ondragover="event.preventDefault();this.classList.add('drag-over')" ondragleave="this.classList.remove('drag-over')" ondrop="SC_miequipo_handleDrop(event)">
            <div class="import-icon">📂</div>
            <div class="import-text">Arrastrá tu archivo acá o hacé click para seleccionar</div>
            <div class="import-sub">Formatos: .xlsx, .xls, .csv</div>
          </div>
          <input type="file" id="fileInput" accept=".xlsx,.xls,.csv" style="display:none" onchange="SC_miequipo_handleFileInput(event)">
          <div id="importPreview" style="margin-top:16px"></div>
        </div>
      </div>
    </div>

  </main>
</div>
</div>
<script>
function gToast(msg,type){var el=document.getElementById('globalToast');if(!el)return;el.textContent=(type==='err'?'⚠ ':'✓ ')+msg;el.classList.add('show');setTimeout(function(){el.classList.remove('show');},3000);}
var SC_PAGES=['landing','liga','jugadores','equipo','comparar','miequipo'];
var SC_INITED={};
function scNavigate(page){
  SC_PAGES.forEach(function(p){var el=document.getElementById('page-'+p);var nav=document.getElementById('nav-'+p);var mnav=document.getElementById('mnav-'+p);if(el)el.classList.remove('active');if(nav)nav.classList.remove('active');if(mnav)mnav.classList.remove('active');});
  var t=document.getElementById('page-'+page);var n2=document.getElementById('nav-'+page);var m=document.getElementById('mnav-'+page);
  if(t)t.classList.add('active');if(n2)n2.classList.add('active');if(m)m.classList.add('active');
  window.scrollTo(0,0);
  if(!SC_INITED[page]){SC_INITED[page]=true;var tmpl=document.getElementById('js-'+page);if(tmpl&&tmpl.textContent.trim()){var s=document.createElement('script');s.textContent=tmpl.textContent;document.body.appendChild(s);}}
}
document.addEventListener('DOMContentLoaded',function(){
  SC_PAGES.forEach(function(page){
    var nav=document.getElementById('nav-'+page);var mnav=document.getElementById('mnav-'+page);
    function go(){scNavigate(page);}
    if(nav)nav.addEventListener('click',go);
    if(mnav)mnav.addEventListener('click',go);
  });
  document.getElementById('logoBtn').addEventListener('click',function(){scNavigate('landing');});
  document.getElementById('navCta').addEventListener('click',function(){scNavigate('miequipo');});
  scNavigate('landing');
});
</script>
<script type="text/sc-page" id="js-landing">(function(){
function _t(m,t){gToast(m,t);}

  // Mock chart bars
  const bars = [
    { h: 60, c: '#c4601a' }, { h: 45, c: '#c4601a' },
    { h: 80, c: '#c4601a' }, { h: 55, c: '#c4601a' },
    { h: 70, c: '#c4601a' }, { h: 90, c: '#c4601a' },
    { h: 65, c: '#c4601a' }, { h: 75, c: '#c4601a' }
  ];

  const container = document.getElementById('mockBars');
  bars.forEach((b, i) => {
    const bar = document.createElement('div');
    bar.className = 'mock-bar';
    bar.style.cssText = `background:${b.c}; opacity:0.3; height:0; transition:height 0.8s ease ${i*0.07}s;`;
    container.appendChild(bar);
    setTimeout(() => { bar.style.height = b.h + '%'; bar.style.opacity = '0.6'; }, 300 + i * 70);
  });

  // Scroll reveal
  const observer = new IntersectionObserver(entries => {
    entries.forEach(e => {
      if (e.isIntersecting) e.target.classList.add('visible');
    });
  }, { threshold: 0.12 });

  document.querySelectorAll('.feat-card').forEach((el, i) => {
    el.style.transitionDelay = (i * 0.07) + 's';
    observer.observe(el);
  });


})();</script>
<script type="text/sc-page" id="js-liga">(function(){
function _t(m,t){gToast(m,t);}

// ── DATOS POR LIGA ────────────────────────────────────────────────────────────
// ── CONFIG API ────────────────────────────────────────────────────────────────
const API_BASE = '/api/football';

const LIGAS_CONFIG = {
  laliga:     { id: 140, nombre: 'LaLiga EA Sports',   bandera: '🇪🇸', season: 2024 },
  premier:    { id: 39,  nombre: 'Premier League',     bandera: '🏴󠁧󠁢󠁥󠁮󠁧󠁿', season: 2024 },
  bundesliga: { id: 78,  nombre: 'Bundesliga',         bandera: '🇩🇪', season: 2024 },
  seriea:     { id: 135, nombre: 'Serie A',            bandera: '🇮🇹', season: 2024 },
  ligaprof:   { id: 128, nombre: 'Liga Profesional',   bandera: '🇦🇷', season: 2024 },
};

const ligaKeys = ['laliga','premier','bundesliga','seriea','ligaprof'];
let currentLiga = 'laliga';
const cache = {};

const zoneColors = { 1:'#3b82f6', 2:'#3b82f6', 3:'#3b82f6', 4:'#3b82f6', 5:'#f59e0b', 6:'#f59e0b', rel:'#ef4444' };
const formColors = { W:'#16a34a', D:'#d97706', L:'#dc2626' };

// ── FETCH HELPER ──────────────────────────────────────────────────────────────
async function apiFetch(endpoint) {
  const res = await fetch(`${API_BASE}?endpoint=${encodeURIComponent(endpoint)}`);
  if (!res.ok) throw new Error('Error ' + res.status);
  return res.json();
}

// ── LOADING STATE ─────────────────────────────────────────────────────────────
function showLoading(msg) {
  document.getElementById('standingsBody').innerHTML = `
    <tr><td colspan="11" style="text-align:center;padding:32px;color:var(--text-light)">
      <div style="display:flex;align-items:center;justify-content:center;gap:10px">
        <div style="width:16px;height:16px;border:2px solid var(--accent);border-top-color:transparent;border-radius:50%;animation:spin .8s linear infinite"></div>
        <span>${msg}</span>
      </div>
    </td></tr>`;
  document.getElementById('resultsList').innerHTML = `<div style="padding:20px;text-align:center;color:var(--text-light);font-size:.85rem">Cargando...</div>`;
  document.getElementById('upcomingList').innerHTML = `<div style="padding:20px;text-align:center;color:var(--text-light);font-size:.85rem">Cargando...</div>`;
  document.getElementById('scorersList').innerHTML = `<div style="padding:20px;text-align:center;color:var(--text-light);font-size:.85rem">Cargando...</div>`;
}

function showError(msg) {
  document.getElementById('standingsBody').innerHTML = `
    <tr><td colspan="11" style="text-align:center;padding:32px;color:var(--danger)">
      ⚠ ${msg}
    </td></tr>`;
}

// ── RENDER FUNCTIONS ──────────────────────────────────────────────────────────
function renderStandings(standings) {
  const tbody = document.getElementById('standingsBody');
  tbody.innerHTML = '';
  const total = standings.length;

  standings.forEach(entry => {
    const t = entry.team;
    const s = entry.all;
    const pts = entry.points;
    const pos = entry.rank;
    const dg = s.goals.for - s.goals.against;
    const form = (entry.form || '').slice(-5).split('').map(f => {
      const c = f === 'W' ? formColors.W : f === 'D' ? formColors.D : formColors.L;
      return `<div class="form-dot" style="background:${c}" title="${f}"></div>`;
    }).join('');

    // Zone color: top 4 = UCL, 5-6 = UEL, last 3 = REL (approximation per league)
    let zoneColor = '';
    if (pos <= 4) zoneColor = '#3b82f6';
    else if (pos <= 6) zoneColor = '#f59e0b';
    else if (pos > total - 3) zoneColor = '#ef4444';

    const row = document.createElement('tr');
    row.innerHTML = `
      <td class="pos-num" style="padding-right:0">
        ${zoneColor ? `<span class="pos-indicator" style="background:${zoneColor}"></span>` : '<span class="pos-indicator" style="background:transparent"></span>'}
        ${pos}
      </td>
      <td><div class="team-cell">
        <img src="${t.logo}" style="width:22px;height:22px;object-fit:contain;border-radius:2px" onerror="this.style.display='none'">
        <span class="team-name ${pos <= 3 ? 'bold' : ''}">${t.name}</span>
      </div></td>
      <td class="center">${s.played}</td>
      <td class="center">${s.win}</td>
      <td class="center">${s.draw}</td>
      <td class="center">${s.lose}</td>
      <td class="center">${s.goals.for}</td>
      <td class="center">${s.goals.against}</td>
      <td class="center">${dg > 0 ? '+'+dg : dg}</td>
      <td class="center pts">${pts}</td>
      <td class="center"><div class="form-dots" style="justify-content:center">${form}</div></td>`;
    tbody.appendChild(row);
  });
}

function renderFixtures(fixtures) {
  const today = new Date();
  const played = fixtures.filter(f => f.fixture.status.short === 'FT' || f.fixture.status.short === 'AET' || f.fixture.status.short === 'PEN').slice(-5).reverse();
  const upcoming = fixtures.filter(f => f.fixture.status.short === 'NS' && new Date(f.fixture.date) > today).slice(0, 5);

  // Results
  const resList = document.getElementById('resultsList');
  resList.innerHTML = '';
  if (played.length === 0) {
    resList.innerHTML = '<div style="padding:20px;text-align:center;color:var(--text-light);font-size:.85rem">No hay resultados recientes</div>';
  } else {
    played.forEach(f => {
      const h = f.teams.home;
      const a = f.teams.away;
      const hg = f.goals.home;
      const ag = f.goals.away;
      const item = document.createElement('div');
      item.className = 'result-item';
      item.innerHTML = `
        <div class="result-team">
          <img src="${h.logo}" style="width:28px;height:28px;object-fit:contain" onerror="this.style.display='none'">
          <span class="${hg > ag ? 'result-winner' : ''}">${h.name}</span>
        </div>
        <div class="result-score">
          <div class="score-main">${hg} — ${ag}</div>
          <div class="score-xg">${new Date(f.fixture.date).toLocaleDateString('es-AR',{day:'2-digit',month:'short'})}</div>
        </div>
        <div class="result-team away">
          <img src="${a.logo}" style="width:28px;height:28px;object-fit:contain" onerror="this.style.display='none'">
          <span class="${ag > hg ? 'result-winner' : ''}">${a.name}</span>
        </div>`;
      resList.appendChild(item);
    });
  }

  // Upcoming
  const upList = document.getElementById('upcomingList');
  upList.innerHTML = '';
  if (upcoming.length === 0) {
    upList.innerHTML = '<div style="padding:20px;text-align:center;color:var(--text-light);font-size:.85rem">No hay próximos partidos programados</div>';
  } else {
    upcoming.forEach(f => {
      const h = f.teams.home;
      const a = f.teams.away;
      const fecha = new Date(f.fixture.date);
      const dia = fecha.toLocaleDateString('es-AR', {weekday:'short', day:'2-digit', month:'short'});
      const hora = fecha.toLocaleTimeString('es-AR', {hour:'2-digit', minute:'2-digit'});
      const item = document.createElement('div');
      item.className = 'upcoming-item';
      item.innerHTML = `
        <div class="result-team">
          <img src="${h.logo}" style="width:28px;height:28px;object-fit:contain" onerror="this.style.display='none'">
          <span>${h.name}</span>
        </div>
        <div class="upcoming-date">
          <div class="upcoming-day">${dia}</div>
          <div class="upcoming-time">${hora}</div>
        </div>
        <div class="result-team away">
          <img src="${a.logo}" style="width:28px;height:28px;object-fit:contain" onerror="this.style.display='none'">
          <span>${a.name}</span>
        </div>`;
      upList.appendChild(item);
    });
  }
}

function renderScorers(scorers) {
  const scrList = document.getElementById('scorersList');
  scrList.innerHTML = '';
  scorers.slice(0, 10).forEach((s, i) => {
    const p = s.player;
    const st = s.statistics[0];
    const goals = st.goals.total || 0;
    const assists = st.goals.assists || 0;
    const item = document.createElement('div');
    item.className = 'scorer-item';
    item.innerHTML = `
      <div class="scorer-rank ${i < 3 ? 'top' : ''}">${i+1}</div>
      <div class="scorer-avatar" style="background:var(--bg2);overflow:hidden;padding:0">
        <img src="${p.photo}" style="width:100%;height:100%;object-fit:cover" onerror="this.parentElement.textContent='${p.name.split(' ').map(w=>w[0]).join('').slice(0,2)}'">
      </div>
      <div class="scorer-info">
        <div class="scorer-name">${p.name}</div>
        <div class="scorer-team">${st.team.name}</div>
      </div>
      <div class="scorer-stats">
        <div class="scorer-goals">${goals}</div>
        <div class="scorer-label">${assists} asist.</div>
      </div>`;
    scrList.appendChild(item);
  });
}

// ── LOAD LIGA ─────────────────────────────────────────────────────────────────
async function loadLiga(key) {
  const conf = LIGAS_CONFIG[key];
  if (!conf) return;
  currentLiga = key;

  // Update header
  document.getElementById('ligaTitulo').textContent = conf.nombre;
  document.getElementById('ligaJornada').textContent = `Temporada ${conf.season}/${conf.season+1} · Datos en vivo`;
  document.getElementById('ligaStatsTitle').textContent = conf.nombre + ' en números';

  // Use cache if available
  if (cache[key]) {
    renderStandings(cache[key].standings);
    renderFixtures(cache[key].fixtures);
    renderScorers(cache[key].scorers);
    updateStats(cache[key].fixtures);
    return;
  }

  showLoading('Cargando datos en vivo...');

  try {
    // Llamadas paralelas para optimizar las 100 requests diarias
    const [standData, fixData, scorData] = await Promise.all([
      apiFetch(`standings?league=${conf.id}&season=${conf.season}`),
      apiFetch(`fixtures?league=${conf.id}&season=${conf.season}&last=20`),
      apiFetch(`players/topscorers?league=${conf.id}&season=${conf.season}`),
    ]);

    const standings = standData.response?.[0]?.league?.standings?.[0] || [];
    const fixtures  = fixData.response || [];
    const scorers   = scorData.response || [];

    cache[key] = { standings, fixtures, scorers };

    renderStandings(standings);
    renderFixtures(fixtures);
    renderScorers(scorers);
    updateStats(fixtures);

    document.getElementById('resultadosTitle').textContent = 'Resultados recientes';
    document.getElementById('proximosTitle').textContent   = 'Próximos partidos';

  } catch(err) {
    showError('Error al cargar datos. Verificá la API key. (' + err.message + ')');
  }
}

function updateStats(fixtures) {
  const played = fixtures.filter(f => f.fixture.status.short === 'FT');
  const goals = played.reduce((a, f) => a + (f.goals.home||0) + (f.goals.away||0), 0);
  const avg = played.length ? (goals / played.length).toFixed(1) : '—';
  document.getElementById('statGoles').textContent   = goals || '—';
  document.getElementById('statPromedio').textContent = avg;
  document.getElementById('statPartidos').textContent = played.length || '—';
  document.getElementById('statRojas').textContent   = '—';
}

// ── EVENTS ────────────────────────────────────────────────────────────────────
document.querySelectorAll('.league-btn').forEach((btn, i) => {
  btn.addEventListener('click', function() {
    document.querySelectorAll('.league-btn').forEach(b => b.classList.remove('active'));
    this.classList.add('active');
    loadLiga(ligaKeys[i]);
  });
});

document.querySelectorAll('.jornada-tab').forEach(tab => {
  tab.addEventListener('click', function() {
    document.querySelectorAll('.jornada-tab').forEach(t => t.classList.remove('active'));
    this.classList.add('active');
  });
});

// Initial load
loadLiga('laliga');


})();</script>
<script type="text/sc-page" id="js-jugadores">(function(){
function _t(m,t){gToast(m,t);}

// ── BASE DE DATOS DE JUGADORES ──────────────────────────────────────────────
const JUGADORES = [
  // LaLiga
  { id:'vinicius', name:'Vinícius Jr.', team:'Real Madrid', league:'LaLiga', pos:'Extremo', age:24, nat:'Brasil', foot:'Der', avatar:'VJ', color:'#1a3a6b',
    stats:{ goles:22, asistencias:8, xG:18.4, minutos:2180, remates:82, pasesClave:64, regates:112, duelos:68 },
    form:['W','W','D','W','W'], matches:[
      {date:'22 Feb',rival:'Sevilla',res:'W',score:'3-1',goles:2,asist:0,mins:87},
      {date:'15 Feb',rival:'Getafe',res:'W',score:'2-0',goles:1,asist:1,mins:90},
      {date:'08 Feb',rival:'Barcelona',res:'D',score:'2-2',goles:0,asist:1,mins:90},
      {date:'01 Feb',rival:'Villarreal',res:'W',score:'3-0',goles:1,asist:0,mins:76},
      {date:'25 Ene',rival:'Betis',res:'W',score:'2-1',goles:1,asist:0,mins:90},
      {date:'18 Ene',rival:'Girona',res:'W',score:'4-1',goles:2,asist:1,mins:90},
      {date:'11 Ene',rival:'Las Palmas',res:'W',score:'3-0',goles:0,asist:2,mins:81},
      {date:'04 Ene',rival:'Valencia',res:'W',score:'5-1',goles:1,asist:1,mins:90},
    ]},
  { id:'lewandowski', name:'Robert Lewandowski', team:'Barcelona', league:'LaLiga', pos:'Delantero', age:36, nat:'Polonia', foot:'Der', avatar:'RL', color:'#a50044',
    stats:{ goles:19, asistencias:5, xG:17.2, minutos:2340, remates:94, pasesClave:28, regates:22, duelos:88 },
    form:['W','L','W','W','D'], matches:[
      {date:'22 Feb',rival:'Atlético',res:'D',score:'2-2',goles:1,asist:0,mins:90},
      {date:'15 Feb',rival:'Osasuna',res:'W',score:'3-0',goles:2,asist:0,mins:90},
      {date:'08 Feb',rival:'Real Madrid',res:'D',score:'2-2',goles:1,asist:0,mins:90},
      {date:'01 Feb',rival:'Rayo',res:'W',score:'2-0',goles:1,asist:1,mins:85},
      {date:'25 Ene',rival:'Leganés',res:'W',score:'4-1',goles:2,asist:0,mins:90},
    ]},
  { id:'mbappe', name:'Kylian Mbappé', team:'Real Madrid', league:'LaLiga', pos:'Delantero', age:26, nat:'Francia', foot:'Der', avatar:'KM', color:'#1a3a6b',
    stats:{ goles:17, asistencias:6, xG:15.8, minutos:2100, remates:88, pasesClave:42, regates:96, duelos:54 },
    form:['W','W','W','D','W'], matches:[
      {date:'22 Feb',rival:'Sevilla',res:'W',score:'3-1',goles:1,asist:1,mins:90},
      {date:'15 Feb',rival:'Getafe',res:'W',score:'2-0',goles:0,asist:1,mins:90},
      {date:'08 Feb',rival:'Barcelona',res:'D',score:'2-2',goles:1,asist:0,mins:90},
      {date:'01 Feb',rival:'Villarreal',res:'W',score:'3-0',goles:2,asist:0,mins:88},
      {date:'25 Ene',rival:'Betis',res:'W',score:'2-1',goles:0,asist:1,mins:90},
    ]},
  { id:'griezmann', name:'Antoine Griezmann', team:'Atlético Madrid', league:'LaLiga', pos:'Mediocampista', age:33, nat:'Francia', foot:'Der', avatar:'AG', color:'#cb3524',
    stats:{ goles:14, asistencias:9, xG:11.2, minutos:2280, remates:62, pasesClave:88, regates:48, duelos:92 },
    form:['W','W','W','D','L'], matches:[
      {date:'22 Feb',rival:'Barcelona',res:'D',score:'2-2',goles:1,asist:1,mins:90},
      {date:'15 Feb',rival:'Celta',res:'W',score:'2-0',goles:0,asist:1,mins:90},
      {date:'08 Feb',rival:'Real Madrid',res:'W',score:'3-1',goles:1,asist:0,mins:90},
      {date:'01 Feb',rival:'Girona',res:'W',score:'2-0',goles:1,asist:0,mins:82},
      {date:'25 Ene',rival:'Osasuna',res:'L',score:'0-1',goles:0,asist:0,mins:90},
    ]},
  { id:'bellingham', name:'Jude Bellingham', team:'Real Madrid', league:'LaLiga', pos:'Mediocampista', age:21, nat:'Inglaterra', foot:'Der', avatar:'JB', color:'#1a3a6b',
    stats:{ goles:12, asistencias:10, xG:9.8, minutos:2260, remates:58, pasesClave:96, regates:74, duelos:118 },
    form:['W','W','D','W','W'], matches:[
      {date:'22 Feb',rival:'Sevilla',res:'W',score:'3-1',goles:0,asist:2,mins:90},
      {date:'15 Feb',rival:'Getafe',res:'W',score:'2-0',goles:1,asist:0,mins:90},
      {date:'08 Feb',rival:'Barcelona',res:'D',score:'2-2',goles:1,asist:0,mins:90},
      {date:'01 Feb',rival:'Villarreal',res:'W',score:'3-0',goles:0,asist:1,mins:79},
      {date:'25 Ene',rival:'Betis',res:'W',score:'2-1',goles:0,asist:1,mins:90},
    ]},

  // Premier League
  { id:'salah', name:'Mohamed Salah', team:'Liverpool', league:'Premier', pos:'Extremo', age:32, nat:'Egipto', foot:'Der', avatar:'MS', color:'#c8102e',
    stats:{ goles:24, asistencias:14, xG:19.8, minutos:2320, remates:98, pasesClave:112, regates:88, duelos:62 },
    form:['W','W','W','D','W'], matches:[
      {date:'23 Feb',rival:'Man City',res:'W',score:'2-0',goles:1,asist:1,mins:90},
      {date:'16 Feb',rival:'Newcastle',res:'W',score:'3-1',goles:2,asist:0,mins:90},
      {date:'09 Feb',rival:'Arsenal',res:'W',score:'2-1',goles:1,asist:0,mins:90},
      {date:'02 Feb',rival:'Chelsea',res:'D',score:'1-1',goles:1,asist:0,mins:90},
      {date:'26 Ene',rival:'Tottenham',res:'W',score:'4-0',goles:2,asist:1,mins:88},
    ]},
  { id:'haaland', name:'Erling Haaland', team:'Man City', league:'Premier', pos:'Delantero', age:24, nat:'Noruega', foot:'Der', avatar:'EH', color:'#6cabdd',
    stats:{ goles:20, asistencias:5, xG:21.4, minutos:2080, remates:106, pasesClave:18, regates:14, duelos:76 },
    form:['D','W','W','L','W'], matches:[
      {date:'23 Feb',rival:'Liverpool',res:'L',score:'0-2',goles:0,asist:0,mins:90},
      {date:'16 Feb',rival:'Arsenal',res:'W',score:'2-1',goles:2,asist:0,mins:90},
      {date:'09 Feb',rival:'Chelsea',res:'W',score:'3-1',goles:1,asist:0,mins:84},
      {date:'02 Feb',rival:'Leicester',res:'W',score:'4-1',goles:2,asist:1,mins:90},
      {date:'26 Ene',rival:'Southampton',res:'W',score:'5-0',goles:3,asist:0,mins:90},
    ]},
  { id:'palmer', name:'Cole Palmer', team:'Chelsea', league:'Premier', pos:'Mediocampista', age:22, nat:'Inglaterra', foot:'Der', avatar:'CP', color:'#034694',
    stats:{ goles:16, asistencias:11, xG:13.2, minutos:2380, remates:78, pasesClave:122, regates:86, duelos:68 },
    form:['W','L','W','W','D'], matches:[
      {date:'23 Feb',rival:'Arsenal',res:'D',score:'1-1',goles:1,asist:0,mins:90},
      {date:'16 Feb',rival:'Tottenham',res:'W',score:'3-2',goles:1,asist:2,mins:90},
      {date:'09 Feb',rival:'Man City',res:'L',score:'1-3',goles:1,asist:0,mins:90},
      {date:'02 Feb',rival:'Liverpool',res:'D',score:'1-1',goles:0,asist:1,mins:88},
      {date:'26 Ene',rival:'Ipswich',res:'W',score:'4-0',goles:2,asist:1,mins:90},
    ]},
  { id:'saka', name:'Bukayo Saka', team:'Arsenal', league:'Premier', pos:'Extremo', age:23, nat:'Inglaterra', foot:'Der', avatar:'BS', color:'#ef0107',
    stats:{ goles:13, asistencias:10, xG:11.8, minutos:2280, remates:72, pasesClave:98, regates:102, duelos:88 },
    form:['W','W','D','W','L'], matches:[
      {date:'23 Feb',rival:'Chelsea',res:'D',score:'1-1',goles:1,asist:0,mins:90},
      {date:'16 Feb',rival:'Man Utd',res:'W',score:'3-1',goles:1,asist:1,mins:90},
      {date:'09 Feb',rival:'Liverpool',res:'L',score:'1-2',goles:1,asist:0,mins:90},
      {date:'02 Feb',rival:'Newcastle',res:'W',score:'2-0',goles:0,asist:2,mins:90},
      {date:'26 Ene',rival:'Aston Villa',res:'W',score:'2-1',goles:1,asist:0,mins:85},
    ]},
  { id:'isak', name:'Alexander Isak', team:'Newcastle', league:'Premier', pos:'Delantero', age:25, nat:'Suecia', foot:'Izq', avatar:'AI', color:'#241f20',
    stats:{ goles:17, asistencias:4, xG:14.6, minutos:2160, remates:86, pasesClave:22, regates:58, duelos:72 },
    form:['W','D','W','W','L'], matches:[
      {date:'23 Feb',rival:'Tottenham',res:'W',score:'2-1',goles:1,asist:0,mins:90},
      {date:'16 Feb',rival:'Liverpool',res:'L',score:'1-3',goles:1,asist:0,mins:90},
      {date:'09 Feb',rival:'Aston Villa',res:'W',score:'2-0',goles:2,asist:0,mins:88},
      {date:'02 Feb',rival:'Arsenal',res:'L',score:'0-2',goles:0,asist:0,mins:90},
      {date:'26 Ene',rival:'Chelsea',res:'W',score:'2-1',goles:1,asist:1,mins:90},
    ]},

  // Bundesliga
  { id:'kane', name:'Harry Kane', team:'Bayern Munich', league:'Bundesliga', pos:'Delantero', age:31, nat:'Inglaterra', foot:'Der', avatar:'HK', color:'#dc052d',
    stats:{ goles:26, asistencias:8, xG:23.2, minutos:2280, remates:112, pasesClave:48, regates:18, duelos:82 },
    form:['W','W','W','W','D'], matches:[
      {date:'22 Feb',rival:'Dortmund',res:'W',score:'4-0',goles:2,asist:1,mins:90},
      {date:'15 Feb',rival:'Stuttgart',res:'W',score:'3-1',goles:2,asist:0,mins:88},
      {date:'08 Feb',rival:'Leverkusen',res:'D',score:'2-2',goles:1,asist:0,mins:90},
      {date:'01 Feb',rival:'Bochum',res:'W',score:'5-0',goles:3,asist:1,mins:90},
      {date:'25 Ene',rival:'Hoffenheim',res:'W',score:'3-0',goles:1,asist:0,mins:90},
    ]},
  { id:'wirtz', name:'Florian Wirtz', team:'Leverkusen', league:'Bundesliga', pos:'Mediocampista', age:21, nat:'Alemania', foot:'Izq', avatar:'FW', color:'#e32221',
    stats:{ goles:14, asistencias:14, xG:10.8, minutos:2180, remates:64, pasesClave:128, regates:118, duelos:72 },
    form:['W','D','W','W','W'], matches:[
      {date:'22 Feb',rival:'RB Leipzig',res:'W',score:'2-1',goles:1,asist:1,mins:90},
      {date:'15 Feb',rival:'Freiburg',res:'W',score:'3-0',goles:1,asist:2,mins:90},
      {date:'08 Feb',rival:'Bayern',res:'D',score:'2-2',goles:1,asist:0,mins:90},
      {date:'01 Feb',rival:'Bochum',res:'W',score:'4-0',goles:2,asist:0,mins:85},
      {date:'25 Ene',rival:'Wolfsburg',res:'W',score:'2-0',goles:0,asist:2,mins:90},
    ]},
  { id:'guirassy', name:'Serhou Guirassy', team:'Dortmund', league:'Bundesliga', pos:'Delantero', age:28, nat:'Guinea', foot:'Der', avatar:'SG', color:'#fde100',
    stats:{ goles:13, asistencias:4, xG:12.8, minutos:2060, remates:82, pasesClave:14, regates:22, duelos:96 },
    form:['W','L','W','D','W'], matches:[
      {date:'22 Feb',rival:'Bayern',res:'L',score:'0-4',goles:0,asist:0,mins:90},
      {date:'15 Feb',rival:'Eintracht',res:'W',score:'2-1',goles:1,asist:0,mins:90},
      {date:'08 Feb',rival:'Gladbach',res:'W',score:'3-2',goles:2,asist:0,mins:88},
      {date:'01 Feb',rival:'Augsburg',res:'D',score:'1-1',goles:1,asist:0,mins:90},
      {date:'25 Ene',rival:'Köln',res:'W',score:'3-0',goles:2,asist:1,mins:90},
    ]},

  // Serie A
  { id:'retegui', name:'Mateo Retegui', team:'Atalanta', league:'Serie A', pos:'Delantero', age:25, nat:'Argentina/Italia', foot:'Der', avatar:'MR', color:'#1e4799',
    stats:{ goles:20, asistencias:4, xG:17.8, minutos:2180, remates:88, pasesClave:18, regates:16, duelos:92 },
    form:['W','W','L','W','W'], matches:[
      {date:'23 Feb',rival:'Lazio',res:'W',score:'3-1',goles:2,asist:0,mins:90},
      {date:'16 Feb',rival:'AC Milan',res:'W',score:'2-0',goles:1,asist:0,mins:88},
      {date:'09 Feb',rival:'Inter',res:'L',score:'1-2',goles:1,asist:0,mins:90},
      {date:'02 Feb',rival:'Juventus',res:'W',score:'2-1',goles:1,asist:1,mins:90},
      {date:'26 Ene',rival:'Napoli',res:'W',score:'2-1',goles:1,asist:0,mins:85},
    ]},
  { id:'thuram', name:'Marcus Thuram', team:'Inter Milan', league:'Serie A', pos:'Delantero', age:27, nat:'Francia', foot:'Izq', avatar:'MT', color:'#010e80',
    stats:{ goles:16, asistencias:6, xG:14.2, minutos:2240, remates:76, pasesClave:32, regates:68, duelos:88 },
    form:['W','D','W','W','D'], matches:[
      {date:'23 Feb',rival:'Genoa',res:'W',score:'3-0',goles:2,asist:0,mins:90},
      {date:'16 Feb',rival:'Napoli',res:'D',score:'1-1',goles:1,asist:0,mins:90},
      {date:'09 Feb',rival:'Atalanta',res:'W',score:'2-1',goles:0,asist:2,mins:88},
      {date:'02 Feb',rival:'Fiorentina',res:'W',score:'2-0',goles:1,asist:0,mins:90},
      {date:'26 Ene',rival:'Juventus',res:'D',score:'0-0',goles:0,asist:0,mins:90},
    ]},
  { id:'lukaku', name:'Romelu Lukaku', team:'Napoli', league:'Serie A', pos:'Delantero', age:31, nat:'Bélgica', foot:'Der', avatar:'RL2', color:'#12a0c4',
    stats:{ goles:14, asistencias:5, xG:13.8, minutos:2120, remates:72, pasesClave:22, regates:28, duelos:112 },
    form:['W','W','D','W','W'], matches:[
      {date:'23 Feb',rival:'AC Milan',res:'W',score:'2-0',goles:1,asist:0,mins:90},
      {date:'16 Feb',rival:'Inter',res:'D',score:'1-1',goles:1,asist:0,mins:90},
      {date:'09 Feb',rival:'Atalanta',res:'W',score:'2-1',goles:0,asist:1,mins:85},
      {date:'02 Feb',rival:'Lazio',res:'W',score:'2-0',goles:1,asist:0,mins:90},
      {date:'26 Ene',rival:'Juventus',res:'W',score:'1-0',goles:1,asist:0,mins:90},
    ]},

  // Liga Profesional Argentina
  { id:'merentiel', name:'Miguel Merentiel', team:'Boca Juniors', league:'Liga Prof.', pos:'Delantero', age:27, nat:'Uruguay', foot:'Der', avatar:'MM', color:'#003087',
    stats:{ goles:12, asistencias:4, xG:10.2, minutos:1820, remates:58, pasesClave:18, regates:42, duelos:74 },
    form:['W','D','W','W','L'], matches:[
      {date:'20 Feb',rival:'River',res:'L',score:'1-2',goles:1,asist:0,mins:90},
      {date:'13 Feb',rival:'Independiente',res:'W',score:'2-0',goles:1,asist:1,mins:90},
      {date:'06 Feb',rival:'Racing',res:'W',score:'2-1',goles:1,asist:0,mins:88},
      {date:'30 Ene',rival:'San Lorenzo',res:'D',score:'1-1',goles:1,asist:0,mins:90},
      {date:'23 Ene',rival:'Huracán',res:'W',score:'3-0',goles:2,asist:0,mins:90},
    ]},
  { id:'colidio', name:'Facundo Colidio', team:'River Plate', league:'Liga Prof.', pos:'Extremo', age:25, nat:'Argentina', foot:'Der', avatar:'FC', color:'#cc0000',
    stats:{ goles:10, asistencias:5, xG:8.8, minutos:1760, remates:52, pasesClave:42, regates:88, duelos:48 },
    form:['W','W','D','W','W'], matches:[
      {date:'20 Feb',rival:'Boca',res:'W',score:'2-1',goles:1,asist:1,mins:88},
      {date:'13 Feb',rival:'Racing',res:'W',score:'1-0',goles:0,asist:1,mins:90},
      {date:'06 Feb',rival:'Vélez',res:'D',score:'1-1',goles:1,asist:0,mins:90},
      {date:'30 Ene',rival:'Estudiantes',res:'W',score:'2-0',goles:1,asist:0,mins:82},
      {date:'23 Ene',rival:'Lanús',res:'W',score:'3-1',goles:2,asist:0,mins:90},
    ]},
];

// ── ESTADO ──────────────────────────────────────────────────────────────────
let currentFilter = 'all';
let currentSearch = '';
let currentPlayer = null;

// ── HELPERS ─────────────────────────────────────────────────────────────────
const formColor = {W:'#16a34a',D:'#d97706',L:'#dc2626'};
const formLabel = {W:'V',D:'E',L:'D'};

function filteredPlayers() {
  return JUGADORES.filter(j => {
    const matchSearch = !currentSearch ||
      j.name.toLowerCase().includes(currentSearch.toLowerCase()) ||
      j.team.toLowerCase().includes(currentSearch.toLowerCase());
    const matchFilter = currentFilter === 'all' ||
      j.league === currentFilter ||
      j.pos.includes(currentFilter.replace('Delantero','Del').replace('Mediocampista','Med').replace('Defensa','Def'));
    // pos filter
    const posMap = {'Delantero':['Delantero','Extremo'],'Mediocampista':['Mediocampista'],'Defensa':['Defensa','Lateral']};
    const matchPos = currentFilter === 'all' || j.league === currentFilter ||
      (posMap[currentFilter] && posMap[currentFilter].some(p => j.pos.includes(p)));
    return matchSearch && (j.league === currentFilter || currentFilter === 'all' || (posMap[currentFilter] && matchPos));
  });
}

// ── RENDER GRID ──────────────────────────────────────────────────────────────
function renderGrid() {
  const grid = document.getElementById('playersGrid');
  const players = filteredPlayers();

  if (players.length === 0) {
    grid.innerHTML = `<div class="no-results" style="grid-column:1/-1"><div class="nr-icon">🔍</div><div class="nr-text">No se encontraron jugadores para "<strong>${currentSearch}</strong>"</div></div>`;
    return;
  }

  grid.innerHTML = players.map(j => `
    <div class="player-card" onclick="showProfile('${j.id}')">
      <div class="pc-header">
        <div class="pc-avatar" style="background:${j.color}">${j.avatar}</div>
        <div>
          <div class="pc-name">${j.name}</div>
          <div class="pc-meta">${j.pos} · ${j.team}</div>
          <span class="pc-league">${j.league}</span>
        </div>
      </div>
      <div class="pc-stats">
        <div class="pc-stat"><div class="pc-stat-val">${j.stats.goles}</div><div class="pc-stat-label">Goles</div></div>
        <div class="pc-stat"><div class="pc-stat-val">${j.stats.asistencias}</div><div class="pc-stat-label">Asist.</div></div>
        <div class="pc-stat"><div class="pc-stat-val">${j.stats.xG}</div><div class="pc-stat-label">xG</div></div>
        <div class="pc-stat"><div class="pc-stat-val">${Math.round(j.stats.minutos/90*10)/10}</div><div class="pc-stat-label">G/90'</div></div>
      </div>
      <div class="pc-form">
        <span class="pc-form-label">Forma:</span>
        ${j.form.map(f=>`<div class="form-dot" style="background:${formColor[f]}">${formLabel[f]}</div>`).join('')}
      </div>
    </div>
  `).join('');
}

// ── PERFIL ───────────────────────────────────────────────────────────────────
function showProfile(id) {
  const j = JUGADORES.find(p => p.id === id);
  if (!j) return;
  currentPlayer = j;

  document.getElementById('playersGrid').classList.add('hidden');
  document.getElementById('searchSection').classList.add('condensed');

  const g90 = (j.stats.goles / (j.stats.minutos/90)).toFixed(2);
  const a90 = (j.stats.asistencias / (j.stats.minutos/90)).toFixed(2);

  // Radar data: Goles/90, Regates, xG/90, Pases clave, Duelos, Asist/90
  const radarMax = [0.8, 150, 1.0, 150, 150, 0.6];
  const radarVals = [
    j.stats.goles/(j.stats.minutos/90),
    j.stats.regates,
    j.stats.xG/(j.stats.minutos/90),
    j.stats.pasesClave,
    j.stats.duelos,
    j.stats.asistencias/(j.stats.minutos/90)
  ];
  const radarPct = radarVals.map((v,i) => Math.min(v/radarMax[i],1));
  const radarLabels = ['Goles/90','Regates','xG/90','Pases clave','Duelos','Asist/90'];
  const radarSvg = buildRadar(radarPct, radarLabels, j.color);

  const profile = document.getElementById('playerProfile');
  profile.innerHTML = `
    <div class="profile-back" onclick="hideProfile()">← Volver a jugadores</div>

    <div class="profile-hero">
      <div class="ph-avatar" style="background:${j.color}">${j.avatar}</div>
      <div class="ph-info">
        <h2>${j.name}</h2>
        <p>${j.team} · ${j.league}</p>
        <div class="ph-badges">
          <span class="ph-badge pos">${j.pos}</span>
          <span class="ph-badge">${j.nat}</span>
          <span class="ph-badge">${j.age} años</span>
          <span class="ph-badge">Pie ${j.foot}</span>
        </div>
      </div>
      <div class="ph-quickstats">
        <div class="ph-qs"><div class="ph-qs-val">${j.stats.goles}</div><div class="ph-qs-label">Goles</div></div>
        <div class="ph-qs"><div class="ph-qs-val">${j.stats.asistencias}</div><div class="ph-qs-label">Asistencias</div></div>
        <div class="ph-qs"><div class="ph-qs-val">${j.stats.xG}</div><div class="ph-qs-label">xG</div></div>
      </div>
    </div>

    <div class="profile-grid">
      <div class="profile-left">

        <div class="card">
          <div class="card-head"><h3>Estadísticas de temporada</h3></div>
          <div class="card-body">
            <div class="stats-grid">
              ${[
                ['Goles', j.stats.goles, 30],
                ['Asistencias', j.stats.asistencias, 20],
                ['xG', j.stats.xG, 30],
                ['Minutos', j.stats.minutos, 3420],
                ['Remates', j.stats.remates, 130],
                ['Pases clave', j.stats.pasesClave, 150],
                ['Regates', j.stats.regates, 150],
                ['Duelos', j.stats.duelos, 150],
              ].map(([label,val,max])=>`
                <div class="stat-box">
                  <div class="stat-box-val">${val}</div>
                  <div class="stat-box-label">${label}</div>
                  <div class="stat-bar-wrap"><div class="stat-bar-track"><div class="stat-bar-fill" style="width:${Math.min(val/max*100,100).toFixed(0)}%"></div></div></div>
                </div>`).join('')}
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-head"><h3>Evolución — Últimos 8 partidos</h3></div>
          <div class="card-body">
            ${buildEvoChart(j)}
          </div>
        </div>

        <div class="card">
          <div class="card-head"><h3>Registro de partidos</h3></div>
          <table class="match-log-table">
            <thead><tr><th>Fecha</th><th>Rival</th><th>Res.</th><th>⚽</th><th>🅰️</th><th>Min.</th></tr></thead>
            <tbody>
              ${j.matches.map(m=>`
                <tr>
                  <td style="color:var(--text-light);font-size:.78rem">${m.date}</td>
                  <td>${m.rival}</td>
                  <td><span class="res-badge res-${m.res.toLowerCase()}">${m.res}</span> <span style="font-size:.78rem;color:var(--text-light)">${m.score}</span></td>
                  <td style="font-weight:500">${m.goles || '—'}</td>
                  <td style="color:var(--text-mid)">${m.asist || '—'}</td>
                  <td style="color:var(--text-light)">${m.mins}'</td>
                </tr>`).join('')}
            </tbody>
          </table>
        </div>

      </div>

      <div class="profile-right">
        <div class="card">
          <div class="card-head"><h3>Radar de rendimiento</h3></div>
          <div class="card-body radar-wrap">${radarSvg}</div>
        </div>

        <div class="card">
          <div class="card-head"><h3>Datos personales</h3></div>
          ${[
            ['Nombre completo', j.name],
            ['Equipo', j.team],
            ['Liga', j.league],
            ['Posición', j.pos],
            ['Edad', j.age + ' años'],
            ['Nacionalidad', j.nat],
            ['Pie hábil', j.foot],
            ['Goles/90\'', g90],
            ['Asist./90\'', a90],
          ].map(([l,v])=>`<div class="personal-row"><span class="pr-label">${l}</span><span class="pr-val">${v}</span></div>`).join('')}
        </div>
      </div>
    </div>
  `;

  profile.classList.add('active');
  window.scrollTo(0, 0);
}

function hideProfile() {
  document.getElementById('playerProfile').classList.remove('active');
  document.getElementById('playerProfile').innerHTML = '';
  document.getElementById('playersGrid').classList.remove('hidden');
  document.getElementById('searchSection').classList.remove('condensed');
  currentPlayer = null;
}

// ── RADAR ─────────────────────────────────────────────────────────────────────
function buildRadar(pcts, labels, color) {
  const cx=130, cy=130, r=90, n=pcts.length;
  const angle = i => (Math.PI*2/n)*i - Math.PI/2;
  const pt = (pct,i) => {
    const a=angle(i), d=r*pct;
    return [cx+Math.cos(a)*d, cy+Math.sin(a)*d];
  };
  const ptOuter = i => [cx+Math.cos(angle(i))*r, cy+Math.sin(angle(i))*r];

  // Grid circles
  let svg = `<svg class="radar" width="260" height="260" viewBox="0 0 260 260">`;
  [0.25,0.5,0.75,1].forEach(f=>{
    const pts = Array.from({length:n},(_,i)=>ptOuter(i).map(v=>cx+(v-cx)*f+','+((cy+(v-cy)*f))).join(' '));
    const polyPts = Array.from({length:n},(_,i)=>{const a=angle(i),d=r*f;return `${cx+Math.cos(a)*d},${cy+Math.sin(a)*d}`;}).join(' ');
    svg += `<polygon points="${polyPts}" fill="none" stroke="#e2ddd6" stroke-width="1"/>`;
  });
  // Axes
  for(let i=0;i<n;i++){const[x,y]=ptOuter(i);svg+=`<line x1="${cx}" y1="${cy}" x2="${x}" y2="${y}" stroke="#e2ddd6" stroke-width="1"/>`;}
  // Data polygon
  const dataPts = pcts.map((_,i)=>pt(pcts[i],i).join(',')).join(' ');
  svg += `<polygon points="${dataPts}" fill="${color}" fill-opacity="0.15" stroke="${color}" stroke-width="2"/>`;
  // Dots
  pcts.forEach((p,i)=>{const[x,y]=pt(p,i);svg+=`<circle cx="${x}" cy="${y}" r="4" fill="${color}"/>`;});
  // Labels
  labels.forEach((l,i)=>{
    const[x,y]=ptOuter(i);
    const lx=cx+(x-cx)*1.22, ly=cy+(y-cy)*1.22;
    svg+=`<text x="${lx}" y="${ly}" text-anchor="middle" dominant-baseline="middle" font-size="9" fill="#9a9a90" font-family="Geist,sans-serif">${l}</text>`;
  });
  svg += '</svg>';
  return svg;
}

// ── EVO CHART ─────────────────────────────────────────────────────────────────
function buildEvoChart(j) {
  const data = [...j.matches].reverse();
  const maxG = Math.max(...data.map(m=>m.goles),1);
  const W=520, H=80, pad=20;
  const xStep=(W-pad*2)/(data.length-1);

  const gPts = data.map((m,i)=>`${pad+i*xStep},${H-pad-(m.goles/maxG)*(H-pad*2)}`).join(' ');
  const aPts = data.map((m,i)=>`${pad+i*xStep},${H-pad-(m.asist/maxG)*(H-pad*2)}`).join(' ');

  const resColors = {W:'#16a34a',D:'#d97706',L:'#dc2626'};

  let svg = `<svg viewBox="0 0 ${W} ${H+30}" width="100%" style="overflow:visible">`;
  // Gridlines
  svg += `<line x1="${pad}" y1="${pad}" x2="${pad}" y2="${H-pad}" stroke="#e2ddd6" stroke-width="1"/>`;
  svg += `<line x1="${pad}" y1="${H-pad}" x2="${W-pad}" y2="${H-pad}" stroke="#e2ddd6" stroke-width="1"/>`;
  // Result dots at bottom
  data.forEach((m,i)=>{
    svg+=`<circle cx="${pad+i*xStep}" cy="${H+8}" r="7" fill="${resColors[m.res]}"/>`;
    svg+=`<text x="${pad+i*xStep}" y="${H+12}" text-anchor="middle" font-size="7" fill="white" font-family="Geist">${m.res}</text>`;
    svg+=`<text x="${pad+i*xStep}" y="${H+26}" text-anchor="middle" font-size="7" fill="#9a9a90" font-family="Geist">${m.rival.slice(0,6)}</text>`;
  });
  // Lines
  svg+=`<polyline points="${gPts}" fill="none" stroke="#c4601a" stroke-width="2.5" stroke-linejoin="round"/>`;
  svg+=`<polyline points="${aPts}" fill="none" stroke="#4a6350" stroke-width="2" stroke-linejoin="round" stroke-dasharray="4,3"/>`;
  // Dots
  data.forEach((m,i)=>{
    svg+=`<circle cx="${pad+i*xStep}" cy="${H-pad-(m.goles/maxG)*(H-pad*2)}" r="4" fill="#c4601a"/>`;
    svg+=`<circle cx="${pad+i*xStep}" cy="${H-pad-(m.asist/maxG)*(H-pad*2)}" r="3.5" fill="#4a6350"/>`;
  });
  // Legend
  svg+=`<circle cx="${pad}" cy="${H+42}" r="4" fill="#c4601a"/><text x="${pad+8}" y="${H+46}" font-size="9" fill="#5a5a54" font-family="Geist">Goles</text>`;
  svg+=`<circle cx="${pad+60}" cy="${H+42}" r="4" fill="#4a6350"/><text x="${pad+68}" y="${H+46}" font-size="9" fill="#5a5a54" font-family="Geist">Asistencias</text>`;
  svg+='</svg>';
  return svg;
}

// ── SEARCH ───────────────────────────────────────────────────────────────────
const searchInput = document.getElementById('searchInput');
const searchDropdown = document.getElementById('searchDropdown');
const searchClear = document.getElementById('searchClear');

searchInput.addEventListener('input', function() {
  const q = this.value.trim();
  currentSearch = q;
  searchClear.style.display = q ? 'block' : 'none';

  if (q.length < 2) { searchDropdown.style.display='none'; renderGrid(); return; }

  const results = JUGADORES.filter(j =>
    j.name.toLowerCase().includes(q.toLowerCase()) ||
    j.team.toLowerCase().includes(q.toLowerCase())
  ).slice(0,6);

  if (results.length === 0) {
    searchDropdown.innerHTML = '<div class="dropdown-empty">No se encontraron jugadores</div>';
  } else {
    searchDropdown.innerHTML = results.map(j=>`
      <div class="dropdown-item" onclick="showProfile('${j.id}')">
        <div class="di-avatar" style="background:${j.color}">${j.avatar}</div>
        <div>
          <div class="di-name">${j.name}</div>
          <div class="di-meta">${j.pos} · ${j.team}</div>
        </div>
        <span class="di-league">${j.league}</span>
      </div>`).join('');
  }
  searchDropdown.style.display='block';
  renderGrid();
});

searchClear.addEventListener('click', function() {
  searchInput.value=''; currentSearch='';
  this.style.display='none';
  searchDropdown.style.display='none';
  renderGrid();
});

document.addEventListener('click', function(e) {
  if (!e.target.closest('.search-wrap')) searchDropdown.style.display='none';
});

// ── FILTER BUTTONS ────────────────────────────────────────────────────────────
document.querySelectorAll('.filter-btn').forEach(btn => {
  btn.addEventListener('click', function() {
    document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
    this.classList.add('active');
    currentFilter = this.dataset.filter;
    renderGrid();
  });
});

// ── CHAT IA ───────────────────────────────────────────────────────────────────
let chatHistory = [];
let chatApiKey = localStorage.getItem('sc_api_key') || '';

function initChatUI() {
  if (chatApiKey) {
    document.getElementById('chatApiBadge').textContent = 'Lista ✓';
    document.getElementById('chatApiBadge').style.background = 'var(--success-light)';
    document.getElementById('chatApiBadge').style.color = 'var(--success)';
    document.getElementById('chatApiKeyInput').value = chatApiKey;
    document.getElementById('chatApiKeySection').style.display = 'none';
  }
}

function toggleChatIA() {
  const wrap = document.getElementById('chatIAWrap');
  const arrow = document.getElementById('chatToggleArrow');
  const visible = wrap.style.display !== 'none';
  wrap.style.display = visible ? 'none' : 'block';
  arrow.textContent = visible ? '▼' : '▲';
}

function saveChatApiKey() {
  const key = document.getElementById('chatApiKeyInput').value.trim();
  if (!key || !key.startsWith('sk-ant')) {
    alert('API key inválida'); return;
  }
  chatApiKey = key;
  localStorage.setItem('sc_api_key', key);
  document.getElementById('chatApiBadge').textContent = 'Lista ✓';
  document.getElementById('chatApiBadge').style.background = 'var(--success-light)';
  document.getElementById('chatApiBadge').style.color = 'var(--success)';
  document.getElementById('chatApiKeySection').style.display = 'none';
}

function appendMessage(role, text) {
  const wrap = document.getElementById('chatMessages');
  const isUser = role === 'user';

  // Remove placeholder
  const placeholder = wrap.querySelector('[data-placeholder]');
  if (placeholder) placeholder.remove();

  const div = document.createElement('div');
  div.style.cssText = `display:flex;gap:8px;align-items:flex-start;${isUser ? 'flex-direction:row-reverse' : ''}`;

  const avatar = document.createElement('div');
  avatar.textContent = isUser ? '👤' : '🤖';
  avatar.style.cssText = 'font-size:1rem;flex-shrink:0;margin-top:2px';

  const bubble = document.createElement('div');
  bubble.style.cssText = `max-width:80%;padding:10px 13px;border-radius:10px;font-size:.83rem;line-height:1.55;${isUser ? 'background:var(--accent);color:#fff;border-bottom-right-radius:3px' : 'background:var(--bg2);color:var(--text);border-bottom-left-radius:3px'}`;

  // Basic markdown
  bubble.innerHTML = text
    .replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>')
    .replace(/\n/g, '<br>');

  div.appendChild(avatar);
  div.appendChild(bubble);
  wrap.appendChild(div);
  wrap.scrollTop = wrap.scrollHeight;
  return div;
}

async function sendChatMessage() {
  if (!chatApiKey) {
    document.getElementById('chatApiKeySection').style.display = 'block';
    document.getElementById('chatIAWrap').style.display = 'block';
    return;
  }

  const input = document.getElementById('chatInput');
  const msg = input.value.trim();
  if (!msg) return;

  input.value = '';
  appendMessage('user', msg);
  chatHistory.push({ role: 'user', content: msg });

  // Typing indicator
  const typing = appendMessage('assistant', '...');
  typing.querySelector('div:last-child').style.opacity = '0.5';

  // Build context from JUGADORES data
  const jugadoresContext = JUGADORES.map(j =>
    `${j.name} (${j.team}, ${j.league}, ${j.pos}, ${j.age} años): ${j.stats.goles}G ${j.stats.asistencias}A ${j.stats.xG}xG en la temporada actual`
  ).join('\n');

  const systemPrompt = `Sos un experto en análisis de fútbol que conoce a fondo a los jugadores de las principales ligas europeas y la Liga Profesional Argentina. Respondés en español rioplatense, de manera directa y apasionada como hablaría un analista táctico argentino.

Tenés acceso a estos datos de la temporada actual:
${jugadoresContext}

Cuando el usuario pregunta por un jugador, usá estos datos concretos. Podés complementar con tu conocimiento general sobre el jugador. Sé específico, usá números reales, y dá tu opinión táctica cuando corresponda. Respuestas concisas pero sustanciosas.`;

  try {
    const response = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-api-key': chatApiKey,
        'anthropic-version': '2023-06-01',
        'anthropic-dangerous-direct-browser-access': 'true'
      },
      body: JSON.stringify({
        model: 'claude-sonnet-4-20250514',
        max_tokens: 600,
        system: systemPrompt,
        messages: chatHistory
      })
    });

    typing.remove();

    if (!response.ok) {
      const err = await response.json().catch(()=>({}));
      appendMessage('assistant', `⚠ Error: ${err.error?.message || 'Error de API'}`);
      chatHistory.pop();
      return;
    }

    const data = await response.json();
    const reply = data.content[0].text;
    chatHistory.push({ role: 'assistant', content: reply });
    appendMessage('assistant', reply);

    // Keep history manageable
    if (chatHistory.length > 20) chatHistory = chatHistory.slice(-20);

  } catch(err) {
    typing.remove();
    appendMessage('assistant', `⚠ Sin conexión: ${err.message}`);
    chatHistory.pop();
  }
}

// ── INIT ─────────────────────────────────────────────────────────────────────
renderGrid();
initChatUI();

  if(typeof showProfile!="undefined")window.SC_jugadores_showProfile=showProfile;
  if(typeof hideProfile!="undefined")window.SC_jugadores_hideProfile=hideProfile;
  if(typeof toggleChatIA!="undefined")window.SC_jugadores_toggleChatIA=toggleChatIA;
  if(typeof saveChatApiKey!="undefined")window.SC_jugadores_saveChatApiKey=saveChatApiKey;
  if(typeof sendChatMessage!="undefined")window.SC_jugadores_sendChatMessage=sendChatMessage;
})();</script>
<script type="text/sc-page" id="js-equipo">(function(){
function _t(m,t){gToast(m,t);}

  // ── SQUAD DATA ────────────────────────────────────
  const squad = [
    { num:1,  name:'Courtois',   pos:'POR', cat:'POR', color:'#1a3a6b', stat:'8 PC' },
    { num:13, name:'Lunin',      pos:'POR', cat:'POR', color:'#1a3a6b', stat:'3 PC' },
    { num:2,  name:'Carvajal',   pos:'LD',  cat:'DEF', color:'#2a3a6b', stat:'3 as.' },
    { num:3,  name:'Militão',    pos:'CB',  cat:'DEF', color:'#2a3a6b', stat:'2 goles' },
    { num:4,  name:'Alaba',      pos:'CB',  cat:'DEF', color:'#2a3a6b', stat:'lesión' },
    { num:5,  name:'Bellingham', pos:'MO',  cat:'MED', color:'#2a4a6b', stat:'12 goles' },
    { num:6,  name:'Nacho',      pos:'CB',  cat:'DEF', color:'#2a3a6b', stat:'1 gol' },
    { num:7,  name:'Vinícius',   pos:'EI',  cat:'DEL', color:'#c4601a', stat:'22 goles' },
    { num:8,  name:'Kroos',      pos:'MC',  cat:'MED', color:'#2a4a6b', stat:'9 as.' },
    { num:9,  name:'Mbappé',     pos:'DC',  cat:'DEL', color:'#c4601a', stat:'17 goles' },
    { num:10, name:'Modrić',     pos:'MC',  cat:'MED', color:'#2a4a6b', stat:'5 as.' },
    { num:11, name:'Rodrygo',    pos:'ED',  cat:'DEL', color:'#c4601a', stat:'8 goles' },
    { num:14, name:'Joselu',     pos:'DC',  cat:'DEL', color:'#c4601a', stat:'4 goles' },
    { num:15, name:'Valverde',   pos:'MC',  cat:'MED', color:'#2a4a6b', stat:'6 goles' },
    { num:17, name:'Lucas V.',   pos:'ED',  cat:'DEL', color:'#c4601a', stat:'3 goles' },
    { num:18, name:'Tchouameni',pos:'MCD', cat:'MED', color:'#2a4a6b', stat:'2 goles' },
    { num:20, name:'Fran García',pos:'LI',  cat:'DEF', color:'#2a3a6b', stat:'2 as.' },
    { num:22, name:'Camavinga',  pos:'MC',  cat:'MED', color:'#2a4a6b', stat:'4 as.' },
    { num:23, name:'Mendy',      pos:'LI',  cat:'DEF', color:'#2a3a6b', stat:'lesión' },
    { num:24, name:'Güler',      pos:'MO',  cat:'MED', color:'#2a4a6b', stat:'3 goles' },
  ];

  const squadGrid = document.getElementById('squadGrid');

  function renderSquad(filter) {
    squadGrid.innerHTML = '';
    squad.filter(p => filter === 'all' || p.cat === filter).forEach(p => {
      const card = document.createElement('div');
      card.className = 'player-card';
      card.dataset.cat = p.cat;
      card.innerHTML = `
        <div class="player-card-num">#${p.num}</div>
        <div class="player-card-avatar" style="background:${p.color}">${p.name.slice(0,2).toUpperCase()}</div>
        <div class="player-card-name">${p.name}</div>
        <div class="player-card-pos">${p.pos}</div>
        <div class="player-card-stat">${p.stat}</div>
      `;
      squadGrid.appendChild(card);
    });
  }

  renderSquad('all');

  function filterSquad(cat, btn) {
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    renderSquad(cat);
  }

  // ── RESULTS DATA ──────────────────────────────────
  const results = [
    { rival:'Sevilla',    rivalB:'SEV', rivalC:'#d4a017', home:true,  hg:3, ag:1, res:'W', comp:'LaLiga J28' },
    { rival:'Man City',   rivalB:'MCI', rivalC:'#6cb4e4', home:false, hg:1, ag:3, res:'W', comp:'Champions' },
    { rival:'Getafe',     rivalB:'GET', rivalC:'#003f7f', home:false, hg:2, ag:0, res:'W', comp:'LaLiga J27' },
    { rival:'Barcelona',  rivalB:'FCB', rivalC:'#a50044', home:true,  hg:2, ag:2, res:'D', comp:'LaLiga J26' },
    { rival:'Atlético',   rivalB:'ATM', rivalC:'#cb3524', home:false, hg:0, ag:1, res:'L', comp:'LaLiga J25' },
  ];

  const resList = document.getElementById('resultsList');
  results.forEach(r => {
    const item = document.createElement('div');
    item.className = 'result-item';
    const rmWin = r.home ? r.hg > r.ag : r.ag > r.hg;
    const pillClass = r.res === 'W' ? 'pill-w' : r.res === 'D' ? 'pill-d' : 'pill-l';
    const pillLabel = r.res === 'W' ? 'Victoria' : r.res === 'D' ? 'Empate' : 'Derrota';
    if (r.home) {
      item.innerHTML = `
        <div class="result-team">
          <div class="result-badge" style="background:#1a3a6b">RM</div>
          <span style="font-weight:500">Real Madrid</span>
        </div>
        <div class="result-score">
          <div class="score-main">${r.hg} — ${r.ag}</div>
          <div class="score-meta">${r.comp}</div>
          <span class="result-pill ${pillClass}">${pillLabel}</span>
        </div>
        <div class="result-team away">
          <div class="result-badge" style="background:${r.rivalC}">${r.rivalB}</div>
          <span>${r.rival}</span>
        </div>
      `;
    } else {
      item.innerHTML = `
        <div class="result-team">
          <div class="result-badge" style="background:${r.rivalC}">${r.rivalB}</div>
          <span>${r.rival}</span>
        </div>
        <div class="result-score">
          <div class="score-main">${r.hg} — ${r.ag}</div>
          <div class="score-meta">${r.comp}</div>
          <span class="result-pill ${pillClass}">${pillLabel}</span>
        </div>
        <div class="result-team away">
          <div class="result-badge" style="background:#1a3a6b">RM</div>
          <span style="font-weight:500">Real Madrid</span>
        </div>
      `;
    }
    resList.appendChild(item);
  });

  // ── UPCOMING DATA ─────────────────────────────────
  const upcoming = [
    { rival:'Barcelona',  rivalB:'FCB', rivalC:'#a50044', home:false, day:'Sáb 1 Mar', time:'21:00', comp:'LaLiga J29' },
    { rival:'Leipzig',    rivalB:'RBL', rivalC:'#cc0000', home:true,  day:'Mié 5 Mar', time:'21:00', comp:'Champions' },
    { rival:'Alavés',     rivalB:'ALA', rivalC:'#003f7f', home:true,  day:'Dom 9 Mar', time:'16:15', comp:'LaLiga J30' },
    { rival:'Celta Vigo', rivalB:'CEL', rivalC:'#6cb4e4', home:false, day:'Sáb 15 Mar', time:'18:30', comp:'LaLiga J31' },
  ];

  const upList = document.getElementById('upcomingList');
  upcoming.forEach(u => {
    const item = document.createElement('div');
    item.className = 'upcoming-item';
    if (u.home) {
      item.innerHTML = `
        <div class="result-team"><div class="result-badge" style="background:#1a3a6b">RM</div><span style="font-weight:500">Real Madrid</span></div>
        <div class="upcoming-center"><div class="upcoming-day">${u.day}</div><div class="upcoming-time">${u.time}</div><div class="upcoming-comp">${u.comp}</div></div>
        <div class="result-team away"><div class="result-badge" style="background:${u.rivalC}">${u.rivalB}</div><span>${u.rival}</span></div>
      `;
    } else {
      item.innerHTML = `
        <div class="result-team"><div class="result-badge" style="background:${u.rivalC}">${u.rivalB}</div><span>${u.rival}</span></div>
        <div class="upcoming-center"><div class="upcoming-day">${u.day}</div><div class="upcoming-time">${u.time}</div><div class="upcoming-comp">${u.comp}</div></div>
        <div class="result-team away"><div class="result-badge" style="background:#1a3a6b">RM</div><span style="font-weight:500">Real Madrid</span></div>
      `;
    }
    upList.appendChild(item);
  });

  // ── PERFORMANCE CHART ─────────────────────────────
  const jornadas = ['J1','J4','J8','J12','J16','J20','J24','J28'];
  const rmPts  = [9, 21, 33, 40, 48, 54, 59, 62];
  const barcaPts = [9, 18, 27, 36, 44, 50, 55, 58];
  const atletiPts = [7, 16, 25, 34, 42, 47, 52, 56];

  const svg = document.getElementById('perfChart');
  const W = 620, H = 160, pad = 28, maxPts = 70;

  // Grid
  [0,20,40,60].forEach(v => {
    const y = H - pad - (v / maxPts) * (H - pad*2);
    const line = document.createElementNS('http://www.w3.org/2000/svg','line');
    line.setAttribute('x1', pad); line.setAttribute('x2', W-pad);
    line.setAttribute('y1', y); line.setAttribute('y2', y);
    line.setAttribute('stroke','#e2ddd6'); line.setAttribute('stroke-width','1');
    svg.appendChild(line);
    const t = document.createElementNS('http://www.w3.org/2000/svg','text');
    t.setAttribute('x', pad-4); t.setAttribute('y', y+4);
    t.setAttribute('text-anchor','end'); t.setAttribute('font-size','9');
    t.setAttribute('fill','#9a9a90'); t.setAttribute('font-family','Geist');
    t.textContent = v;
    svg.appendChild(t);
  });

  const xStep = (W - pad*2) / (jornadas.length - 1);

  const drawLine = (data, color, width=2) => {
    let d = '';
    data.forEach((v,i) => {
      const x = pad + i * xStep;
      const y = H - pad - (v / maxPts) * (H - pad*2);
      d += (i===0 ? `M ${x} ${y}` : ` L ${x} ${y}`);
    });
    const path = document.createElementNS('http://www.w3.org/2000/svg','path');
    path.setAttribute('d', d); path.setAttribute('fill','none');
    path.setAttribute('stroke', color); path.setAttribute('stroke-width', width);
    path.setAttribute('stroke-linejoin','round'); path.setAttribute('stroke-linecap','round');
    svg.appendChild(path);

    // Last dot
    const lastX = pad + (data.length-1) * xStep;
    const lastY = H - pad - (data[data.length-1] / maxPts) * (H - pad*2);
    const dot = document.createElementNS('http://www.w3.org/2000/svg','circle');
    dot.setAttribute('cx', lastX); dot.setAttribute('cy', lastY);
    dot.setAttribute('r', 4); dot.setAttribute('fill', color);
    svg.appendChild(dot);
  };

  drawLine(atletiPts, '#ccc8be', 1.5);
  drawLine(barcaPts, '#4a6350', 1.5);
  drawLine(rmPts, '#c4601a', 2.5);

  // X labels
  const xLabels = document.getElementById('xLabels');
  jornadas.forEach(j => {
    const span = document.createElement('span');
    span.className = 'x-label';
    span.textContent = j;
    xLabels.appendChild(span);
  });

  // Tabs
  document.querySelectorAll('.tab').forEach(tab => {
    tab.addEventListener('click', () => {
      document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
    });
  });

  if(typeof filterSquad!="undefined")window.SC_equipo_filterSquad=filterSquad;
})();</script>
<script type="text/sc-page" id="js-comparar">(function(){
function _t(m,t){gToast(m,t);}

  // ── DATA ──────────────────────────────────────────
  const jugadores = [
    {
      name: 'Vinícius Jr.', initials: 'VJ', color: '#c4601a',
      team: 'Real Madrid', pos: 'Extremo izquierdo',
      stats: { 'Goles': 22, 'Asistencias': 8, 'xG': 18.4, 'xA': 6.9, 'Remates': 74, 'Pases clave': 41, 'Regates exitosos': 68, 'Goles por 90\'': 0.91, 'Minutos': 2180, 'Partidos': 26 },
      radar: [0.91, 0.75, 0.92, 0.68, 0.52, 0.85],
      evo: [1,2,1,3,0,2,1,2,0,2,1,2,1,0,2]
    },
    {
      name: 'Lewandowski', initials: 'RL', color: '#4a6350',
      team: 'Barcelona', pos: 'Delantero centro',
      stats: { 'Goles': 19, 'Asistencias': 5, 'xG': 17.1, 'xA': 4.2, 'Remates': 82, 'Pases clave': 22, 'Regates exitosos': 18, 'Goles por 90\'': 0.76, 'Minutos': 2250, 'Partidos': 27 },
      radar: [0.76, 0.40, 0.65, 0.45, 0.70, 0.82],
      evo: [2,1,2,0,1,2,0,3,1,1,0,2,1,1,1]
    },
    {
      name: 'Mbappé', initials: 'KM', color: '#1a3a6b',
      team: 'Real Madrid', pos: 'Delantero centro',
      stats: { 'Goles': 17, 'Asistencias': 6, 'xG': 15.8, 'xA': 5.1, 'Remates': 68, 'Pases clave': 28, 'Regates exitosos': 45, 'Goles por 90\'': 0.81, 'Minutos': 1890, 'Partidos': 24 },
      radar: [0.81, 0.60, 0.88, 0.52, 0.58, 0.78],
      evo: [1,1,2,1,0,1,2,1,1,0,2,1,0,2,1]
    },
    {
      name: 'Griezmann', initials: 'AG', color: '#cb3524',
      team: 'Atlético Madrid', pos: 'Mediapunta',
      stats: { 'Goles': 14, 'Asistencias': 9, 'xG': 12.4, 'xA': 8.1, 'Remates': 55, 'Pases clave': 52, 'Regates exitosos': 32, 'Goles por 90\'': 0.62, 'Minutos': 2030, 'Partidos': 26 },
      radar: [0.62, 0.50, 0.72, 0.82, 0.55, 0.66],
      evo: [1,0,1,2,0,1,1,0,2,1,0,1,2,0,1]
    },
  ];

  const equipos = [
    {
      name: 'Real Madrid', initials: 'RM', color: '#1a3a6b',
      team: 'LaLiga · 1°', pos: 'Carlo Ancelotti',
      stats: { 'Puntos': 62, 'Goles anotados': 62, 'Goles encajados': 28, 'xG': 58.4, 'Posesión %': 58, 'Remates/partido': 14.2, 'Victorias': 19, 'Porterías a 0': 10, 'Pases completados %': 87, 'Partidos jugados': 28 },
      radar: [0.88, 0.80, 0.92, 0.75, 0.82, 0.70],
      evo: [3,2,3,1,3,2,3,2,3,3,2,3,1,3,2]
    },
    {
      name: 'Barcelona', initials: 'FCB', color: '#a50044',
      team: 'LaLiga · 2°', pos: 'Hansi Flick',
      stats: { 'Puntos': 58, 'Goles anotados': 58, 'Goles encajados': 34, 'xG': 54.1, 'Posesión %': 62, 'Remates/partido': 13.1, 'Victorias': 18, 'Porterías a 0': 7, 'Pases completados %': 89, 'Partidos jugados': 28 },
      radar: [0.83, 0.72, 0.80, 0.85, 0.78, 0.65],
      evo: [3,2,2,3,1,3,2,3,2,2,3,2,3,1,2]
    },
    {
      name: 'Atlético Madrid', initials: 'ATM', color: '#cb3524',
      team: 'LaLiga · 3°', pos: 'Diego Simeone',
      stats: { 'Puntos': 56, 'Goles anotados': 49, 'Goles encajados': 29, 'xG': 46.2, 'Posesión %': 48, 'Remates/partido': 11.4, 'Victorias': 17, 'Porterías a 0': 11, 'Pases completados %': 82, 'Partidos jugados': 28 },
      radar: [0.80, 0.55, 0.70, 0.60, 0.88, 0.72],
      evo: [2,3,1,3,2,2,3,1,3,2,3,2,1,3,2]
    },
  ];

  let mode = 'jugadores';
  let idx1 = 0, idx2 = 1;

  function getData() { return mode === 'jugadores' ? jugadores : equipos; }

  function setMode(m) {
    mode = m;
    idx1 = 0; idx2 = 1;
    document.getElementById('modeJugadores').classList.toggle('active', m === 'jugadores');
    document.getElementById('modeEquipos').classList.toggle('active', m === 'equipos');
    const label = m === 'jugadores' ? '↔ Cambiar jugador' : '↔ Cambiar equipo';
    document.querySelectorAll('.selector-change').forEach(el => el.textContent = label);
    render();
  }

  function cyclePlayer(which) {
    const data = getData();
    if (which === 0) idx1 = (idx1 + 1) % data.length;
    else idx2 = (idx2 + 1) % data.length;
    if (idx1 === idx2) {
      if (which === 0) idx1 = (idx1 + 1) % data.length;
      else idx2 = (idx2 + 1) % data.length;
    }
    render();
  }

  function render() {
    const data = getData();
    const p1 = data[idx1], p2 = data[idx2];

    // Selectors
    document.getElementById('avatar1').textContent = p1.initials;
    document.getElementById('avatar1').style.background = p1.color;
    document.getElementById('name1').textContent = p1.name;
    document.getElementById('sub1').textContent = `${p1.team} · ${p1.pos}`;
    document.getElementById('avatar2').textContent = p2.initials;
    document.getElementById('avatar2').style.background = p2.color;
    document.getElementById('name2').textContent = p2.name;
    document.getElementById('sub2').textContent = `${p2.team} · ${p2.pos}`;
    document.getElementById('tableHeader1').textContent = p1.name;
    document.getElementById('tableHeader1').style.color = p1.color;
    document.getElementById('tableHeader2').textContent = p2.name;
    document.getElementById('tableHeader2').style.color = p2.color;
    document.getElementById('radar1name').textContent = p1.name;
    document.getElementById('radar2name').textContent = p2.name;
    document.getElementById('evoLeg1').textContent = p1.name;
    document.getElementById('evoLeg2').textContent = p2.name;

    renderWinners(p1, p2);
    renderTable(p1, p2);
    renderRadar('radar1', p1.radar, p1.color);
    renderRadar('radar2', p2.radar, p2.color);
    renderEvo(p1, p2);
  }

  // ── WINNERS ───────────────────────────────────────
  const winCategories = [
    { key: 'Goles',           label: 'Goles', higher: true },
    { key: 'Asistencias',     label: 'Asistencias', higher: true },
    { key: 'xG',              label: 'Expected Goals', higher: true },
    { key: 'Remates',         label: 'Remates totales', higher: true },
    { key: 'Pases clave',     label: 'Pases clave', higher: true },
    { key: "Goles por 90'",   label: 'Goles por 90\'', higher: true },
    { key: 'Minutos',         label: 'Minutos jugados', higher: false },
    { key: 'Regates exitosos',label: 'Regates exitosos', higher: true },
  ];

  const winCategoriesEq = [
    { key: 'Puntos', label: 'Puntos', higher: true },
    { key: 'Goles anotados', label: 'Goles anotados', higher: true },
    { key: 'Goles encajados', label: 'Goles encajados', higher: false },
    { key: 'xG', label: 'xG temporada', higher: true },
    { key: 'Posesión %', label: 'Posesión media', higher: true },
    { key: 'Victorias', label: 'Victorias', higher: true },
    { key: 'Porterías a 0', label: 'Porterías a cero', higher: true },
    { key: 'Pases completados %', label: 'Precisión de pase', higher: true },
  ];

  function renderWinners(p1, p2) {
    const cats = mode === 'jugadores' ? winCategories : winCategoriesEq;
    const grid = document.getElementById('winnerGrid');
    grid.innerHTML = '';
    cats.forEach(cat => {
      const v1 = p1.stats[cat.key], v2 = p2.stats[cat.key];
      const p1wins = cat.higher ? v1 > v2 : v1 < v2;
      const winner = p1wins ? p1 : p2;
      const winVal = p1wins ? v1 : v2;
      const diff = Math.abs(v1 - v2).toFixed(1);
      const cell = document.createElement('div');
      cell.className = 'winner-cell';
      cell.innerHTML = `
        <div class="winner-category">${cat.label}</div>
        <div class="winner-badge" style="background:${winner.color}22; color:${winner.color}">
          ${winner.initials} ${winner.name}
        </div>
        <div class="winner-val" style="color:${winner.color}">${winVal}</div>
        <div class="winner-margin">+${diff} sobre el rival</div>
      `;
      grid.appendChild(cell);
    });
  }

  // ── STATS TABLE ───────────────────────────────────
  function renderTable(p1, p2) {
    const table = document.getElementById('statsTable');
    table.innerHTML = '';
    const allKeys = Object.keys(p1.stats);
    allKeys.forEach(key => {
      const v1 = p1.stats[key], v2 = p2.stats[key];
      const max = Math.max(v1, v2) || 1;
      const pct1 = (v1 / max) * 80;
      const pct2 = (v2 / max) * 80;
      const p1better = v1 >= v2;
      const tr = document.createElement('tr');
      tr.innerHTML = `
        <td class="col-p1" style="color:${p1better ? p1.color : 'var(--text)'}">${v1}</td>
        <td class="col-label">
          <div style="font-size:0.75rem; margin-bottom:6px; color:var(--text-mid)">${key}</div>
          <div class="stat-bars">
            <div class="bar-p1" style="width:${pct1}px; background:${p1.color}; opacity:${p1better?1:0.35}"></div>
            <div class="bar-p2" style="width:${pct2}px; background:${p2.color}; opacity:${!p1better?1:0.35}"></div>
          </div>
        </td>
        <td class="col-p2" style="color:${!p1better ? p2.color : 'var(--text)'}">${v2}</td>
      `;
      table.appendChild(tr);
    });
  }

  // ── RADAR ─────────────────────────────────────────
  const radarAxes = ['Goles/90','Regates','Velocidad','Pases clave','Duelos','xG/90'];

  function renderRadar(id, vals, color) {
    const svg = document.getElementById(id);
    svg.innerHTML = '';
    const n = radarAxes.length, R = 90;

    [0.25,0.5,0.75,1].forEach(r => {
      const c = document.createElementNS('http://www.w3.org/2000/svg','circle');
      c.setAttribute('cx',0); c.setAttribute('cy',0); c.setAttribute('r', R*r);
      c.setAttribute('fill','none'); c.setAttribute('stroke', r===1?'#ccc8be':'#e2ddd6'); c.setAttribute('stroke-width','1');
      svg.appendChild(c);
    });

    radarAxes.forEach((axis,i) => {
      const angle = (i/n)*2*Math.PI - Math.PI/2;
      const x = R*Math.cos(angle), y = R*Math.sin(angle);
      const line = document.createElementNS('http://www.w3.org/2000/svg','line');
      line.setAttribute('x1',0); line.setAttribute('y1',0);
      line.setAttribute('x2',x); line.setAttribute('y2',y);
      line.setAttribute('stroke','#e2ddd6'); line.setAttribute('stroke-width','1');
      svg.appendChild(line);
      const lx = (R+14)*Math.cos(angle), ly = (R+14)*Math.sin(angle);
      const t = document.createElementNS('http://www.w3.org/2000/svg','text');
      t.setAttribute('x',lx); t.setAttribute('y',ly+4);
      t.setAttribute('text-anchor','middle'); t.setAttribute('font-size','8');
      t.setAttribute('fill','#9a9a90'); t.setAttribute('font-family','Geist');
      t.textContent = axis;
      svg.appendChild(t);
    });

    const points = vals.map((v,i) => {
      const angle = (i/n)*2*Math.PI - Math.PI/2;
      return `${v*R*Math.cos(angle)},${v*R*Math.sin(angle)}`;
    }).join(' ');

    const poly = document.createElementNS('http://www.w3.org/2000/svg','polygon');
    poly.setAttribute('points', points);
    poly.setAttribute('fill', color); poly.setAttribute('fill-opacity','0.18');
    poly.setAttribute('stroke', color); poly.setAttribute('stroke-width','2');
    svg.appendChild(poly);

    vals.forEach((v,i) => {
      const angle = (i/n)*2*Math.PI - Math.PI/2;
      const dot = document.createElementNS('http://www.w3.org/2000/svg','circle');
      dot.setAttribute('cx', v*R*Math.cos(angle)); dot.setAttribute('cy', v*R*Math.sin(angle));
      dot.setAttribute('r','3.5'); dot.setAttribute('fill', color);
      svg.appendChild(dot);
    });
  }

  // ── EVOLUTION ─────────────────────────────────────
  function renderEvo(p1, p2) {
    const svg = document.getElementById('evoChart');
    svg.innerHTML = '';
    const labelsDiv = document.getElementById('evoLabels');
    labelsDiv.innerHTML = '';

    const jornadas = p1.evo.map((_,i) => `J${i+1}`);
    const cum1 = p1.evo.reduce((acc,v) => { acc.push((acc[acc.length-1]||0)+v); return acc; }, []);
    const cum2 = p2.evo.reduce((acc,v) => { acc.push((acc[acc.length-1]||0)+v); return acc; }, []);

    const W=640, H=170, pad=28;
    const maxVal = Math.max(...cum1, ...cum2);
    const xStep = (W-pad*2)/(jornadas.length-1);

    [0, Math.round(maxVal/2), maxVal].forEach(v => {
      const y = H-pad-(v/maxVal)*(H-pad*2);
      const line = document.createElementNS('http://www.w3.org/2000/svg','line');
      line.setAttribute('x1',pad); line.setAttribute('x2',W-pad);
      line.setAttribute('y1',y); line.setAttribute('y2',y);
      line.setAttribute('stroke','#e2ddd6'); line.setAttribute('stroke-width','1');
      svg.appendChild(line);
      const t = document.createElementNS('http://www.w3.org/2000/svg','text');
      t.setAttribute('x',pad-4); t.setAttribute('y',y+4);
      t.setAttribute('text-anchor','end'); t.setAttribute('font-size','9');
      t.setAttribute('fill','#9a9a90'); t.setAttribute('font-family','Geist');
      t.textContent = v;
      svg.appendChild(t);
    });

    const drawLine = (data, color) => {
      let d = '';
      data.forEach((v,i) => {
        const x = pad+i*xStep, y = H-pad-(v/maxVal)*(H-pad*2);
        d += (i===0?`M ${x} ${y}`:`L ${x} ${y}`);
      });
      const path = document.createElementNS('http://www.w3.org/2000/svg','path');
      path.setAttribute('d',d); path.setAttribute('fill','none');
      path.setAttribute('stroke',color); path.setAttribute('stroke-width','2.5');
      path.setAttribute('stroke-linejoin','round'); path.setAttribute('stroke-linecap','round');
      svg.appendChild(path);
      const lastX = pad+(data.length-1)*xStep;
      const lastY = H-pad-(data[data.length-1]/maxVal)*(H-pad*2);
      const dot = document.createElementNS('http://www.w3.org/2000/svg','circle');
      dot.setAttribute('cx',lastX); dot.setAttribute('cy',lastY);
      dot.setAttribute('r','4'); dot.setAttribute('fill',color);
      svg.appendChild(dot);
      const label = document.createElementNS('http://www.w3.org/2000/svg','text');
      label.setAttribute('x',lastX+6); label.setAttribute('y',lastY+4);
      label.setAttribute('font-size','10'); label.setAttribute('fill',color);
      label.setAttribute('font-family','Fraunces');
      label.textContent = data[data.length-1];
      svg.appendChild(label);
    };

    drawLine(cum2, p2.color);
    drawLine(cum1, p1.color);

    jornadas.forEach((j,i) => {
      if (i % 3 === 0) {
        const span = document.createElement('span');
        span.className = 'x-label';
        span.textContent = j;
        labelsDiv.appendChild(span);
      }
    });
  }

  // Init
  render();

  if(typeof setMode!="undefined")window.SC_comparar_setMode=setMode;
  if(typeof cyclePlayer!="undefined")window.SC_comparar_cyclePlayer=cyclePlayer;
})();</script>
<script type="text/sc-page" id="js-miequipo">(function(){
function _t(m,t){gToast(m,t);}

// ── INYECTAR MÉTRICAS CORE ───────────────────────────────────────────────────
// ═══════════════════════════════════════════════════════════════════
// STATCAMPO — SISTEMA DE MÉTRICAS POR POSICIÓN
// ═══════════════════════════════════════════════════════════════════

const POSICION_METRICAS = {

  POR: {
    label: 'Arquero',
    icon: '🧤',
    color: '#f59e0b',
    secciones: [
      {
        titulo: 'Control del área',
        metricas: [
          { id: 'cornersRecibidos', label: 'Córners recibidos', tipo: 'num', desc: 'Total de córners en contra' },
          { id: 'salidasAereas',    label: 'Salidas aéreas',   tipo: 'fraccion', partes: ['exitosas','intentadas'], desc: 'Salidas ganadas / intentadas' },
          { id: 'despejes',        label: 'Despejes',         tipo: 'num', desc: 'Pelotas despejadas con puño o pie' },
          { id: 'cruces',          label: 'Cruces dominados', tipo: 'fraccion', partes: ['ganados','disputados'], desc: 'Centros donde atrapó o despejó' },
        ]
      },
      {
        titulo: 'Atajadas y goles',
        metricas: [
          { id: 'atajadasTotal',   label: 'Atajadas totales',  tipo: 'num', desc: 'Remates detenidos' },
          { id: 'golesRecibidos',  label: 'Goles recibidos',   tipo: 'num', desc: '' },
          { id: 'unVsUno',         label: '1 vs 1 enfrentados',tipo: 'fraccion', partes: ['atajados','enfrentados'], desc: 'Situaciones mano a mano' },
          { id: 'penales',         label: 'Penales',           tipo: 'fraccion', partes: ['atajados','recibidos'], desc: '' },
        ]
      },
      {
        titulo: 'Juego con el pie',
        metricas: [
          { id: 'pasesCortos',  label: 'Pases cortos',  tipo: 'fraccion', partes: ['completados','intentados'], desc: 'Pases < 20m al compañero' },
          { id: 'pasesLargos',  label: 'Pases largos',  tipo: 'fraccion', partes: ['completados','intentados'], desc: 'Despejes dirigidos / pelotazos' },
          { id: 'salidaConPie', label: 'Salidas con pie',tipo: 'fraccion', partes: ['exitosas','intentadas'],   desc: 'Cuando salió a cortar fuera del área' },
        ]
      },
    ]
  },

  DC: {
    label: 'Defensa central',
    icon: '🛡️',
    color: '#3b82f6',
    secciones: [
      {
        titulo: 'Duelos defensivos',
        metricas: [
          { id: 'duelosAereos',    label: 'Duelos aéreos',     tipo: 'fraccion', partes: ['ganados','disputados'], desc: '' },
          { id: 'duelosTerrestre', label: 'Duelos terrestres', tipo: 'fraccion', partes: ['ganados','disputados'], desc: '' },
          { id: 'anticipaciones',  label: 'Anticipaciones',    tipo: 'num', desc: 'Cortó la pelota antes que el rival' },
          { id: 'entradas',        label: 'Entradas (tackles)',tipo: 'fraccion', partes: ['exitosas','intentadas'], desc: '' },
        ]
      },
      {
        titulo: 'Acciones defensivas',
        metricas: [
          { id: 'despejes',        label: 'Despejes',           tipo: 'num', desc: '' },
          { id: 'regatesSufridos', label: 'Regates sufridos',   tipo: 'fraccion', partes: ['superado','recibidos'], desc: 'Veces que el rival lo superó con regate' },
          { id: 'bloqueos',        label: 'Bloqueos de remate', tipo: 'num', desc: 'Remates bloqueados con el cuerpo' },
          { id: 'erroresFatales',  label: 'Errores que generaron chances', tipo: 'num', desc: '' },
        ]
      },
      {
        titulo: 'Salida y pases',
        metricas: [
          { id: 'pasesCortos',  label: 'Pases cortos',  tipo: 'fraccion', partes: ['completados','intentados'], desc: '' },
          { id: 'pasesLargos',  label: 'Pases largos',  tipo: 'fraccion', partes: ['completados','intentados'], desc: '' },
          { id: 'conducciones', label: 'Conducciones bajo presión', tipo: 'fraccion', partes: ['exitosas','intentadas'], desc: '' },
        ]
      },
    ]
  },

  LAT: {
    label: 'Lateral',
    icon: '↔️',
    color: '#8b5cf6',
    secciones: [
      {
        titulo: 'Defensa',
        metricas: [
          { id: 'duelosAereos',    label: 'Duelos aéreos',     tipo: 'fraccion', partes: ['ganados','disputados'], desc: '' },
          { id: 'duelosTerrestre', label: 'Duelos terrestres', tipo: 'fraccion', partes: ['ganados','disputados'], desc: '' },
          { id: 'anticipaciones',  label: 'Anticipaciones',    tipo: 'num', desc: '' },
          { id: 'crucesDef',       label: 'Cruces defensivos', tipo: 'num', desc: 'Centros rivales que cortó' },
          { id: 'coberturas',      label: 'Coberturas',        tipo: 'num', desc: 'Ayudó a otro defensor que fue superado' },
        ]
      },
      {
        titulo: 'Ataque',
        metricas: [
          { id: 'centros',         label: 'Centros enviados',   tipo: 'fraccion', partes: ['precisos','intentados'], desc: '' },
          { id: 'incorporaciones', label: 'Incorporaciones al ataque', tipo: 'num', desc: 'Veces que subió al ataque' },
          { id: 'regates',         label: 'Regates ofensivos',  tipo: 'fraccion', partes: ['exitosos','intentados'], desc: '' },
          { id: 'asistencias',     label: 'Asistencias',        tipo: 'num', desc: '' },
          { id: 'goles',           label: 'Goles',              tipo: 'num', desc: '' },
        ]
      },
      {
        titulo: 'Pases',
        metricas: [
          { id: 'pasesCortos',  label: 'Pases cortos',  tipo: 'fraccion', partes: ['completados','intentados'], desc: '' },
          { id: 'pasesLargos',  label: 'Pases largos',  tipo: 'fraccion', partes: ['completados','intentados'], desc: '' },
        ]
      },
    ]
  },

  MED: {
    label: 'Mediocampista',
    icon: '🎯',
    color: '#10b981',
    secciones: [
      {
        titulo: 'Pases y control',
        metricas: [
          { id: 'pasesCortos',   label: 'Pases cortos',   tipo: 'fraccion', partes: ['completados','intentados'], desc: '' },
          { id: 'pasesLargos',   label: 'Pases largos',   tipo: 'fraccion', partes: ['completados','intentados'], desc: '' },
          { id: 'pasesClave',    label: 'Pases clave',    tipo: 'num', desc: 'Pases que generaron chances claras' },
          { id: 'perdidasBalon', label: 'Pérdidas de balón', tipo: 'num', desc: '' },
        ]
      },
      {
        titulo: 'Duelos y presión',
        metricas: [
          { id: 'duelosGanados',   label: 'Duelos ganados',       tipo: 'fraccion', partes: ['ganados','disputados'], desc: '' },
          { id: 'recuperaciones',  label: 'Recuperaciones',       tipo: 'num', desc: 'Robó la pelota al rival' },
          { id: 'presionExitosa',  label: 'Presión exitosa',      tipo: 'fraccion', partes: ['exitosas','intentadas'], desc: 'Presionó y recuperó o forzó el error' },
          { id: 'regates',         label: 'Regates',              tipo: 'fraccion', partes: ['exitosos','intentados'], desc: '' },
        ]
      },
      {
        titulo: 'Aporte ofensivo',
        metricas: [
          { id: 'asistencias',  label: 'Asistencias',  tipo: 'num', desc: '' },
          { id: 'goles',        label: 'Goles',        tipo: 'num', desc: '' },
          { id: 'remates',      label: 'Remates',      tipo: 'fraccion', partes: ['al arco','totales'], desc: '' },
          { id: 'driblesArea',  label: 'Llegadas al área', tipo: 'num', desc: 'Veces que entró al área rival' },
        ]
      },
    ]
  },

  DEL: {
    label: 'Delantero / Extremo',
    icon: '⚡',
    color: '#ef4444',
    secciones: [
      {
        titulo: 'Definición',
        metricas: [
          { id: 'remates',        label: 'Remates',              tipo: 'fraccion', partes: ['al arco','totales'], desc: '' },
          { id: 'goles',          label: 'Goles',                tipo: 'num', desc: '' },
          { id: 'monoAMono',      label: 'Mano a mano',          tipo: 'fraccion', partes: ['convertidos','enfrentados'], desc: 'Situaciones 1 vs 1 con el arquero' },
          { id: 'offsides',       label: 'Offsides',             tipo: 'num', desc: '' },
        ]
      },
      {
        titulo: 'Creación',
        metricas: [
          { id: 'regates',        label: 'Regates',              tipo: 'fraccion', partes: ['exitosos','intentados'], desc: '' },
          { id: 'asistencias',    label: 'Asistencias',          tipo: 'num', desc: '' },
          { id: 'centrosRecibidos', label: 'Centros aprovechados', tipo: 'fraccion', partes: ['rematados','recibidos'], desc: '' },
          { id: 'pasesClave',     label: 'Pases clave',          tipo: 'num', desc: '' },
        ]
      },
      {
        titulo: 'Movimiento',
        metricas: [
          { id: 'movSinBalon',    label: 'Movimientos sin balón', tipo: 'num', desc: 'Corridas que generaron espacio o pase' },
          { id: 'presionAlta',    label: 'Presión alta exitosa',  tipo: 'fraccion', partes: ['exitosas','intentadas'], desc: 'Presionó al defensor rival' },
          { id: 'disputasAereas', label: 'Disputas aéreas',       tipo: 'fraccion', partes: ['ganadas','disputadas'], desc: '' },
        ]
      },
    ]
  },
};

// Mapa de posición a categoría de métricas
const POS_MAP = {
  'POR': 'POR',
  'DC': 'DC', 'DCD': 'DC', 'DCI': 'DC',
  'LD': 'LAT', 'LI': 'LAT',
  'MCD': 'MED', 'MC': 'MED', 'MCO': 'MED', 'MAI': 'MED', 'MAD': 'MED',
  'DC_DEL': 'DEL', 'ED': 'DEL', 'EI': 'DEL', 'SD': 'DEL',
};

// Calcular % para fracciones
function calcPct(val) {
  if (!val || !val.intentadas && !val.intentados && !val.disputados && !val.recibidos && !val.enfrentados && !val.totales && !val.disputadas) return null;
  const total = val.intentadas || val.intentados || val.disputados || val.recibidos || val.enfrentados || val.totales || val.disputadas || 0;
  const parte = val.exitosas || val.exitosos || val.ganados || val.completados || val.atajados || val.precisos || val.rematados || val.convertidos || val.superado || val['al arco'] || 0;
  if (!total) return null;
  return { pct: Math.round(parte/total*100), parte, total };
}

// Generar insight automático por métrica
function generarInsight(metrica, valor, posConfig) {
  if (!valor) return null;
  const m = posConfig;

  if (metrica === 'golesRecibidos') {
    if (valor <= 0) return { tipo: 'excelente', texto: 'Valla invicta 🔒' };
    if (valor === 1) return { tipo: 'bueno', texto: 'Solo 1 gol recibido' };
    if (valor >= 3) return { tipo: 'alerta', texto: `${valor} goles recibidos — revisar posicionamiento` };
  }
  if (metrica === 'goles' && valor > 0) return { tipo: 'excelente', texto: `${valor} gol${valor>1?'es':''} anotado${valor>1?'s':''}` };
  if (metrica === 'erroresFatales' && valor > 0) return { tipo: 'alerta', texto: `${valor} error${valor>1?'es':''} que generaron chance — foco en concentración` };
  if (metrica === 'offsides' && valor >= 3) return { tipo: 'alerta', texto: `${valor} offsides — trabajar el timing del movimiento` };
  if (metrica === 'perdidasBalon' && valor >= 4) return { tipo: 'alerta', texto: `${valor} pérdidas — simplificar el juego bajo presión` };

  if (valor.parte !== undefined) {
    const p = calcPct(valor);
    if (!p) return null;
    if (p.pct >= 80) return { tipo: 'excelente', texto: `${p.pct}% de efectividad (${p.parte}/${p.total})` };
    if (p.pct >= 60) return { tipo: 'bueno', texto: `${p.pct}% — rendimiento aceptable (${p.parte}/${p.total})` };
    if (p.pct < 40) return { tipo: 'alerta', texto: `${p.pct}% — área de mejora (${p.parte}/${p.total})` };
  }
  return null;
}


// ── ESTADO ──────────────────────────────────────────────────────────────────
const SC_STORAGE_KEY = 'sc_equipo_data';

function saveState() {
  try {
    const teamName = document.getElementById('sbTeamName')?.textContent || 'Mi Equipo';
    localStorage.setItem(SC_STORAGE_KEY, JSON.stringify({ players, matches, metricas, teamName }));
  } catch(e) { console.warn('No se pudo guardar:', e); }
}

function loadState() {
  try {
    const raw = localStorage.getItem(SC_STORAGE_KEY);
    if (!raw) return;
    const data = JSON.parse(raw);
    players  = data.players  || [];
    matches  = data.matches  || [];
    metricas = data.metricas || {};
    if (data.teamName) {
      const el = document.getElementById('sbTeamName');
      if (el) el.textContent = data.teamName;
    }
  } catch(e) { console.warn('No se pudo cargar estado:', e); }
}

let players  = [];
let matches  = [];
let metricas = {};
let editingPlayer = null;
let showingPlayerForm = false;
let showingMatchForm  = false;

// IDs únicos
function uid() { return '_' + Math.random().toString(36).slice(2,9); }

// ── SIDEBAR NAV ──────────────────────────────────────────────────────────────
document.querySelectorAll('.sb-item').forEach(item => {
  item.addEventListener('click', function() {
    const tab = this.dataset.tab;
    document.querySelectorAll('.sb-item').forEach(i => i.classList.remove('active'));
    this.classList.add('active');
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    document.getElementById('tab-' + tab).classList.add('active');
    if (tab === 'metricas') refreshMetricaSelects();
    if (tab === 'reporte') { /* no auto-generar */ }
    window.scrollTo(0, 0);
  });
});

// ── SIDEBAR STATS ────────────────────────────────────────────────────────────
function updateSidebar() {
  document.getElementById('sbCountPlayers').textContent = players.length;
  document.getElementById('sbCountMatches').textContent = matches.length;
  document.getElementById('sbCountWins').textContent = matches.filter(m=>m.res==='W').length;
  document.getElementById('sbCountGoals').textContent = matches.reduce((a,m)=>a+m.gf,0);
  document.getElementById('countPlayers').textContent = players.length;
}

// ── PLANTILLA ────────────────────────────────────────────────────────────────
function togglePlayerForm(idx) {
  showingPlayerForm = !showingPlayerForm;
  const card = document.getElementById('playerFormCard');
  card.style.display = showingPlayerForm ? 'block' : 'none';
  if (!showingPlayerForm) { clearPlayerForm(); editingPlayer = null; }
}

function clearPlayerForm() {
  ['pNombre','pNumero','pPosicion','pEdad','pPie','pNacionalidad'].forEach(id => {
    const el = document.getElementById(id);
    if (el.tagName === 'SELECT') el.selectedIndex = 0; else el.value = '';
  });
  document.getElementById('playerFormTitle').textContent = 'Nuevo jugador';
  editingPlayer = null;
}

function savePlayer() {
  const nombre = document.getElementById('pNombre').value.trim();
  const pos    = document.getElementById('pPosicion').value;
  if (!nombre) { gToast('Ingresá el nombre del jugador', 'err'); return; }
  if (!pos)    { gToast('Seleccioná la posición', 'err'); return; }

  const player = {
    id:           editingPlayer ? editingPlayer.id : uid(),
    name:         nombre,
    numero:       parseInt(document.getElementById('pNumero').value) || 0,
    pos:          pos,
    edad:         parseInt(document.getElementById('pEdad').value) || 0,
    pie:          document.getElementById('pPie').value,
    nacionalidad: document.getElementById('pNacionalidad').value.trim(),
  };

  if (editingPlayer) {
    const idx = players.findIndex(p => p.id === editingPlayer.id);
    players[idx] = player;
    gToast('Jugador actualizado');
  } else {
    players.push(player);
    gToast('Jugador agregado');
  }

  clearPlayerForm();
  showingPlayerForm = false;
  document.getElementById('playerFormCard').style.display = 'none';
  renderPlantilla();
  updateSidebar();
  saveState();
}

function editPlayer(id) {
  const p = players.find(pl => pl.id === id);
  if (!p) return;
  editingPlayer = p;
  document.getElementById('pNombre').value      = p.name;
  document.getElementById('pNumero').value      = p.numero;
  document.getElementById('pPosicion').value    = p.pos;
  document.getElementById('pEdad').value        = p.edad;
  document.getElementById('pPie').value         = p.pie;
  document.getElementById('pNacionalidad').value= p.nacionalidad;
  document.getElementById('playerFormTitle').textContent = 'Editar jugador';
  showingPlayerForm = true;
  document.getElementById('playerFormCard').style.display = 'block';
  document.getElementById('playerFormCard').scrollIntoView({behavior:'smooth'});
}

function deletePlayer(id) {
  if (!confirm('¿Eliminás este jugador?')) return;
  players = players.filter(p => p.id !== id);
  renderPlantilla();
  updateSidebar();
  saveState();
  gToast('Jugador eliminado');
}

function renderPlantilla() {
  const wrap = document.getElementById('plantillaBody');
  if (players.length === 0) {
    wrap.innerHTML = `<div class="empty-state"><div class="empty-icon">👥</div><div class="empty-text">No hay jugadores todavía</div><div class="empty-sub">Hacé click en "Agregar jugador" para empezar</div></div>`;
    return;
  }

  const grouped = {};
  players.forEach(p => {
    const cat = POS_MAP[p.pos] || 'OTRO';
    if (!grouped[cat]) grouped[cat] = [];
    grouped[cat].push(p);
  });

  const catOrder = ['POR','DC','LAT','MED','DEL','OTRO'];
  const catLabel = { POR:'Arqueros', DC:'Defensas centrales', LAT:'Laterales', MED:'Mediocampistas', DEL:'Delanteros', OTRO:'Otros' };

  let html = '';
  catOrder.forEach(cat => {
    if (!grouped[cat]) return;
    html += `<div style="padding:8px 14px 4px;font-size:.68rem;font-weight:600;color:var(--text-light);text-transform:uppercase;letter-spacing:.08em;background:var(--bg2)">${catLabel[cat]}</div>`;
    html += '<table class="players-table"><thead><tr><th>#</th><th>Nombre</th><th>Pos.</th><th>Edad</th><th>Pie</th><th style="text-align:right">Acciones</th></tr></thead><tbody>';
    grouped[cat].forEach(p => {
      html += `
        <tr>
          <td style="color:var(--text-light);font-weight:500">${p.numero || '—'}</td>
          <td style="font-weight:400">${p.name}</td>
          <td><span class="pos-badge pos-${p.pos}">${p.pos}</span></td>
          <td style="color:var(--text-mid)">${p.edad || '—'}</td>
          <td style="color:var(--text-mid)">${p.pie || '—'}</td>
          <td style="text-align:right">
            <button class="btn btn-ghost btn-xs" onclick="editPlayer('${p.id}')">✏️ Editar</button>
            <button class="btn btn-danger btn-xs" onclick="deletePlayer('${p.id}')">Eliminar</button>
          </td>
        </tr>`;
    });
    html += '</tbody></table>';
  });
  wrap.innerHTML = html;
}

// ── PARTIDOS ─────────────────────────────────────────────────────────────────
function toggleMatchForm() {
  showingMatchForm = !showingMatchForm;
  document.getElementById('matchFormCard').style.display = showingMatchForm ? 'block' : 'none';
  if (!showingMatchForm) clearMatchForm();
}
function clearMatchForm() {
  ['mRival','mFecha','mGF','mGC','mJornada'].forEach(id => document.getElementById(id).value = '');
  document.getElementById('mCondicion').selectedIndex = 0;
}

function saveMatch() {
  const rival = document.getElementById('mRival').value.trim();
  const fecha = document.getElementById('mFecha').value;
  const gf    = parseInt(document.getElementById('mGF').value) || 0;
  const gc    = parseInt(document.getElementById('mGC').value) || 0;
  if (!rival) { gToast('Ingresá el nombre del rival', 'err'); return; }
  if (!fecha) { gToast('Seleccioná la fecha', 'err'); return; }

  const res = gf > gc ? 'W' : gf < gc ? 'L' : 'D';
  matches.push({
    id:      uid(),
    rival,
    fecha,
    cond:    document.getElementById('mCondicion').value,
    gf, gc, res,
    jornada: document.getElementById('mJornada').value.trim(),
  });
  clearMatchForm();
  showingMatchForm = false;
  document.getElementById('matchFormCard').style.display = 'none';
  renderMatches();
  updateSidebar();
  saveState();
  gToast('Partido guardado');
}

function deleteMatch(id) {
  if (!confirm('¿Eliminás este partido?')) return;
  matches = matches.filter(m => m.id !== id);
  delete metricas[id];
  renderMatches();
  updateSidebar();
  saveState();
  gToast('Partido eliminado');
}

function renderMatches() {
  const wrap = document.getElementById('matchList');
  if (matches.length === 0) {
    wrap.innerHTML = `<div class="empty-state"><div class="empty-icon">📅</div><div class="empty-text">No hay partidos registrados</div><div class="empty-sub">Agregá el primer partido para empezar</div></div>`;
    return;
  }
  const sorted = [...matches].sort((a,b) => new Date(b.fecha) - new Date(a.fecha));
  wrap.innerHTML = sorted.map(m => {
    const fecha = new Date(m.fecha + 'T00:00:00').toLocaleDateString('es-AR', {day:'2-digit',month:'short'});
    const tieneMet = metricas[m.id] && Object.keys(metricas[m.id]).length > 0;
    return `
      <div class="match-row" onclick="irAMetricas('${m.id}')">
        <div class="mr-res mr-res-${m.res}">${m.res==='W'?'V':m.res==='D'?'E':'D'}</div>
        <div style="flex:1">
          <div style="font-weight:400">vs ${m.rival}</div>
          <div style="font-size:.72rem;color:var(--text-light)">${m.cond} · ${fecha}${m.jornada?' · '+m.jornada:''}</div>
        </div>
        <div style="font-size:1.1rem;font-weight:500;color:var(--text)">${m.gf} — ${m.gc}</div>
        <div style="margin-left:12px">
          ${tieneMet ? '<span style="font-size:.7rem;color:var(--success);background:var(--success-light);padding:2px 8px;border-radius:10px">✓ Métricas</span>' : '<span style="font-size:.7rem;color:var(--text-light)">Sin métricas</span>'}
        </div>
        <button class="btn btn-danger btn-xs" style="margin-left:8px" onclick="event.stopPropagation();deleteMatch('${m.id}')">✕</button>
      </div>`;
  }).join('');
}

function irAMetricas(matchId) {
  document.querySelectorAll('.sb-item').forEach(i => i.classList.remove('active'));
  document.querySelector('[data-tab="metricas"]').classList.add('active');
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  document.getElementById('tab-metricas').classList.add('active');
  refreshMetricaSelects();
  setTimeout(() => {
    document.getElementById('metricaPartido').value = matchId;
    onMetricaPartidoChange();
  }, 50);
}

// ── MÉTRICAS ─────────────────────────────────────────────────────────────────
function refreshMetricaSelects() {
  const mSel = document.getElementById('metricaPartido');
  const pSel = document.getElementById('metricaJugador');
  const curMatch = mSel.value;
  const curPlayer = pSel.value;

  mSel.innerHTML = '<option value="">— Seleccioná un partido —</option>';
  [...matches].sort((a,b)=>new Date(b.fecha)-new Date(a.fecha)).forEach(m => {
    const fecha = new Date(m.fecha+'T00:00:00').toLocaleDateString('es-AR',{day:'2-digit',month:'short'});
    mSel.innerHTML += `<option value="${m.id}">vs ${m.rival} (${fecha})</option>`;
  });
  if (curMatch) mSel.value = curMatch;

  pSel.innerHTML = '<option value="">— Seleccioná un jugador —</option>';
  players.forEach(p => {
    pSel.innerHTML += `<option value="${p.id}">${p.name} (${p.pos})</option>`;
  });
  if (curPlayer) pSel.value = curPlayer;
}

function onMetricaPartidoChange() {
  document.getElementById('metricaFormWrap').innerHTML = '';
  document.getElementById('metricaJugador').value = '';
}

function onMetricaJugadorChange() {
  const matchId  = document.getElementById('metricaPartido').value;
  const playerId = document.getElementById('metricaJugador').value;
  if (!matchId || !playerId) { document.getElementById('metricaFormWrap').innerHTML = ''; return; }

  const player = players.find(p => p.id === playerId);
  const match  = matches.find(m => m.id === matchId);
  if (!player || !match) return;

  const catKey = POS_MAP[player.pos];
  const config = POSICION_METRICAS[catKey];
  if (!config) {
    document.getElementById('metricaFormWrap').innerHTML = `<div class="empty-state"><div class="empty-icon">⚙️</div><div class="empty-text">No hay métricas definidas para la posición ${player.pos}</div></div>`;
    return;
  }

  // Cargar valores existentes
  const saved = (metricas[matchId] && metricas[matchId][playerId]) || {};

  let html = `
    <div class="card">
      <div class="card-head">
        <h2 style="display:flex;align-items:center;gap:8px">
          <span style="background:${config.color};color:#fff;padding:3px 10px;border-radius:10px;font-size:.75rem">${config.icon} ${config.label}</span>
          <span>${player.name}</span>
          <span style="color:var(--text-light);font-size:.82rem;font-weight:300">vs ${match.rival}</span>
        </h2>
      </div>
      <div class="card-body">`;

  // Minutos jugados (siempre)
  html += `
    <div class="metrica-section">
      <div class="metrica-section-title">⏱️ Tiempo de juego</div>
      <div class="metrica-grid">
        <div class="metrica-item">
          <div class="metrica-label">Minutos jugados</div>
          <div class="metrica-desc">Cuántos minutos estuvo en cancha</div>
          <div class="metrica-input-simple"><input type="number" min="0" max="120" id="met_minutos" value="${saved.minutos||''}" placeholder="0–120"></div>
        </div>
      </div>
    </div>`;

  // Secciones por posición
  config.secciones.forEach((sec, si) => {
    html += `<div class="metrica-section">
      <div class="metrica-section-title">${sec.titulo}</div>
      <div class="metrica-grid">`;

    sec.metricas.forEach(met => {
      const savedVal = saved[met.id] || {};
      html += `<div class="metrica-item">
        <div class="metrica-label">${met.label}</div>
        ${met.desc ? `<div class="metrica-desc">${met.desc}</div>` : ''}`;

      if (met.tipo === 'num') {
        html += `<div class="metrica-input-simple"><input type="number" min="0" id="met_${met.id}" value="${savedVal||''}" placeholder="0"></div>`;
      } else {
        // fracción
        const [p1, p2] = met.partes;
        const v1 = (typeof savedVal === 'object' && savedVal[p1]) || '';
        const v2 = (typeof savedVal === 'object' && savedVal[p2]) || '';
        html += `<div class="fraccion-inputs">
          <div class="fraccion-part"><label>${p1}</label><input type="number" min="0" id="met_${met.id}_${p1.replace(/ /g,'_')}" value="${v1}" placeholder="0"></div>
          <div class="fraccion-sep">/</div>
          <div class="fraccion-part"><label>${p2}</label><input type="number" min="0" id="met_${met.id}_${p2.replace(/ /g,'_')}" value="${v2}" placeholder="0"></div>
        </div>`;
      }
      html += '</div>';
    });

    html += '</div></div>';
  });

  html += `
      <div class="btn-group" style="margin-top:8px">
        <button class="btn btn-primary" onclick="saveMetricas('${matchId}','${playerId}')">💾 Guardar métricas</button>
        <button class="btn btn-ghost" onclick="clearMetricaForm()">Limpiar</button>
      </div>
    </div></div>`;

  document.getElementById('metricaFormWrap').innerHTML = html;
}

function saveMetricas(matchId, playerId) {
  const player = players.find(p => p.id === playerId);
  const catKey = POS_MAP[player.pos];
  const config = POSICION_METRICAS[catKey];
  if (!config) return;

  if (!metricas[matchId]) metricas[matchId] = {};
  const data = {};

  // Minutos
  data.minutos = parseInt(document.getElementById('met_minutos')?.value) || 0;

  // Métricas por posición
  config.secciones.forEach(sec => {
    sec.metricas.forEach(met => {
      if (met.tipo === 'num') {
        const el = document.getElementById('met_' + met.id);
        data[met.id] = el ? (parseInt(el.value) || 0) : 0;
      } else {
        const [p1, p2] = met.partes;
        const el1 = document.getElementById(`met_${met.id}_${p1.replace(/ /g,'_')}`);
        const el2 = document.getElementById(`met_${met.id}_${p2.replace(/ /g,'_')}`);
        data[met.id] = {
          [p1]: parseInt(el1?.value) || 0,
          [p2]: parseInt(el2?.value) || 0,
        };
      }
    });
  });

  metricas[matchId][playerId] = data;
  saveState();
  gToast('Métricas guardadas para ' + player.name);
  renderMatches(); // actualiza el indicador "✓ Métricas"
}

function clearMetricaForm() {
  document.querySelectorAll('#metricaFormWrap input[type="number"]').forEach(el => el.value = '');
}

// ── REPORTE SCOUTING ─────────────────────────────────────────────────────────
function generarReporte() {
  if (players.length === 0) { gToast('Agregá jugadores primero', 'err'); return; }
  if (matches.length === 0) { gToast('Agregá partidos primero', 'err'); return; }

  const wrap = document.getElementById('reporteContent');

  // Stats globales
  const totalGF = matches.reduce((a,m)=>a+m.gf,0);
  const totalGC = matches.reduce((a,m)=>a+m.gc,0);
  const wins    = matches.filter(m=>m.res==='W').length;
  const draws   = matches.filter(m=>m.res==='D').length;
  const losses  = matches.filter(m=>m.res==='L').length;
  const pct     = Math.round(wins/matches.length*100);

  // Últimos 5
  const ult5 = [...matches].sort((a,b)=>new Date(b.fecha)-new Date(a.fecha)).slice(0,5);
  const ult5Badges = ult5.map(m=>{
    const c = m.res==='W'?'var(--success)':m.res==='D'?'var(--warn)':'var(--danger)';
    const l = m.res==='W'?'V':m.res==='D'?'E':'D';
    return `<div class="forma-dot" style="background:${c}" title="vs ${m.rival}">${l}</div>`;
  }).join('');

  // Local vs visitante
  const local = matches.filter(m=>m.cond==='Local');
  const visit = matches.filter(m=>m.cond==='Visitante');
  const locPct = local.length ? Math.round(local.filter(m=>m.res==='W').length/local.length*100) : 0;
  const visPct = visit.length ? Math.round(visit.filter(m=>m.res==='W').length/visit.length*100) : 0;

  // Stats por jugador
  const playerData = calcPlayerData();

  let html = `
    <!-- HEADER -->
    <div class="reporte-header">
      <div class="reporte-title" id="repTeamName">${document.getElementById('sbTeamName').textContent}</div>
      <div class="reporte-sub">Reporte scouting · ${matches.length} partido${matches.length!==1?'s':''} · ${players.length} jugadores</div>
      <div class="reporte-grid4">
        <div class="rg-stat"><div class="rg-val" style="color:#86efac">${wins}</div><div class="rg-label">Victorias</div></div>
        <div class="rg-stat"><div class="rg-val">${draws}</div><div class="rg-label">Empates</div></div>
        <div class="rg-stat"><div class="rg-val" style="color:#fca5a5">${losses}</div><div class="rg-label">Derrotas</div></div>
        <div class="rg-stat"><div class="rg-val">${pct}%</div><div class="rg-label">% victorias</div></div>
      </div>
    </div>

    <!-- FILA 1: Forma + Local vs Visitante -->
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px">

      <div class="scouting-card">
        <div class="sc-head"><span>📈</span><h3>Forma reciente</h3></div>
        <div class="sc-body">
          <div class="forma-dots" style="margin-bottom:14px">${ult5Badges}</div>
          ${ult5.map(m=>{
            const fecha = new Date(m.fecha+'T00:00:00').toLocaleDateString('es-AR',{day:'2-digit',month:'short'});
            const c = m.res==='W'?'var(--success)':m.res==='D'?'var(--warn)':'var(--danger)';
            return `<div style="display:flex;align-items:center;gap:10px;font-size:.82rem;margin-bottom:6px">
              <div style="width:6px;height:6px;border-radius:50%;background:${c};flex-shrink:0"></div>
              <span style="flex:1">vs ${m.rival}</span>
              <span style="font-weight:500">${m.gf}–${m.gc}</span>
              <span style="color:var(--text-light);font-size:.72rem">${fecha}</span>
            </div>`;
          }).join('')}
        </div>
      </div>

      <div class="scouting-card">
        <div class="sc-head"><span>🏠</span><h3>Local vs Visitante</h3></div>
        <div class="sc-body">
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px">
            ${[
              ['🏠 Local', locPct, local.length, local.filter(m=>m.res==='W').length+'V '+local.filter(m=>m.res==='D').length+'E '+local.filter(m=>m.res==='L').length+'D', local.reduce((a,m)=>a+m.gf,0)+'–'+local.reduce((a,m)=>a+m.gc,0)],
              ['✈️ Visitante', visPct, visit.length, visit.filter(m=>m.res==='W').length+'V '+visit.filter(m=>m.res==='D').length+'E '+visit.filter(m=>m.res==='L').length+'D', visit.reduce((a,m)=>a+m.gf,0)+'–'+visit.reduce((a,m)=>a+m.gc,0)],
            ].map(([titulo,pctv,total,forma,goles])=>`
              <div style="background:var(--bg);border-radius:8px;padding:14px;border:1px solid var(--border)">
                <div style="font-size:.8rem;font-weight:500;margin-bottom:6px">${titulo}</div>
                <div style="font-family:'Fraunces',serif;font-size:1.8rem;color:var(--accent)">${pctv}%</div>
                <div style="font-size:.65rem;color:var(--text-light);margin-top:2px">efectividad</div>
                <div style="font-size:.75rem;color:var(--text-mid);margin-top:6px">${total} partido${total!==1?'s':''} · ${forma}</div>
                <div style="font-size:.75rem;color:var(--text-mid)">${goles} goles</div>
              </div>`).join('')}
          </div>
          <div style="padding:9px 12px;background:${locPct>visPct?'var(--success-light)':locPct<visPct?'var(--blue-light)':'var(--bg2)'};border-radius:6px;font-size:.8rem;color:var(--text-mid)">
            ${locPct>visPct?'✅ Mejor rendimiento de <strong>local</strong>':locPct<visPct?'🌍 Mejor rendimiento de <strong>visitante</strong>':'⚖️ Rendimiento <strong>equilibrado</strong>'}
          </div>
        </div>
      </div>
    </div>

    <!-- SCOUTING POR JUGADOR -->
    <div class="scouting-card" style="margin-bottom:16px">
      <div class="sc-head"><span>👤</span><h3>Análisis individual por jugador</h3></div>
      <div style="padding:0 20px 20px">`;

  if (playerData.length === 0) {
    html += `<div class="empty-state" style="padding:30px"><div class="empty-icon">📊</div><div class="empty-text">Cargá métricas de los partidos para ver el análisis individual</div></div>`;
  } else {
    // Ordenar por rating desc
    [...playerData].sort((a,b)=>b.rating-a.rating).forEach(pd => {
      html += renderPlayerScouting(pd);
    });
  }

  html += `</div></div>

    <!-- TABLA RESUMEN -->
    <div class="scouting-card">
      <div class="sc-head"><span>📋</span><h3>Resumen estadístico del plantel</h3></div>
      <div style="padding:0">
        <table class="players-table">
          <thead><tr><th>Jugador</th><th>Pos.</th><th>Rating</th><th>PJ</th><th>Min.</th><th>Goles</th><th>Asist.</th><th>Métricas cargadas</th></tr></thead>
          <tbody>
            ${[...playerData].sort((a,b)=>b.rating-a.rating).map(pd=>`
              <tr>
                <td style="font-weight:400">${pd.player.name}</td>
                <td><span class="pos-badge pos-${pd.player.pos}">${pd.player.pos}</span></td>
                <td><span style="font-weight:600;color:${pd.rating>=7?'var(--success)':pd.rating>=5?'var(--accent)':'var(--danger)'}">${pd.rating}</span></td>
                <td style="color:var(--text-mid)">${pd.partidos}</td>
                <td style="color:var(--text-light);font-size:.8rem">${pd.totalMinutos}'</td>
                <td style="font-weight:500">${pd.goles||'—'}</td>
                <td style="color:var(--text-mid)">${pd.asistencias||'—'}</td>
                <td style="color:var(--text-light);font-size:.75rem">${pd.partidos} partido${pd.partidos!==1?'s':''}</td>
              </tr>`).join('')}
          </tbody>
        </table>
      </div>
    </div>
  `;

  wrap.innerHTML = html;

  // Bind acordeones
  document.querySelectorAll('.ps-header').forEach(h => {
    h.addEventListener('click', () => {
      const body = h.nextElementSibling;
      body.classList.toggle('open');
      const arrow = h.querySelector('.ps-arrow');
      if (arrow) arrow.textContent = body.classList.contains('open') ? '▲' : '▼';
    });
  });
}

function calcPlayerData() {
  return players.map(player => {
    const catKey = POS_MAP[player.pos];
    const config = POSICION_METRICAS[catKey];
    let partidos = 0, totalMinutos = 0, goles = 0, asistencias = 0;
    const metAcum = {}; // { metId: [valores por partido] }
    const insightsPorPartido = [];

    matches.forEach(match => {
      const met = metricas[match.id] && metricas[match.id][player.id];
      if (!met) return;
      partidos++;
      totalMinutos += met.minutos || 0;
      goles += met.goles || 0;
      asistencias += met.asistencias || 0;

      // Acumular métricas
      if (config) {
        config.secciones.forEach(sec => {
          sec.metricas.forEach(m => {
            if (!metAcum[m.id]) metAcum[m.id] = { tipo: m.tipo, partes: m.partes, label: m.label, valores: [] };
            if (met[m.id] !== undefined) metAcum[m.id].valores.push(met[m.id]);
          });
        });
      }
    });

    if (partidos === 0) return null;

    // Calcular promedios
    const promedios = {};
    Object.entries(metAcum).forEach(([id, data]) => {
      if (data.tipo === 'num') {
        promedios[id] = { avg: (data.valores.reduce((a,v)=>a+v,0)/data.valores.length).toFixed(1), tipo:'num', label:data.label };
      } else {
        const totParte = data.valores.reduce((a,v)=>{
          const k = data.partes[0];
          return a + (typeof v === 'object' ? (v[k]||0) : 0);
        }, 0);
        const totTotal = data.valores.reduce((a,v)=>{
          const k = data.partes[1];
          return a + (typeof v === 'object' ? (v[k]||0) : 0);
        }, 0);
        promedios[id] = { parte: totParte, total: totTotal, pct: totTotal ? Math.round(totParte/totTotal*100) : 0, tipo:'fraccion', label:data.label, partes:data.partes };
      }
    });

    // Rating compuesto por posición
    const rating = calcRating(catKey, promedios, partidos, matches.length);

    // Insights automáticos
    const insights = generarInsights(catKey, promedios, config);

    return { player, partidos, totalMinutos, goles, asistencias, promedios, rating, insights, config };
  }).filter(Boolean);
}

function calcRating(catKey, prom, partidos, totalPartidos) {
  let score = 5.0;
  const presencia = partidos / Math.max(totalPartidos, 1);
  score += presencia * 2;

  if (catKey === 'POR') {
    if (prom.salidasAereas) score += (prom.salidasAereas.pct/100) * 1.5;
    if (prom.unVsUno)       score += (prom.unVsUno.pct/100) * 1.5;
    if (prom.golesRecibidos) score -= Math.min(parseFloat(prom.golesRecibidos.avg||0) * 0.3, 2);
  } else if (catKey === 'DC' || catKey === 'LAT') {
    if (prom.duelosAereos)   score += (prom.duelosAereos.pct/100) * 1.2;
    if (prom.anticipaciones) score += Math.min(parseFloat(prom.anticipaciones.avg||0)*0.2, 1);
    if (prom.erroresFatales) score -= Math.min(parseFloat(prom.erroresFatales.avg||0)*0.5, 2);
    if (catKey === 'LAT' && prom.centros) score += (prom.centros.pct/100) * 0.8;
  } else if (catKey === 'MED') {
    if (prom.pasesCortos)   score += (prom.pasesCortos.pct/100) * 1.2;
    if (prom.recuperaciones) score += Math.min(parseFloat(prom.recuperaciones.avg||0)*0.2, 1);
    if (prom.perdidasBalon) score -= Math.min(parseFloat(prom.perdidasBalon.avg||0)*0.15, 1.5);
    if (prom.pasesClave)    score += Math.min(parseFloat(prom.pasesClave.avg||0)*0.3, 1);
  } else if (catKey === 'DEL') {
    if (prom.remates)   score += (prom.remates.pct/100) * 1.2;
    if (prom.monoAMono) score += (prom.monoAMono.pct/100) * 1.5;
    if (prom.goles)     score += Math.min(parseFloat(prom.goles.avg||0)*0.5, 2);
  }
  return Math.min(10, Math.max(1, parseFloat(score.toFixed(1))));
}

function generarInsights(catKey, prom, config) {
  const insights = [];
  if (!config) return insights;

  config.secciones.forEach(sec => {
    sec.metricas.forEach(m => {
      const p = prom[m.id];
      if (!p) return;

      if (m.tipo === 'num') {
        const avg = parseFloat(p.avg || 0);
        if (m.id === 'golesRecibidos' && avg === 0)  insights.push({tipo:'excelente', texto:`Valla invicta en los partidos analizados 🔒`});
        if (m.id === 'golesRecibidos' && avg >= 2.5)  insights.push({tipo:'alerta',    texto:`Promedio de ${avg} goles recibidos — revisar posicionamiento defensivo`});
        if (m.id === 'goles'          && avg >= 1)   insights.push({tipo:'excelente', texto:`Promedio de ${avg} goles por partido ⚽`});
        if (m.id === 'asistencias'    && avg >= 0.7) insights.push({tipo:'excelente', texto:`Promedio de ${avg} asistencias por partido`});
        if (m.id === 'erroresFatales' && avg >= 1)   insights.push({tipo:'alerta',    texto:`${avg} error${avg>1?'es':''} promedio que generan chances — trabajar concentración`});
        if (m.id === 'offsides'       && avg >= 2.5) insights.push({tipo:'alerta',    texto:`${avg} offsides promedio — mejorar timing de movimiento`});
        if (m.id === 'recuperaciones' && avg >= 3)   insights.push({tipo:'excelente', texto:`${avg} recuperaciones promedio — fuerte en la marca`});
        if (m.id === 'pasesClave'     && avg >= 2)   insights.push({tipo:'excelente', texto:`${avg} pases clave promedio — creador de juego`});
        if (m.id === 'anticipaciones' && avg >= 3)   insights.push({tipo:'excelente', texto:`${avg} anticipaciones promedio — muy bien posicionado`});
      } else {
        if (p.total < 2) return; // poca muestra
        if (p.pct >= 75) insights.push({tipo:'excelente', texto:`${m.label}: ${p.pct}% de efectividad (${p.parte}/${p.total})`});
        else if (p.pct < 45 && p.total >= 3) insights.push({tipo:'alerta', texto:`${m.label}: solo ${p.pct}% — área de mejora (${p.parte}/${p.total})`});
      }
    });
  });

  return insights.slice(0, 6); // máximo 6 insights por jugador
}

function renderPlayerScouting(pd) {
  const { player, partidos, totalMinutos, promedios, rating, insights, config } = pd;
  const ratingColor = rating >= 7 ? 'var(--success)' : rating >= 5 ? 'var(--accent)' : 'var(--danger)';
  const catKey = POS_MAP[player.pos];
  const conf = POSICION_METRICAS[catKey];

  let html = `
    <div class="player-scouting" style="margin-top:14px">
      <div class="ps-header">
        <div class="ps-avatar" style="background:${conf?.color||'var(--green-mid)'}">
          ${player.name.split(' ').map(w=>w[0]).join('').slice(0,2)}
        </div>
        <div>
          <div class="ps-name">${player.name}</div>
          <div class="ps-meta">${conf?.label || player.pos} · ${partidos} partido${partidos!==1?'s':''} · ${totalMinutos}'</div>
        </div>
        <div style="margin-left:auto;display:flex;align-items:center;gap:16px">
          <div class="ps-rating">
            <div class="ps-rating-val" style="color:${ratingColor}">${rating}</div>
            <div class="ps-rating-label">Rating</div>
          </div>
          <div class="ps-arrow" style="color:var(--text-light)">▼</div>
        </div>
      </div>
      <div class="ps-body">`;

  // Insights
  if (insights.length > 0) {
    html += '<div style="margin-bottom:16px">';
    insights.forEach(ins => {
      const icon = ins.tipo === 'excelente' ? '✅' : ins.tipo === 'bueno' ? 'ℹ️' : '⚠️';
      html += `<div class="insight insight-${ins.tipo}"><span class="insight-icon">${icon}</span><span>${ins.texto}</span></div>`;
    });
    html += '</div>';
  }

  // Métricas en barras por sección
  if (conf) {
    conf.secciones.forEach(sec => {
      const metricsWithData = sec.metricas.filter(m => promedios[m.id]);
      if (metricsWithData.length === 0) return;

      html += `<div style="margin-bottom:14px"><div style="font-size:.72rem;font-weight:600;color:var(--text-mid);text-transform:uppercase;letter-spacing:.08em;margin-bottom:8px">${sec.titulo}</div>`;

      metricsWithData.forEach(m => {
        const p = promedios[m.id];
        if (m.tipo === 'num') {
          const avg = parseFloat(p.avg);
          const maxRef = m.id==='golesRecibidos'?5 : m.id==='goles'?2 : m.id==='asistencias'?2 : m.id==='anticipaciones'?6 : m.id==='recuperaciones'?8 : m.id==='pasesClave'?5 : 10;
          const pct = Math.min(avg/maxRef*100, 100);
          const barColor = m.id==='erroresFatales'||m.id==='offsides'||m.id==='golesRecibidos' ? 'var(--danger)' : 'var(--accent)';
          html += `<div class="stat-bar-row"><div class="sbr-label">${m.label}</div><div class="sbr-bar"><div class="sbr-fill" style="width:${pct}%;background:${barColor}"></div></div><div class="sbr-val">${avg}/partido</div></div>`;
        } else {
          const barColor = p.pct >= 70 ? 'var(--success)' : p.pct >= 50 ? 'var(--warn)' : 'var(--danger)';
          html += `<div class="stat-bar-row"><div class="sbr-label">${m.label}</div><div class="sbr-bar"><div class="sbr-fill" style="width:${p.pct}%;background:${barColor}"></div></div><div class="sbr-val">${p.pct}% (${p.parte}/${p.total})</div></div>`;
        }
      });
      html += '</div>';
    });
  } else {
    html += `<div class="empty-state" style="padding:16px"><div class="empty-sub">Sin métricas específicas para esta posición</div></div>`;
  }

  html += '</div></div>';
  return html;
}

// ── EXPORTAR PDF ─────────────────────────────────────────────────────────────
function exportarPDF() {
  const contenido = document.getElementById('reporteContent');
  if (!contenido || contenido.querySelector('.empty-state')) { gToast('Primero generá el reporte', 'err'); return; }
  const teamName = document.getElementById('sbTeamName').textContent;
  const fecha = new Date().toLocaleDateString('es-AR', {day:'2-digit',month:'long',year:'numeric'});

  const ventana = window.open('','_blank');
  ventana.document.write(`<!DOCTYPE html><html lang="es"><head>
    <meta charset="UTF-8"><title>Reporte Scouting — ${teamName}</title>
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@400;600&family=Geist:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
      *{margin:0;padding:0;box-sizing:border-box}
      body{font-family:'Geist',sans-serif;font-weight:300;background:#fff;color:#1a1a18;padding:28px;font-size:12.5px;line-height:1.5}
      h1{font-family:'Fraunces',serif;font-size:22px;font-weight:400;color:#2a3d2e}
      h2{font-family:'Fraunces',serif;font-size:15px;font-weight:400;margin-bottom:10px;color:#1a1a18}
      h3{font-size:12px;font-weight:500;margin-bottom:8px;text-transform:uppercase;letter-spacing:.06em;color:#5a5a54}
      .section{margin-bottom:20px;page-break-inside:avoid}
      .header{background:#2a3d2e;color:#f5f1eb;padding:18px 22px;border-radius:8px;margin-bottom:20px}
      .header h1{color:#f5f1eb}
      .header p{font-size:11px;color:rgba(245,241,235,.5);margin-top:4px}
      .grid2{display:grid;grid-template-columns:1fr 1fr;gap:14px}
      .grid4{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
      .box{background:#f3f1ed;border:1px solid #e2ddd6;border-radius:6px;padding:12px;text-align:center}
      .box-val{font-family:'Fraunces',serif;font-size:22px;color:#c4601a}
      .box-label{font-size:10px;color:#9a9a90;text-transform:uppercase;letter-spacing:.05em;margin-top:2px}
      table{width:100%;border-collapse:collapse;font-size:11.5px}
      th{background:#f3f1ed;padding:7px 10px;text-align:left;font-size:10px;color:#9a9a90;text-transform:uppercase;letter-spacing:.05em;border-bottom:1px solid #e2ddd6}
      td{padding:7px 10px;border-bottom:1px solid #f3f1ed}
      .badge{display:inline-block;padding:2px 7px;border-radius:10px;font-size:10px;font-weight:500}
      .insight-block{padding:7px 10px;border-radius:5px;margin-bottom:5px;font-size:11px}
      .ins-ok{background:#dcfce7;color:#15803d}.ins-warn{background:#fef9c3;color:#92400e}
      .player-block{border:1px solid #e2ddd6;border-radius:7px;padding:14px;margin-bottom:12px;page-break-inside:avoid}
      .pl-head{display:flex;align-items:center;gap:12px;margin-bottom:10px}
      .pl-avatar{width:36px;height:36px;border-radius:50%;background:#4a6350;display:flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:600;color:#fff;flex-shrink:0}
      .pl-rating{margin-left:auto;font-family:'Fraunces',serif;font-size:1.6rem;color:#c4601a}
      .bar-row{display:flex;align-items:center;gap:10px;margin-bottom:5px;font-size:11px}
      .bar-label{width:150px;flex-shrink:0;color:#5a5a54}
      .bar-track{flex:1;height:5px;background:#f3f1ed;border-radius:3px;overflow:hidden}
      .bar-fill{height:100%;border-radius:3px}
      .bar-val{width:60px;text-align:right;color:#9a9a90}
      @media print{body{padding:14px}@page{margin:.8cm;size:A4}}
    <\/style>
  </head><body>
  <div class="header">
    <h1>${teamName}</h1>
    <p>Reporte scouting · ${fecha} · ${matches.length} partidos · ${players.length} jugadores</p>
  </div>`);

  // Totales
  const wins  = matches.filter(m=>m.res==='W').length;
  const draws = matches.filter(m=>m.res==='D').length;
  const loses = matches.filter(m=>m.res==='L').length;
  const gf    = matches.reduce((a,m)=>a+m.gf,0);
  const gc    = matches.reduce((a,m)=>a+m.gc,0);
  ventana.document.write(`
    <div class="section">
      <h2>Resumen de temporada</h2>
      <div class="grid4">
        <div class="box"><div class="box-val">${wins}</div><div class="box-label">Victorias</div></div>
        <div class="box"><div class="box-val">${draws}</div><div class="box-label">Empates</div></div>
        <div class="box"><div class="box-val">${loses}</div><div class="box-label">Derrotas</div></div>
        <div class="box"><div class="box-val">${gf}–${gc}</div><div class="box-label">Goles</div></div>
      </div>
    </div>`);

  // Jugadores
  const playerData = calcPlayerData();
  if (playerData.length > 0) {
    ventana.document.write('<div class="section"><h2>Análisis individual</h2>');
    [...playerData].sort((a,b)=>b.rating-a.rating).forEach(pd => {
      const conf = POSICION_METRICAS[POS_MAP[pd.player.pos]];
      ventana.document.write(`
        <div class="player-block">
          <div class="pl-head">
            <div class="pl-avatar">${pd.player.name.split(' ').map(w=>w[0]).join('').slice(0,2)}</div>
            <div>
              <div style="font-weight:500">${pd.player.name}</div>
              <div style="font-size:11px;color:#9a9a90">${conf?.label||pd.player.pos} · ${pd.partidos} partidos · ${pd.totalMinutos}'</div>
            </div>
            <div class="pl-rating">${pd.rating}</div>
          </div>`);
      if (pd.insights.length > 0) {
        pd.insights.forEach(ins => {
          ventana.document.write(`<div class="insight-block ${ins.tipo==='excelente'?'ins-ok':'ins-warn'}">${ins.tipo==='excelente'?'✅':'⚠️'} ${ins.texto}</div>`);
        });
      }
      if (conf) {
        conf.secciones.forEach(sec => {
          const mets = sec.metricas.filter(m => pd.promedios[m.id]);
          if (!mets.length) return;
          ventana.document.write(`<div style="margin-top:10px"><div style="font-size:10px;font-weight:600;color:#9a9a90;text-transform:uppercase;letter-spacing:.06em;margin-bottom:6px">${sec.titulo}</div>`);
          mets.forEach(m => {
            const p = pd.promedios[m.id];
            const pct = m.tipo==='num' ? Math.min(parseFloat(p.avg)/10*100,100) : p.pct;
            const barColor = pct>=70?'#16a34a':pct>=50?'#d97706':'#dc2626';
            const val = m.tipo==='num' ? p.avg+'/partido' : p.pct+'% ('+p.parte+'/'+p.total+')';
            ventana.document.write(`<div class="bar-row"><div class="bar-label">${m.label}</div><div class="bar-track"><div class="bar-fill" style="width:${pct}%;background:${barColor}"></div></div><div class="bar-val">${val}</div></div>`);
          });
          ventana.document.write('</div>');
        });
      }
      ventana.document.write('</div>');
    });
    ventana.document.write('</div>');
  }

  // Partidos
  ventana.document.write(`
    <div class="section">
      <h2>Registro de partidos</h2>
      <table><thead><tr><th>Fecha</th><th>Rival</th><th>Cond.</th><th>Resultado</th><th>GF</th><th>GC</th></tr></thead><tbody>
        ${[...matches].sort((a,b)=>new Date(b.fecha)-new Date(a.fecha)).map(m=>{
          const fecha=new Date(m.fecha+'T00:00:00').toLocaleDateString('es-AR',{day:'2-digit',month:'short'});
          const bg=m.res==='W'?'#dcfce7':m.res==='D'?'#fef9c3':'#fee2e2';
          const col=m.res==='W'?'#15803d':m.res==='D'?'#92400e':'#b91c1c';
          return `<tr><td>${fecha}</td><td>${m.rival}</td><td>${m.cond}</td><td><span class="badge" style="background:${bg};color:${col}">${m.res==='W'?'Victoria':m.res==='D'?'Empate':'Derrota'}</span></td><td>${m.gf}</td><td>${m.gc}</td></tr>`;
        }).join('')}
      </tbody></table>
    </div>
    <div style="margin-top:20px;padding-top:12px;border-top:1px solid #e2ddd6;font-size:10px;color:#9a9a90;text-align:center">
      Generado por StatCampo · ${fecha}
    </div>
  <\/body><\/html>`);

  ventana.document.close();
  setTimeout(()=>{ventana.focus();ventana.print();}, 900);
}

// ── IMPORTAR EXCEL ────────────────────────────────────────────────────────────
function handleDrop(e) {
  e.preventDefault();
  document.getElementById('importZone').classList.remove('drag-over');
  const file = e.dataTransfer.files[0];
  if (file) processFile(file);
}
function handleFileInput(e) { if (e.target.files[0]) processFile(e.target.files[0]); }
function processFile(file) {
  const reader = new FileReader();
  reader.onload = e => {
    try {
      const wb = XLSX.read(e.target.result, {type:'binary'});
      const ws = wb.Sheets[wb.SheetNames[0]];
      const data = XLSX.utils.sheet_to_json(ws);
      if (data.length === 0) { gToast('El archivo está vacío', 'err'); return; }
      showImportPreview(data);
    } catch(err) { gToast('Error al leer el archivo', 'err'); }
  };
  reader.readAsBinaryString(file);
}
function showImportPreview(data) {
  const cols = Object.keys(data[0]);
  const wrap = document.getElementById('importPreview');
  wrap.innerHTML = `
    <div style="margin-bottom:12px;font-size:.85rem;color:var(--text-mid)">${data.length} filas detectadas. Columnas: ${cols.join(', ')}</div>
    <div style="overflow-x:auto;margin-bottom:14px">
      <table class="players-table">
        <thead><tr>${cols.map(c=>`<th>${c}</th>`).join('')}</tr></thead>
        <tbody>${data.slice(0,5).map(row=>`<tr>${cols.map(c=>`<td>${row[c]??''}</td>`).join('')}</tr>`).join('')}</tbody>
      </table>
    </div>
    <div class="btn-group">
      <button class="btn btn-primary" onclick="importAsPlayers(${JSON.stringify(data).replace(/"/g,'&quot;')})">Importar como jugadores</button>
      <button class="btn btn-ghost" onclick="document.getElementById('importPreview').innerHTML=''">Cancelar</button>
    </div>`;
}
function importAsPlayers(data) {
  let added = 0;
  data.forEach(row => {
    const name = row['Nombre'] || row['nombre'] || row['NOMBRE'] || '';
    if (!name) return;
    players.push({ id:uid(), name:name.trim(), numero:parseInt(row['Número']||row['Numero']||0)||0, pos:row['Posición']||row['Posicion']||'MC', edad:parseInt(row['Edad']||0)||0, pie:row['Pie']||'Derecho', nacionalidad:row['Nacionalidad']||'' });
    added++;
  });
  renderPlantilla(); updateSidebar();
  saveState();
  document.getElementById('importPreview').innerHTML = '';
  gToast(`${added} jugadores importados`);
}

// ── API KEY ───────────────────────────────────────────────────────────────────
function loadApiKey() {
  const key = localStorage.getItem('sc_api_key') || '';
  if (key) {
    document.getElementById('apiKeyInput').value = key;
    document.getElementById('apiKeyBadge').textContent = 'Configurada ✓';
    document.getElementById('apiKeyBadge').style.background = 'var(--success-light)';
    document.getElementById('apiKeyBadge').style.color = 'var(--success)';
    document.getElementById('apiKeyStatus').textContent = '🟢';
    document.getElementById('iaAnalisisWrap').style.display = 'block';
  }
  return key;
}

function saveApiKey() {
  const key = document.getElementById('apiKeyInput').value.trim();
  if (!key || !key.startsWith('sk-ant')) {
    gToast('API key inválida — debe comenzar con sk-ant', 'err');
    return;
  }
  localStorage.setItem('sc_api_key', key);
  document.getElementById('apiKeyBadge').textContent = 'Configurada ✓';
  document.getElementById('apiKeyBadge').style.background = 'var(--success-light)';
  document.getElementById('apiKeyBadge').style.color = 'var(--success)';
  document.getElementById('apiKeyStatus').textContent = '🟢';
  document.getElementById('iaAnalisisWrap').style.display = 'block';
  document.getElementById('apiKeyPanel').style.display = 'none';
  document.getElementById('apiPanelToggle').textContent = '▼ Configurar';
  gToast('API key guardada');
}

function clearApiKey() {
  localStorage.removeItem('sc_api_key');
  document.getElementById('apiKeyInput').value = '';
  document.getElementById('apiKeyBadge').textContent = 'Sin configurar';
  document.getElementById('apiKeyBadge').style.background = 'var(--bg2)';
  document.getElementById('apiKeyBadge').style.color = 'var(--text-light)';
  document.getElementById('apiKeyStatus').textContent = '🔑';
  document.getElementById('iaAnalisisWrap').style.display = 'none';
  gToast('API key eliminada');
}

function toggleApiPanel() {
  const panel = document.getElementById('apiKeyPanel');
  const toggle = document.getElementById('apiPanelToggle');
  const visible = panel.style.display !== 'none';
  panel.style.display = visible ? 'none' : 'block';
  toggle.textContent = visible ? '▼ Configurar' : '▲ Cerrar';
}

// ── ANÁLISIS IA ───────────────────────────────────────────────────────────────
async function generarAnalisisIA() {
  const key = localStorage.getItem('sc_api_key');
  if (!key) { gToast('Configurá tu API key primero', 'err'); return; }
  if (players.length === 0 || matches.length === 0) {
    gToast('Necesitás jugadores y partidos cargados', 'err'); return;
  }

  const wrap = document.getElementById('iaAnalisisContent');
  wrap.innerHTML = `
    <div style="display:flex;align-items:center;gap:12px;padding:20px;color:var(--text-mid)">
      <div style="width:20px;height:20px;border:2px solid var(--accent);border-top-color:transparent;border-radius:50%;animation:spin .8s linear infinite;flex-shrink:0"></div>
      <span>Claude está analizando tu equipo...</span>
    </div>
    <style>@keyframes spin{to{transform:rotate(360deg)}}<\/style>`;

  // Armar contexto completo del equipo
  const teamName = document.getElementById('sbTeamName').textContent;
  const wins   = matches.filter(m=>m.res==='W').length;
  const draws  = matches.filter(m=>m.res==='D').length;
  const losses = matches.filter(m=>m.res==='L').length;
  const gf     = matches.reduce((a,m)=>a+m.gf,0);
  const gc     = matches.reduce((a,m)=>a+m.gc,0);
  const local  = matches.filter(m=>m.cond==='Local');
  const visit  = matches.filter(m=>m.cond==='Visitante');
  const locW   = local.filter(m=>m.res==='W').length;
  const visW   = visit.filter(m=>m.res==='W').length;
  const ult5   = [...matches].sort((a,b)=>new Date(b.fecha)-new Date(a.fecha)).slice(0,5);
  const forma5 = ult5.map(m=>`${m.res==='W'?'Victoria':m.res==='D'?'Empate':'Derrota'} vs ${m.rival} (${m.gf}-${m.gc})`).join(', ');

  const playerData = calcPlayerData();
  const playerSummary = playerData.map(pd => {
    const conf = POSICION_METRICAS[POS_MAP[pd.player.pos]];
    const metResumen = Object.entries(pd.promedios).map(([id, p]) => {
      if (p.tipo === 'num') return `${p.label}: ${p.avg}/partido`;
      return `${p.label}: ${p.pct}% (${p.parte}/${p.total})`;
    }).join(' | ');
    return `${pd.player.name} (${conf?.label||pd.player.pos}, Rating ${pd.rating}): ${pd.partidos} partidos, ${pd.totalMinutos}' — ${metResumen || 'sin métricas detalladas'}`;
  }).join('\n');

  const prompt = `Sos un analista táctico de fútbol profesional. Analizás equipos de segunda división y generás informes de scouting detallados para el cuerpo técnico.

DATOS DEL EQUIPO: ${teamName}
Temporada: ${matches.length} partidos jugados
Resultados: ${wins}V ${draws}E ${losses}D
Goles: ${gf} a favor, ${gc} en contra (diferencia: ${gf-gc>0?'+':''}${gf-gc})
De local: ${local.length} partidos, ${locW} victorias (${local.length?Math.round(locW/local.length*100):0}%)
De visitante: ${visit.length} partidos, ${visW} victorias (${visit.length?Math.round(visW/visit.length*100):0}%)
Forma reciente (últimos 5): ${forma5}

PLANTILLA (${players.length} jugadores):
${playerSummary}

Generá un informe de scouting táctico completo con estas secciones:

1. **DIAGNÓSTICO GENERAL** — Estado actual del equipo en 2-3 párrafos. Describí el momento deportivo, la solidez defensiva y ofensiva basándote en los números.

2. **FORTALEZAS DEL EQUIPO** — 3 a 4 puntos concretos con los datos que los respaldan.

3. **ÁREAS DE MEJORA** — 3 a 4 puntos concretos. Sé directo pero constructivo.

4. **JUGADORES DESTACADOS** — Analizá los 3 mejores ratings y explicá por qué son importantes para el equipo.

5. **JUGADORES A POTENCIAR** — Identificá jugadores con potencial de mejora y qué trabajar con cada uno.

6. **RECOMENDACIONES TÁCTICAS** — 3 a 4 sugerencias concretas para el cuerpo técnico basadas en los datos.

7. **CONCLUSIÓN** — Perspectiva general y próximos pasos.

Escribí en español rioplatense. Sé específico, usa los nombres reales de los jugadores y los datos concretos. Evitá generalidades. El tono debe ser profesional pero directo, como un informe que leería el DT en el vestuario.`;

  try {
    const response = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-api-key': key,
        'anthropic-version': '2023-06-01',
        'anthropic-dangerous-direct-browser-access': 'true'
      },
      body: JSON.stringify({
        model: 'claude-sonnet-4-20250514',
        max_tokens: 2000,
        messages: [{ role: 'user', content: prompt }]
      })
    });

    if (!response.ok) {
      const err = await response.json().catch(()=>({}));
      throw new Error(err.error?.message || `Error ${response.status}`);
    }

    const data = await response.json();
    const text = data.content[0].text;

    // Renderizar con formato markdown básico
    const rendered = text
      .replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>')
      .replace(/^#{1,3} (.+)$/gm, '<h4 style="font-family:\'Fraunces\',serif;font-size:1rem;font-weight:400;color:var(--green-dark);margin:16px 0 6px">$1</h4>')
      .replace(/^\d+\.\s+\*\*([^*]+)\*\*/gm, '<h4 style="font-family:\'Fraunces\',serif;font-size:1rem;font-weight:400;color:var(--green-dark);margin:16px 0 6px">$1</h4>')
      .replace(/^[-•]\s+(.+)$/gm, '<div style="display:flex;gap:8px;margin-bottom:5px"><span style="color:var(--accent);flex-shrink:0">▸</span><span>$1</span></div>')
      .replace(/\n\n/g, '</p><p style="margin-bottom:10px">')
      .replace(/\n/g, '<br>');

    wrap.innerHTML = `
      <div style="line-height:1.7;color:var(--text);font-size:.88rem">
        <p style="margin-bottom:10px">${rendered}</p>
      </div>
      <div style="margin-top:16px;padding-top:12px;border-top:1px solid var(--border);font-size:.72rem;color:var(--text-light);display:flex;align-items:center;gap:6px">
        <span>🤖</span> Análisis generado por Claude (Anthropic) · ${new Date().toLocaleString('es-AR')}
      </div>`;

  } catch(err) {
    wrap.innerHTML = `
      <div style="padding:16px;background:var(--danger-light);border-radius:8px;color:var(--danger);font-size:.85rem">
        <strong>⚠ Error al conectar con la API:</strong> ${err.message}
        <div style="margin-top:8px;font-size:.78rem;color:var(--text-mid)">Verificá que tu API key sea correcta y que tengas créditos disponibles en console.anthropic.com</div>
      </div>`;
    gToast('Error de API: ' + err.message, 'err');
  }
}

// ── DEMO ─────────────────────────────────────────────────────────────────────
function cargarDemo() {
  if (players.length > 0 || matches.length > 0) {
    if (!confirm('Esto va a reemplazar los datos actuales con el modo demo. ¿Continuás?')) return;
  }

  // Nombre del equipo
  const teamEl = document.getElementById('sbTeamName');
  if (teamEl) teamEl.textContent = 'Atlético San Martín';

  // Plantilla — 16 jugadores
  players = [
    { id:'p1',  name:'Rodrigo Villalba',   numero:1,  pos:'POR',    edad:28, pie:'Derecho',    nacionalidad:'Argentina' },
    { id:'p2',  name:'Matías Godoy',        numero:4,  pos:'DC',     edad:25, pie:'Derecho',    nacionalidad:'Argentina' },
    { id:'p3',  name:'Lucas Pereyra',       numero:5,  pos:'DC',     edad:30, pie:'Izquierdo',  nacionalidad:'Argentina' },
    { id:'p4',  name:'Ezequiel Sosa',       numero:2,  pos:'LD',     edad:23, pie:'Derecho',    nacionalidad:'Argentina' },
    { id:'p5',  name:'Brian Cáceres',       numero:3,  pos:'LI',     edad:26, pie:'Izquierdo',  nacionalidad:'Argentina' },
    { id:'p6',  name:'Fernando Ruiz',       numero:6,  pos:'MCD',    edad:29, pie:'Derecho',    nacionalidad:'Argentina' },
    { id:'p7',  name:'Diego Herrera',       numero:8,  pos:'MC',     edad:24, pie:'Derecho',    nacionalidad:'Argentina' },
    { id:'p8',  name:'Nicolás Flores',      numero:10, pos:'MCO',    edad:27, pie:'Derecho',    nacionalidad:'Argentina' },
    { id:'p9',  name:'Sebastián Romero',    numero:7,  pos:'ED',     edad:22, pie:'Derecho',    nacionalidad:'Argentina' },
    { id:'p10', name:'Pablo Aguirre',       numero:11, pos:'EI',     edad:25, pie:'Izquierdo',  nacionalidad:'Uruguay'   },
    { id:'p11', name:'Cristian Molina',     numero:9,  pos:'DC_DEL', edad:28, pie:'Derecho',    nacionalidad:'Argentina' },
    { id:'p12', name:'Andrés Juárez',       numero:13, pos:'DC',     edad:31, pie:'Derecho',    nacionalidad:'Argentina' },
    { id:'p13', name:'Tomás Brizuela',      numero:14, pos:'MAD',    edad:21, pie:'Derecho',    nacionalidad:'Argentina' },
    { id:'p14', name:'Ramiro Cabrera',      numero:15, pos:'MCD',    edad:26, pie:'Derecho',    nacionalidad:'Argentina' },
    { id:'p15', name:'Alexis Vega',         numero:17, pos:'ED',     edad:20, pie:'Izquierdo',  nacionalidad:'Argentina' },
    { id:'p16', name:'Jonathan Suárez',     numero:19, pos:'DC_DEL', edad:23, pie:'Derecho',    nacionalidad:'Paraguay'  },
  ];

  // Partidos — 8 fechas
  matches = [
    { id:'m1', rival:'Deportivo Maipú',    fecha:'2025-08-10', cond:'Local',     gf:2, gc:0, res:'W', jornada:'Fecha 1' },
    { id:'m2', rival:'San Jorge',          fecha:'2025-08-17', cond:'Visitante', gf:1, gc:1, res:'D', jornada:'Fecha 2' },
    { id:'m3', rival:'Güemes',             fecha:'2025-08-24', cond:'Local',     gf:3, gc:1, res:'W', jornada:'Fecha 3' },
    { id:'m4', rival:'Chaco For Ever',     fecha:'2025-08-31', cond:'Visitante', gf:0, gc:2, res:'L', jornada:'Fecha 4' },
    { id:'m5', rival:'Defensores de Belgrano', fecha:'2025-09-07', cond:'Local', gf:1, gc:0, res:'W', jornada:'Fecha 5' },
    { id:'m6', rival:'Deportivo Madryn',   fecha:'2025-09-14', cond:'Visitante', gf:2, gc:2, res:'D', jornada:'Fecha 6' },
    { id:'m7', rival:'Santamarina',        fecha:'2025-09-21', cond:'Local',     gf:1, gc:0, res:'W', jornada:'Fecha 7' },
    { id:'m8', rival:'Almirante Brown',    fecha:'2025-09-28', cond:'Visitante', gf:2, gc:1, res:'W', jornada:'Fecha 8' },
  ];

  // Métricas por partido y jugador (selección representativa)
  metricas = {
    // Fecha 1 vs Deportivo Maipú (W 2-0)
    m1: {
      p1:  { minutos:90, cornersRecibidos:3, salidasAereas:{exitosas:4,intentadas:5}, despejes:6, atajadasTotal:3, golesRecibidos:0, unVsUno:{atajados:1,enfrentados:1}, pasesCortos:{completados:18,intentados:20}, pasesLargos:{completados:8,intentados:12} },
      p2:  { minutos:90, duelosAereos:{ganados:6,disputados:7}, duelosTerrestre:{ganados:4,disputados:5}, anticipaciones:4, entradas:{exitosas:3,intentadas:4}, despejes:7, regatesSufridos:{superado:0,recibidos:3}, pasesCortos:{completados:22,intentados:25} },
      p6:  { minutos:90, pasesCortos:{completados:34,intentados:38}, pasesLargos:{completados:6,intentados:10}, pasesClave:2, perdidasBalon:3, duelosGanados:{ganados:5,disputados:7}, recuperaciones:5, presionExitosa:{exitosas:3,intentadas:5} },
      p8:  { minutos:90, pasesCortos:{completados:28,intentados:32}, pasesClave:4, perdidasBalon:2, regates:{exitosos:5,intentados:7}, asistencias:1, goles:1, remates:{'al arco':2,totales:3}, driblesArea:4 },
      p11: { minutos:90, remates:{'al arco':4,totales:6}, goles:1, monoAMono:{convertidos:1,enfrentados:2}, regates:{exitosos:2,intentados:4}, asistencias:0, movSinBalon:8, presionAlta:{exitosas:4,intentadas:6} },
    },
    // Fecha 2 vs San Jorge (D 1-1)
    m2: {
      p1:  { minutos:90, cornersRecibidos:5, salidasAereas:{exitosas:3,intentadas:4}, despejes:4, atajadasTotal:4, golesRecibidos:1, unVsUno:{atajados:0,enfrentados:1}, pasesCortos:{completados:15,intentados:18}, pasesLargos:{completados:7,intentados:14} },
      p2:  { minutos:90, duelosAereos:{ganados:4,disputados:6}, duelosTerrestre:{ganados:3,disputados:5}, anticipaciones:2, entradas:{exitosas:2,intentadas:3}, despejes:5, regatesSufridos:{superado:1,recibidos:4}, pasesCortos:{completados:18,intentados:22} },
      p6:  { minutos:90, pasesCortos:{completados:29,intentados:35}, pasesLargos:{completados:5,intentados:9}, pasesClave:1, perdidasBalon:4, duelosGanados:{ganados:4,disputados:6}, recuperaciones:4, presionExitosa:{exitosas:2,intentadas:5} },
      p8:  { minutos:85, pasesCortos:{completados:24,intentados:29}, pasesClave:3, perdidasBalon:3, regates:{exitosos:4,intentados:6}, asistencias:1, goles:0, remates:{'al arco':1,totales:2}, driblesArea:3 },
      p11: { minutos:90, remates:{'al arco':2,totales:5}, goles:0, monoAMono:{convertidos:0,enfrentados:1}, regates:{exitosos:1,intentados:3}, asistencias:0, movSinBalon:6, presionAlta:{exitosas:3,intentadas:5} },
    },
    // Fecha 3 vs Güemes (W 3-1)
    m3: {
      p1:  { minutos:90, cornersRecibidos:4, salidasAereas:{exitosas:5,intentadas:6}, despejes:7, atajadasTotal:2, golesRecibidos:1, unVsUno:{atajados:1,enfrentados:1}, pasesCortos:{completados:20,intentados:22}, pasesLargos:{completados:10,intentados:14} },
      p2:  { minutos:90, duelosAereos:{ganados:7,disputados:8}, duelosTerrestre:{ganados:5,disputados:6}, anticipaciones:5, entradas:{exitosas:4,intentadas:4}, despejes:8, regatesSufridos:{superado:0,recibidos:2}, pasesCortos:{completados:25,intentados:27} },
      p6:  { minutos:90, pasesCortos:{completados:38,intentados:42}, pasesLargos:{completados:8,intentados:11}, pasesClave:3, perdidasBalon:2, duelosGanados:{ganados:6,disputados:7}, recuperaciones:7, presionExitosa:{exitosas:4,intentadas:6} },
      p8:  { minutos:90, pasesCortos:{completados:32,intentados:36}, pasesClave:5, perdidasBalon:1, regates:{exitosos:7,intentados:9}, asistencias:2, goles:1, remates:{'al arco':3,totales:4}, driblesArea:6 },
      p11: { minutos:90, remates:{'al arco':5,totales:7}, goles:2, monoAMono:{convertidos:1,enfrentados:2}, regates:{exitosos:3,intentados:5}, asistencias:0, movSinBalon:10, presionAlta:{exitosas:5,intentadas:7} },
    },
    // Fecha 4 vs Chaco For Ever (L 0-2)
    m4: {
      p1:  { minutos:90, cornersRecibidos:7, salidasAereas:{exitosas:2,intentadas:4}, despejes:3, atajadasTotal:5, golesRecibidos:2, unVsUno:{atajados:1,enfrentados:2}, pasesCortos:{completados:12,intentados:18}, pasesLargos:{completados:5,intentados:14} },
      p2:  { minutos:90, duelosAereos:{ganados:3,disputados:6}, duelosTerrestre:{ganados:2,disputados:5}, anticipaciones:1, entradas:{exitosas:2,intentadas:4}, despejes:4, regatesSufridos:{superado:2,recibidos:5}, erroresFatales:1, pasesCortos:{completados:14,intentados:20} },
      p6:  { minutos:90, pasesCortos:{completados:22,intentados:32}, pasesLargos:{completados:3,intentados:10}, pasesClave:0, perdidasBalon:6, duelosGanados:{ganados:3,disputados:7}, recuperaciones:3, presionExitosa:{exitosas:1,intentadas:5} },
      p8:  { minutos:72, pasesCortos:{completados:18,intentados:26}, pasesClave:1, perdidasBalon:4, regates:{exitosos:2,intentados:6}, asistencias:0, goles:0, remates:{'al arco':0,totales:2}, driblesArea:1 },
      p11: { minutos:90, remates:{'al arco':1,totales:4}, goles:0, monoAMono:{convertidos:0,enfrentados:1}, regates:{exitosos:1,intentados:4}, asistencias:0, movSinBalon:5, presionAlta:{exitosas:1,intentadas:5} },
    },
    // Fecha 5 vs Defensores (W 1-0)
    m5: {
      p1:  { minutos:90, cornersRecibidos:4, salidasAereas:{exitosas:4,intentadas:5}, despejes:5, atajadasTotal:4, golesRecibidos:0, unVsUno:{atajados:2,enfrentados:2}, pasesCortos:{completados:17,intentados:20}, pasesLargos:{completados:9,intentados:13} },
      p2:  { minutos:90, duelosAereos:{ganados:5,disputados:6}, duelosTerrestre:{ganados:4,disputados:5}, anticipaciones:4, entradas:{exitosas:3,intentadas:3}, despejes:6, regatesSufridos:{superado:0,recibidos:3}, pasesCortos:{completados:21,intentados:24} },
      p6:  { minutos:90, pasesCortos:{completados:35,intentados:39}, pasesLargos:{completados:7,intentados:10}, pasesClave:2, perdidasBalon:2, duelosGanados:{ganados:6,disputados:8}, recuperaciones:6, presionExitosa:{exitosas:4,intentadas:6} },
      p8:  { minutos:90, pasesCortos:{completados:30,intentados:34}, pasesClave:3, perdidasBalon:2, regates:{exitosos:6,intentados:8}, asistencias:1, goles:0, remates:{'al arco':2,totales:3}, driblesArea:4 },
      p11: { minutos:90, remates:{'al arco':3,totales:5}, goles:1, monoAMono:{convertidos:1,enfrentados:1}, regates:{exitosos:2,intentados:3}, asistencias:0, movSinBalon:7, presionAlta:{exitosas:4,intentadas:6} },
    },
    // Fecha 6 vs Madryn (D 2-2)
    m6: {
      p1:  { minutos:90, cornersRecibidos:6, salidasAereas:{exitosas:3,intentadas:5}, despejes:5, atajadasTotal:3, golesRecibidos:2, unVsUno:{atajados:1,enfrentados:2}, pasesCortos:{completados:14,intentados:19}, pasesLargos:{completados:6,intentados:13} },
      p8:  { minutos:90, pasesCortos:{completados:26,intentados:30}, pasesClave:4, perdidasBalon:3, regates:{exitosos:5,intentados:7}, asistencias:1, goles:1, remates:{'al arco':3,totales:4}, driblesArea:5 },
      p11: { minutos:90, remates:{'al arco':3,totales:6}, goles:1, monoAMono:{convertidos:0,enfrentados:2}, regates:{exitosos:1,intentados:3}, asistencias:0, movSinBalon:7, presionAlta:{exitosas:3,intentadas:5} },
    },
    // Fecha 7 vs Santamarina (W 1-0)
    m7: {
      p1:  { minutos:90, cornersRecibidos:3, salidasAereas:{exitosas:4,intentadas:4}, despejes:6, atajadasTotal:3, golesRecibidos:0, unVsUno:{atajados:1,enfrentados:1}, pasesCortos:{completados:19,intentados:21}, pasesLargos:{completados:9,intentados:12} },
      p2:  { minutos:90, duelosAereos:{ganados:6,disputados:7}, duelosTerrestre:{ganados:5,disputados:6}, anticipaciones:5, entradas:{exitosas:4,intentadas:5}, despejes:7, regatesSufridos:{superado:0,recibidos:2}, pasesCortos:{completados:24,intentados:26} },
      p6:  { minutos:90, pasesCortos:{completados:37,intentados:41}, pasesLargos:{completados:7,intentados:9}, pasesClave:2, perdidasBalon:2, duelosGanados:{ganados:7,disputados:8}, recuperaciones:7, presionExitosa:{exitosas:5,intentadas:7} },
      p11: { minutos:82, remates:{'al arco':2,totales:4}, goles:1, monoAMono:{convertidos:1,enfrentados:1}, regates:{exitosos:2,intentados:3}, asistencias:0, movSinBalon:6, presionAlta:{exitosas:4,intentadas:6} },
    },
    // Fecha 8 vs Almirante Brown (W 2-1)
    m8: {
      p1:  { minutos:90, cornersRecibidos:4, salidasAereas:{exitosas:5,intentadas:6}, despejes:7, atajadasTotal:2, golesRecibidos:1, unVsUno:{atajados:1,enfrentados:2}, pasesCortos:{completados:18,intentados:21}, pasesLargos:{completados:8,intentados:13} },
      p2:  { minutos:90, duelosAereos:{ganados:6,disputados:7}, duelosTerrestre:{ganados:4,disputados:5}, anticipaciones:4, entradas:{exitosas:3,intentadas:4}, despejes:6, regatesSufridos:{superado:1,recibidos:3}, pasesCortos:{completados:22,intentados:25} },
      p6:  { minutos:90, pasesCortos:{completados:36,intentados:40}, pasesLargos:{completados:6,intentados:10}, pasesClave:3, perdidasBalon:2, duelosGanados:{ganados:6,disputados:7}, recuperaciones:6, presionExitosa:{exitosas:4,intentadas:6} },
      p8:  { minutos:90, pasesCortos:{completados:31,intentados:35}, pasesClave:4, perdidasBalon:2, regates:{exitosos:6,intentados:8}, asistencias:1, goles:0, remates:{'al arco':2,totales:3}, driblesArea:5 },
      p11: { minutos:90, remates:{'al arco':4,totales:6}, goles:2, monoAMono:{convertidos:1,enfrentados:2}, regates:{exitosos:2,intentados:4}, asistencias:0, movSinBalon:9, presionAlta:{exitosas:4,intentadas:6} },
    },
  };

  renderPlantilla();
  renderMatches();
  updateSidebar();
  saveState();

  gToast('Modo demo cargado — Atlético San Martín');

  // Ir a reporte automáticamente
  setTimeout(() => {
    document.querySelectorAll('.sb-item').forEach(i => i.classList.remove('active'));
    document.querySelector('[data-tab="reporte"]').classList.add('active');
    document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
    document.getElementById('tab-reporte').classList.add('active');
    generarReporte();
  }, 400);
}

function limpiarTodo() {
  if (!confirm('¿Eliminás todos los datos del equipo?')) return;
  players = []; matches = []; metricas = {};
  const teamEl = document.getElementById('sbTeamName');
  if (teamEl) teamEl.textContent = 'Mi Equipo';
  renderPlantilla();
  renderMatches();
  updateSidebar();
  document.getElementById('reporteContent').innerHTML = `
    <div class="empty-state" style="padding:60px 20px">
      <div class="empty-icon">📋</div>
      <div class="empty-text">El reporte aparece acá</div>
      <div class="empty-sub">Cargá jugadores, partidos y métricas, luego hacé click en "Generar reporte"</div>
    </div>`;
  localStorage.removeItem(SC_STORAGE_KEY);
  gToast('Datos eliminados');
}

// ── INIT ─────────────────────────────────────────────────────────────────────
loadState();
renderPlantilla();
renderMatches();
updateSidebar();
loadApiKey();

// Nombre de equipo editable — guardar al perder foco o Enter
const teamNameEl = document.getElementById('sbTeamName');
if (teamNameEl) {
  teamNameEl.addEventListener('blur', () => saveState());
  teamNameEl.addEventListener('keydown', e => {
    if (e.key === 'Enter') { e.preventDefault(); teamNameEl.blur(); }
  });
}

  if(typeof togglePlayerForm!="undefined")window.SC_miequipo_togglePlayerForm=togglePlayerForm;
  if(typeof savePlayer!="undefined")window.SC_miequipo_savePlayer=savePlayer;
  if(typeof editPlayer!="undefined")window.SC_miequipo_editPlayer=editPlayer;
  if(typeof deletePlayer!="undefined")window.SC_miequipo_deletePlayer=deletePlayer;
  if(typeof clearPlayerForm!="undefined")window.SC_miequipo_clearPlayerForm=clearPlayerForm;
  if(typeof toggleMatchForm!="undefined")window.SC_miequipo_toggleMatchForm=toggleMatchForm;
  if(typeof saveMatch!="undefined")window.SC_miequipo_saveMatch=saveMatch;
  if(typeof deleteMatch!="undefined")window.SC_miequipo_deleteMatch=deleteMatch;
  if(typeof clearMatchForm!="undefined")window.SC_miequipo_clearMatchForm=clearMatchForm;
  if(typeof onMetricaPartidoChange!="undefined")window.SC_miequipo_onMetricaPartidoChange=onMetricaPartidoChange;
  if(typeof onMetricaJugadorChange!="undefined")window.SC_miequipo_onMetricaJugadorChange=onMetricaJugadorChange;
  if(typeof saveMetricas!="undefined")window.SC_miequipo_saveMetricas=saveMetricas;
  if(typeof clearMetricaForm!="undefined")window.SC_miequipo_clearMetricaForm=clearMetricaForm;
  if(typeof generarReporte!="undefined")window.SC_miequipo_generarReporte=generarReporte;
  if(typeof exportarPDF!="undefined")window.SC_miequipo_exportarPDF=exportarPDF;
  if(typeof handleDrop!="undefined")window.SC_miequipo_handleDrop=handleDrop;
  if(typeof handleFileInput!="undefined")window.SC_miequipo_handleFileInput=handleFileInput;
  if(typeof importAsPlayers!="undefined")window.SC_miequipo_importAsPlayers=importAsPlayers;
  if(typeof toggleApiPanel!="undefined")window.SC_miequipo_toggleApiPanel=toggleApiPanel;
  if(typeof saveApiKey!="undefined")window.SC_miequipo_saveApiKey=saveApiKey;
  if(typeof clearApiKey!="undefined")window.SC_miequipo_clearApiKey=clearApiKey;
  if(typeof generarAnalisisIA!="undefined")window.SC_miequipo_generarAnalisisIA=generarAnalisisIA;
  if(typeof cargarDemo!="undefined")window.SC_miequipo_cargarDemo=cargarDemo;
  if(typeof limpiarTodo!="undefined")window.SC_miequipo_limpiarTodo=limpiarTodo;
})();</script>
</body>
</html>
